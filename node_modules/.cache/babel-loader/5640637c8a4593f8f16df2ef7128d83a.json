{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\FactAssetPoolPayment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\FactAssetPoolPayment.vue","mtime":1604281047661},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport advFilter from '@/components/common/AdvanceFilter.vue';\nimport dataGrid from '@/components/common/DataGrid.vue';\nimport dynamicTab from '@/mixins/dynamicTab.js';\nimport FileSaver from 'file-saver';\nimport ItemBox from '@/components/layout/ItemBox.vue';\nimport XLSX from 'xlsx';\nimport { mapState, mapMutations } from 'vuex';\nimport { addClass, removeClass, hasClass } from '@/utils/dom.js';\nexport default {\n  data: function data() {\n    return {\n      factAr: [],\n      changeAr: [],\n      changeAr2: [],\n      poolArrearsAr: [],\n      payment1: true,\n      payment2: true,\n      payment3: true,\n      payment4: true,\n      factArL: 'auto',\n      changeArL: 'auto',\n      changeAr2L: 'auto',\n      poolArrearsArL: 'auto'\n    };\n  },\n  created: function created() {\n    if (this.AssetType == 'NPL') {\n      this.GetPoolArrearsPerformance();\n    } else {\n      this.initFactPayment();\n      this.initPoolChangeStatistics();\n    }\n  },\n  watch: {\n    AssetType: function AssetType(v) {\n      if (v == 'NPL') {\n        this.GetPoolArrearsPerformance();\n      } else {\n        this.initFactPayment();\n        this.initPoolChangeStatistics();\n      }\n    }\n  },\n  components: {\n    ItemBox: ItemBox\n  },\n  computed: _objectSpread(_objectSpread({}, mapState('productInfo', ['productDetail'])), {}, {\n    AssetType: function AssetType() {\n      return this.productDetail.AssetType;\n    },\n    TrustID: function TrustID() {\n      return this.$store.state.productInfo.trustId;\n    }\n  }),\n  methods: {\n    numUnit: function numUnit(num) {\n      var money = num && num != 'ND' ? num.toFixed(2).toString().replace(/(\\d{1,3})(?=(\\d{3})+(?:$|\\.))/g, \"$&,\") : num;\n      return money;\n    },\n    GetPoolArrearsPerformance: function GetPoolArrearsPerformance() {\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.usp_GetPoolArrearsPerformanceByTrustId');\n      svc.AddParam({\n        Name: 'TrustId',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTable().then(function (res) {\n        if (res && res.length) {\n          self.poolArrearsAr = res;\n          self.poolArrearsArL = 500;\n        }\n      });\n    },\n    initFactPayment: function initFactPayment() {\n      var _this = this;\n\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.AssetPoolPayment_Get');\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTable().then(function (res) {\n        if (res.length < 1) {\n          _this.factArL = auto;\n          return;\n        } // for (var i = 0; i < res.length; i++) {\n        //   Object.keys(res[i]).forEach((key) => {\n        //     res[i][key] = Number(res[i][key])\n        //     res[i][key] = res[i][key] ? res[i][key].toLocaleString() : res[i][key]\n        //   })\n        // }\n\n\n        _this.factAr = res;\n        _this.factArL = 500;\n      });\n    },\n    exportExcel: function exportExcel() {\n      /* out-table关联导出的dom节点  */\n      var wb = XLSX.utils.table_to_book(document.querySelector('#out-table'));\n      /* get binary string as output */\n\n      var wbout = XLSX.write(wb, {\n        bookType: 'xlsx',\n        bookSST: true,\n        type: 'array'\n      });\n\n      try {\n        FileSaver.saveAs(new Blob([wbout], {\n          type: 'application/octet-stream'\n        }), '还款记录.xlsx');\n      } catch (e) {\n        if (typeof console !== 'undefined') console.log(e, wbout);\n      }\n\n      return wbout;\n    },\n    exportExcelPayment: function exportExcelPayment() {\n      /* out-table关联导出的dom节点  */\n      var table = document.querySelector(\"#out-tablePayment\").cloneNode(true); // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n\n      table.removeChild(table.querySelector(\".el-table__fixed\"));\n      var wb = XLSX.utils.table_to_book(table, {\n        raw: true\n      });\n      var excName = this.companyReport;\n\n      if (this.dataEndDate) {\n        excName += '(' + this.dataEndDate + ')';\n      }\n\n      var wbout = XLSX.write(wb, {\n        bookType: 'xlsx',\n        bookSST: true,\n        type: 'array'\n      });\n\n      try {\n        FileSaver.saveAs(new Blob([wbout], {\n          type: 'application/octet-stream'\n        }), '资产池变更记录.xlsx');\n      } catch (e) {\n        if (typeof console !== 'undefined') console.log(e, wbout);\n      }\n\n      return wbout;\n    },\n    exportExcelRecycle: function exportExcelRecycle() {\n      /* out-table关联导出的dom节点  */\n      var table = document.querySelector(\"#out-tableRecycle\").cloneNode(true); // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n\n      table.removeChild(table.querySelector(\".el-table__fixed\"));\n      var wb = XLSX.utils.table_to_book(table, {\n        raw: true\n      });\n      /* get binary string as output */\n\n      var excName = this.companyReport;\n\n      if (this.dataEndDate) {\n        excName += '(' + this.dataEndDate + ')';\n      }\n\n      var wbout = XLSX.write(wb, {\n        bookType: 'xlsx',\n        bookSST: true,\n        type: 'array'\n      });\n\n      try {\n        FileSaver.saveAs(new Blob([wbout], {\n          type: 'application/octet-stream'\n        }), '资产池回收记录.xlsx');\n      } catch (e) {\n        if (typeof console !== 'undefined') console.log(e, wbout);\n      }\n\n      return wbout;\n    },\n    exportExcelAssetpool: function exportExcelAssetpool() {\n      /* generate workbook object from table */\n      var table = document.querySelector(\"#out-tableAssetpool\").cloneNode(true); // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n\n      table.removeChild(table.querySelector(\".el-table__fixed\"));\n      var wb = XLSX.utils.table_to_book(table, {\n        raw: true\n      });\n      /* get binary string as output */\n\n      var excName = this.companyReport;\n\n      if (this.dataEndDate) {\n        excName += '(' + this.dataEndDate + ')';\n      }\n\n      var wbout = XLSX.write(wb, {\n        bookType: \"xlsx\",\n        bookSST: true,\n        type: \"array\"\n      });\n\n      try {\n        FileSaver.saveAs(new Blob([wbout], {\n          type: \"application/octet-stream\"\n        }), \"资产池表现情况.xlsx\");\n      } catch (e) {\n        if (typeof console !== \"undefined\") console.log(e, wbout);\n      }\n\n      return wbout;\n    },\n    exportExcelAssetpoolNPL: function exportExcelAssetpoolNPL() {\n      /* generate workbook object from table */\n      var table = document.querySelector(\"#out-tableAssetpoolNPL\").cloneNode(true); // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n\n      table.removeChild(table.querySelector(\".el-table__fixed\"));\n      var wb = XLSX.utils.table_to_book(table, {\n        raw: true\n      });\n      /* get binary string as output */\n\n      var excName = this.companyReport;\n\n      if (this.dataEndDate) {\n        excName += '(' + this.dataEndDate + ')';\n      }\n\n      var wbout = XLSX.write(wb, {\n        bookType: \"xlsx\",\n        bookSST: true,\n        type: \"array\"\n      });\n\n      try {\n        FileSaver.saveAs(new Blob([wbout], {\n          type: \"application/octet-stream\"\n        }), \"资产池表现情况.xlsx\");\n      } catch (e) {\n        if (typeof console !== \"undefined\") console.log(e, wbout);\n      }\n\n      return wbout;\n    },\n    initPoolChangeStatistics: function initPoolChangeStatistics() {\n      var _this2 = this;\n\n      var svc = this.$http('PortfolioManagement', 'DV.AssetPoolChangeStatistics');\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: this.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTable().then(function (res) {\n        if (res && res.length) {\n          _this2.changeAr = res;\n          _this2.changeArL = 500;\n          _this2.changeAr2 = res.filter(function (item) {\n            return item.PaymentPeriodID !== 0;\n          });\n\n          if (_this2.changeAr2 && _this2.changeAr2.length) {\n            _this2.changeAr2L = 500;\n          }\n        }\n      });\n      var svc1 = this.$http('PortfolioManagement', 'DV.usp_GetDisposalStatusByTrustId');\n      svc1.AddParam({\n        Name: 'TrustID',\n        Value: this.TrustID,\n        DBType: 'int'\n      });\n      svc1.ExecTable().then(function (res) {\n        console.log(res);\n      });\n    },\n    stateFormat: function stateFormat(row, column, cellValue) {\n      if (cellValue == null) {\n        return '';\n      } else {\n        cellValue += \"\";\n        if (!cellValue.includes(\".\")) cellValue += \".\";\n        return cellValue.replace(/(\\d)(?=(\\d{3})+\\.)/g, function ($0, $1) {\n          return $1 + \",\";\n        }).replace(/\\.$/, \"\");\n      }\n    },\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (row.PaymentPeriodID == 0) {// return 'hidden-row'\n      }\n    }\n  }\n};",{"version":3,"sources":["FactAssetPoolPayment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"detailPage\">\n    <ItemBox title=\"资产池还款记录\" v-if=\"AssetType != 'NPL'\" >\n      <template slot=\"right\">\n        <el-button  size=\"mini\" type=\"primary\" @click=\"exportExcel\" plain style=\"position: absolute;right: 60px;top: 20px;\"><i class=\"iconfont icon-xiazai1\" style=\"margin-right:5px;\"></i>还款记录导出</el-button>\n        <span class=\"flodText\" @click=\"payment1 = !payment1\">{{!payment1?'展开':'收起'}}</span>\n      </template>\n      <el-table :data=\"factAr\" size=\"mini\" id=\"out-table\" v-show=\"payment1\" :height=\"factArL\">\n        <el-table-column prop=\"PaymentPeriodID\" label=\"期数\" width=100>\n        </el-table-column>\n        <el-table-column prop=\"PrincipalPaid\" label=\"本金帐（元）\" :formatter=\"stateFormat\" min-width=160>\n        </el-table-column>\n        <el-table-column prop=\"InterestPaid\" label=\"利息帐（元）\" :formatter=\"stateFormat\" min-width=160>\n        </el-table-column>\n        <el-table-column prop=\"RevolvingPurchase\" label=\"循环购买金额（元）\" :formatter=\"stateFormat\" min-width=160>\n        </el-table-column>\n        <!-- <el-table-column prop=\"CumulativeDefault\" label=\"累计违约\" min-width=140>\n        </el-table-column>\n        <el-table-column prop=\"CumulativeLoss\" label=\"累计损失金额\" min-width=160>\n        </el-table-column> -->\n        <el-table-column prop=\"OpeningBalance\" label=\"期初金额（元）\" :formatter=\"stateFormat\" min-width=160>\n        </el-table-column>\n      </el-table>\n    </ItemBox>\n    <ItemBox title=\"资产池变更记录\" v-if=\"AssetType != 'NPL'\">\n      <template slot=\"right\">\n        <el-button  size=\"mini\" type=\"primary\" @click=\"exportExcelPayment\" plain style=\"position: absolute;right: 60px;\"><i class=\"iconfont icon-xiazai1\" style=\"margin-right:5px;\"></i>变更记录导出</el-button>\n        <span class=\"flodText\" @click=\"payment2 = !payment2\">{{!payment2?'展开':'收起'}}</span>\n      </template>\n      <el-table :data=\"changeAr\" size=\"mini\"  id=\"out-tablePayment\" v-show=\"payment2\" :height=\"changeArL\">\n        <el-table-column prop=\"PaymentPeriodID\" label=\"期数\" width=100 fixed>\n\t\t\t\t\t<template slot=\"header\">\n\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"light\" placement=\"bottom\">\n\t\t\t\t\t\t\t<div slot=\"content\">第0期为初始资产池</div>\n\t\t\t\t\t\t\t<span>期数<i class=\"el-icon-warning\" style=\"margin-left:5px;color:#377aff\"></i></span>\n\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t</template>\n        </el-table-column>\n        <el-table-column prop=\"TotalBalance\" label=\"未偿本金余额(元)\" :formatter=\"stateFormat\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"LoanCount\" label=\"总笔数(笔)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"CustomerCount\" label=\"总户数(户)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"MaxLoanBalance\" label=\"最高本金余额(元)\" :formatter=\"stateFormat\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"AverageLoanBalance\" label=\"平均本金余额(元)\" :formatter=\"stateFormat\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"WeightedAverageLoanTerm\" label=\"加权平均合同期限(月)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"WeightedAverageRemainingTerm\" label=\"加权平均剩余期限(月)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"WASeasoning\" label=\"加权平均账龄(月)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"MaxRemainingTerm\" label=\"最长剩余期限(月)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"MinRemainingTerm\" label=\"最短剩余期限(月)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"WAInterestRate\" label=\"加权平均利率(%)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"MaxInterestRate\" label=\"最高利率(%)\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"MinInterestRate\" label=\"最低利率(%)\" width=160>\n        </el-table-column>\n      </el-table>\n    </ItemBox>\n    <ItemBox title=\"资产池回收记录\" v-if=\"AssetType != 'NPL'\">\n      <template slot=\"right\">\n      <el-button  size=\"mini\" type=\"primary\" @click=\"exportExcelRecycle\" plain style=\"position: absolute;right: 60px;\"><i class=\"iconfont icon-xiazai1\" style=\"margin-right:5px;\"></i>回收记录导出</el-button>\n      <span class=\"flodText\" @click=\"payment3 = !payment3\">{{!payment3?'展开':'收起'}}</span>\n      </template>\n      <el-table :data=\"changeAr2\" id=\"out-tableRecycle\" size=\"mini\":height=\"changeAr2L\"  :row-class-name=\"tableRowClassName\"  v-show=\"payment3\" style=\"width:100%;\">\n        \n        <el-table-column prop=\"PaymentPeriodID\" label=\"期数\" width=100 fixed>\n        </el-table-column>\n        <el-table-column prop=\"Principal_Normal\" label=\"正常回收本金（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_Normal\" label=\"正常回收利息（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Principal_Prepayment\" label=\"提前偿还本金（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_Prepayment\" label=\"提前偿还利息（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Principal_ArrearsRecovery\" label=\"拖欠回收本金（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_ArrearsRecovery\" label=\"拖欠回收利息（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Principal_DefaultRecovery\" label=\"违约回收本金（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_DefaultRecovery\" label=\"违约回收利息（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Principal_BuyBack\" label=\"资产赎回本金（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_BuyBack\" label=\"资产赎回利息（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Principal_Clearance\" label=\"清仓回购本金（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_Clearance\" label=\"清仓回购利息（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_Investment\" label=\"合格投资（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Principal_PreviousBalance\" label=\"上期转存利息（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"Interest_PreviousBalance\" label=\"上期转存本金（元）\" width=160>\n        </el-table-column>\n      </el-table>\n    </ItemBox>\n    <ItemBox title=\"资产池表现情况\" v-if=\"AssetType != 'NPL'\">\n      <template slot=\"right\">\n         <el-button  size=\"mini\" type=\"primary\" @click=\"exportExcelAssetpool\" plain style=\"position: absolute;right: 60px;\"><i class=\"iconfont icon-xiazai1\" style=\"margin-right:5px;\"></i>表现情况导出</el-button>\n        <span class=\"flodText\" @click=\"payment4 = !payment4\">{{!payment4?'展开':'收起'}}</span>\n      </template>\n      <el-table :data=\"changeAr2\"  id=\"out-tableAssetpool\" size=\"mini\" :row-class-name=\"tableRowClassName\" :height=\"changeAr2L\"  v-show=\"payment4\">\n        <el-table-column prop=\"PaymentPeriodID\" label=\"期数\" width=100 fixed>\n        </el-table-column>\n        <el-table-column prop=\"正常\" label=\"正常（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"逾期1-30\" label=\"逾期1-30天（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"逾期31-60\" label=\"逾期31-60天（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"逾期61-90\" label=\"逾期61-90天（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"逾期90以上\" label=\"逾期90天以上（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"回购违约资产\" label=\"回购违约资产（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"CurrentPeriodDefault\" label=\"当期违约（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"CurrentPeriodArrears\" label=\"当期新增逾期（元）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"CumulativeDefaultRate\" label=\"累计违约率（%）\" width=160>\n        </el-table-column>\n        <el-table-column prop=\"CumulativeDefaultAmount\" label=\"累计违约金额（元）\" width=160>\n        </el-table-column>\n      </el-table>\n    </ItemBox>\n    <ItemBox title=\"资产池表现情况\" v-if=\"AssetType == 'NPL'\">\n      <template slot=\"right\">\n         <el-button  size=\"mini\" type=\"primary\" @click=\"exportExcelAssetpoolNPL\" plain style=\"position: absolute;right: 60px;\"><i class=\"iconfont icon-xiazai1\" style=\"margin-right:5px;\"></i>表现情况导出</el-button>\n        <span class=\"flodText\" @click=\"payment4 = !payment4\">{{!payment4?'展开':'收起'}}</span>\n      </template>\n      <el-table :data=\"poolArrearsAr\"  id=\"out-tableAssetpoolNPL\"  size=\"mini\" v-show=\"payment4\" :height=\"poolArrearsArL\">\n        <el-table-column prop=\"PaymentPeriod\" label=\"期数\" min-width=60 fixed>\n        </el-table-column>\n        <el-table-column prop=\"Bucket\" label=\"科目\" min-width=160>\n        </el-table-column>\n        <el-table-column prop=\"LoanCount\" label=\"户数\" width=130>\n        </el-table-column>\n        <el-table-column prop=\"AssetDebtCount\" label=\"标的资产债权笔数\" min-width=160>\n        </el-table-column>\n        <el-table-column prop=\"AssetDebtAmount\" :formatter=\"stateFormat\" label=\"标的资产债权本息余额\" min-width=160>\n          <template slot-scope=\"scope\">\n            <span>{{numUnit(scope.row.AssetDebtAmount)}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"RedemptionDebtCount\" :formatter=\"stateFormat\" label=\"赎回的资产债权笔数\" min-width=160>\n        </el-table-column>\n        <el-table-column prop=\"RedemptionDebtAmount\" :formatter=\"stateFormat\" label=\"赎回的资产债权金额\" min-width=160>\n          <template slot-scope=\"scope\">\n            <span>{{numUnit(scope.row.RedemptionDebtAmount)}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"DebtPercentage\" label=\"赎回的资产债权占比（%）\" min-width=160>\n        </el-table-column>\n      </el-table>\n    </ItemBox>\n  </div>\n</template>\n\n<script>\n  import advFilter from '@/components/common/AdvanceFilter.vue'\n  import dataGrid from '@/components/common/DataGrid.vue';\n  import dynamicTab from '@/mixins/dynamicTab.js';\n  import FileSaver from 'file-saver';\n  import ItemBox from '@/components/layout/ItemBox.vue';\n  import XLSX from 'xlsx';\n  import {mapState, mapMutations} from 'vuex';\n  import {\n    addClass,\n    removeClass,\n    hasClass\n  } from '@/utils/dom.js'\n  export default {\n    data() {\n      return {\n        factAr: [],\n\t\t\t\tchangeAr: [],\n        changeAr2: [],\n\t\t\t\tpoolArrearsAr: [],\n        payment1:true,\n        payment2:true,\n        payment3:true,\n        payment4:true,\n        factArL:'auto',\n        changeArL:'auto',\n        changeAr2L:'auto',\n        poolArrearsArL:'auto'\n      }\n    },\n    created() {\n      if (this.AssetType == 'NPL') {\n        this.GetPoolArrearsPerformance()\n      }else{\n        this.initFactPayment();\n        this.initPoolChangeStatistics();\n      }\n    },\n    watch: {\n      AssetType(v) {\n        if (v == 'NPL') {\n          this.GetPoolArrearsPerformance()\n        }else{\n          this.initFactPayment();\n          this.initPoolChangeStatistics();\n        }\n      }\n    },\n    components:{\n      ItemBox\n    },\n    computed: {\n      ...mapState('productInfo',['productDetail']),\n      AssetType() {\n        return this.productDetail.AssetType\n      },\n      TrustID() {\n        return this.$store.state.productInfo.trustId;\n      }\n    },\n    methods: {\n      numUnit(num){\n        let money = num && num != 'ND'?num.toFixed(2).toString().replace(/(\\d{1,3})(?=(\\d{3})+(?:$|\\.))/g, \"$&,\"):num\n        return money;\n      },\n      GetPoolArrearsPerformance(){\n        let self = this;\n        let svc = this.$http('PortfolioManagement', 'DV.usp_GetPoolArrearsPerformanceByTrustId');\n        svc.AddParam({\n          Name: 'TrustId',\n          Value: self.TrustID,\n          DBType: 'int'\n        });\n        svc.ExecTable().then(res => {\n          if (res && res.length) {\n            self.poolArrearsAr = res\n            self.poolArrearsArL = 500\n          }\n          \n        })\n      },\n      initFactPayment() {\n        var self = this;\n        var svc = this.$http('PortfolioManagement', 'DV.AssetPoolPayment_Get');\n        svc.AddParam({\n          Name: 'TrustID',\n          Value: self.TrustID,\n          DBType: 'int'\n        });\n        svc.ExecTable().then(res => {\n          if (res.length < 1) {\n            this.factArL = auto\n            return\n          }\n          // for (var i = 0; i < res.length; i++) {\n          //   Object.keys(res[i]).forEach((key) => {\n          //     res[i][key] = Number(res[i][key])\n          //     res[i][key] = res[i][key] ? res[i][key].toLocaleString() : res[i][key]\n          //   })\n\n          // }\n          this.factAr = res\n          this.factArL = 500\n        })\n      },\n       exportExcel () {\n         /* out-table关联导出的dom节点  */\n         var wb = XLSX.utils.table_to_book(document.querySelector('#out-table'))\n         /* get binary string as output */\n         var wbout = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'array' })\n         try {\n             FileSaver.saveAs(new Blob([wbout], { type: 'application/octet-stream' }), '还款记录.xlsx')\n         } catch (e) { if (typeof console !== 'undefined') console.log(e, wbout) }\n         return wbout\n      },\n      exportExcelPayment() {\n          /* out-table关联导出的dom节点  */\n            let table = document.querySelector(\"#out-tablePayment\").cloneNode(true);\n            // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n            table.removeChild(table.querySelector(\".el-table__fixed\"))\n            let wb = XLSX.utils.table_to_book(table,{raw:true});\n            let excName = this.companyReport;\n            if (this.dataEndDate) {\n              excName += '('+this.dataEndDate+')'\n            }\n         var wbout = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'array' })\n         try {\n             FileSaver.saveAs(new Blob([wbout], { type: 'application/octet-stream' }), '资产池变更记录.xlsx')\n         } catch (e) { if (typeof console !== 'undefined') console.log(e, wbout) }\n         return wbout\n      },\n      exportExcelRecycle() {\n         /* out-table关联导出的dom节点  */\n            let table = document.querySelector(\"#out-tableRecycle\").cloneNode(true);\n            // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n            table.removeChild(table.querySelector(\".el-table__fixed\"))\n            let wb = XLSX.utils.table_to_book(table,{raw:true});\n            /* get binary string as output */\n            let excName = this.companyReport;\n            if (this.dataEndDate) {\n              excName += '('+this.dataEndDate+')'\n            }\n         var wbout = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'array' })\n         try {\n             FileSaver.saveAs(new Blob([wbout], { type: 'application/octet-stream' }), '资产池回收记录.xlsx')\n         } catch (e) { if (typeof console !== 'undefined') console.log(e, wbout) }\n         return wbout\n      },\n      exportExcelAssetpool() {\n           /* generate workbook object from table */\n            let table = document.querySelector(\"#out-tableAssetpool\").cloneNode(true);\n            // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n            table.removeChild(table.querySelector(\".el-table__fixed\"))\n            let wb = XLSX.utils.table_to_book(table,{raw:true});\n            /* get binary string as output */\n            let excName = this.companyReport;\n            if (this.dataEndDate) {\n              excName += '('+this.dataEndDate+')'\n            }\n            let wbout = XLSX.write(wb, {\n              bookType: \"xlsx\",\n              bookSST: true,\n              type: \"array\",\n            });\n            try {\n              FileSaver.saveAs(\n                new Blob([wbout], { type: \"application/octet-stream\" }),\n                \"资产池表现情况.xlsx\"\n              );\n            } catch (e) {\n              if (typeof console !== \"undefined\") console.log(e, wbout);\n            }\n            return wbout;\n      },\n      exportExcelAssetpoolNPL() {\n           /* generate workbook object from table */\n            let table = document.querySelector(\"#out-tableAssetpoolNPL\").cloneNode(true);\n            // 因为element-ui的表格的fixed属性导致多出一个table，会下载重复内容，这里删除掉\n            table.removeChild(table.querySelector(\".el-table__fixed\"))\n            let wb = XLSX.utils.table_to_book(table,{raw:true});\n            /* get binary string as output */\n            let excName = this.companyReport;\n            if (this.dataEndDate) {\n              excName += '('+this.dataEndDate+')'\n            }\n            let wbout = XLSX.write(wb, {\n              bookType: \"xlsx\",\n              bookSST: true,\n              type: \"array\",\n            });\n            try {\n              FileSaver.saveAs(\n                new Blob([wbout], { type: \"application/octet-stream\" }),\n                \"资产池表现情况.xlsx\"\n              );\n            } catch (e) {\n              if (typeof console !== \"undefined\") console.log(e, wbout);\n            }\n            return wbout;\n      },\n\t\t\tinitPoolChangeStatistics() {\n        var svc = this.$http('PortfolioManagement', 'DV.AssetPoolChangeStatistics');\n        svc.AddParam({\n          Name: 'TrustID',\n          Value: this.TrustID,\n          DBType: 'int'\n        });\n\t\t\t\tsvc.ExecTable().then(res => {\n          if (res && res.length) {\n            this.changeAr = res\n            this.changeArL = 500\n            this.changeAr2 = res.filter((item) => {\n              return item.PaymentPeriodID !== 0\n            });\n            if (this.changeAr2 && this.changeAr2.length) {\n              this.changeAr2L = 500\n            }\n          }\n\t\t\t\t});\n\n        var svc1 = this.$http('PortfolioManagement', 'DV.usp_GetDisposalStatusByTrustId');\n        svc1.AddParam({\n          Name: 'TrustID',\n          Value: this.TrustID,\n          DBType: 'int'\n        });\n        svc1.ExecTable().then(res => {\n          console.log(res)\n        });\n      },\n      stateFormat(row, column, cellValue) {\n        if(cellValue == null){\n          return ''\n        }else{\n          cellValue += \"\";\n          if (!cellValue.includes(\".\")) cellValue += \".\";\n          return cellValue\n            .replace(/(\\d)(?=(\\d{3})+\\.)/g, function($0, $1) {\n              return $1 + \",\";\n            })\n            .replace(/\\.$/, \"\");\n        }\n      },\n      tableRowClassName({row, rowIndex}){\n        if(row.PaymentPeriodID==0){\n          // return 'hidden-row'\n        }\n      }\n    }\n  }\n\n</script>\n<style>\n.hidden-row{\n  display: none;\n}\n.flodText{\n  font-size: 13px;\n  cursor: pointer;\n  color: $--color-primary;\n}\n</style>\n"],"sourceRoot":"src/views/product"}]}