{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\PaymentHistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\PaymentHistory.vue","mtime":1604281047867},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Highcharts from 'highcharts';\nimport ItemBox from '@/components/layout/ItemBox.vue';\nimport { mapState, mapMutations } from 'vuex';\nimport utils from '@/utils/index';\nvar o = null;\nexport default {\n  data: function data() {\n    return {\n      allot: [],\n      allotUpdate: [],\n      payment: [],\n      period: '',\n      paymentShow: true,\n      allotShow: true,\n      chartDestAr: [],\n      outPayment: [],\n      monetaryUnit: 0,\n      allotSelect: '-1',\n      bondEach: [],\n      showChart: false\n    };\n  },\n  components: {\n    ItemBox: ItemBox\n  },\n  created: function created() {\n    this.initAllot();\n\n    if (this.AssetType == 'NPL') {\n      this.initOutPayment();\n    } else {\n      this.initPayment();\n    }\n  },\n  computed: _objectSpread(_objectSpread({}, mapState('productInfo', ['productDetail'])), {}, {\n    TrustID: function TrustID() {\n      return this.$store.state.productInfo.trustId;\n    },\n    AssetType: function AssetType() {\n      return this.productDetail.AssetType;\n    },\n    AssetTypeB: function AssetTypeB() {\n      if (this.AssetType == 'NPL') {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }),\n  watch: {\n    AssetType: function AssetType(v) {\n      if (v == 'NPL') {\n        this.initOutPayment();\n      } else {\n        this.initPayment();\n      }\n    }\n  },\n  methods: {\n    openChart: function openChart() {\n      var _this = this;\n\n      this.showChart = true;\n\n      if (this.$_tempChart) {\n        this.$_tempChart.destroy();\n      }\n\n      this.$nextTick(function () {\n        _this.$_tempChart = Highcharts.chart('dialogChart', o);\n      });\n    },\n    numUnit: function numUnit(num) {\n      if (num == '0.00') {\n        return 0;\n      }\n\n      var money = num && num != 'ND' ? (num * (this.monetaryUnit ? 0.0001 : 1)).toFixed(2).toString().replace(/(\\d{1,3})(?=(\\d{3})+(?:$|\\.))/g, \"$&,\") : num;\n      return money;\n    },\n    unitSwitch: function unitSwitch(unit) {\n      this.monetaryUnit = unit;\n    },\n    allotChange: function allotChange() {\n      console.log(this.allotSelect);\n\n      if (this.allotSelect == '-1') {\n        this.allotUpdate = this.allot;\n      } else if (String(this.allotSelect).indexOf('each') > -1) {\n        var id = this.allotSelect.split('each')[0];\n        this.allotUpdate = this.bondEach.filter(function (item) {\n          return item.TrustBondId == id;\n        });\n      } else {\n        for (var i = 0; i < this.chartDestAr.length; i++) {\n          if (this.allotSelect == this.chartDestAr[i].TrustBondID) {\n            this.allotUpdate = this.chartDestAr[i].dataTable;\n          }\n        }\n      }\n    },\n    flodFun: function flodFun(name) {\n      if (name == 'allot') {\n        this.allotShow = !this.allotShow;\n      } else if (name == 'payment') {\n        this.paymentShow = !this.paymentShow;\n      }\n    },\n    chartDestArFun: function chartDestArFun(res) {\n      var self = this;\n      var map = {},\n          dest = [];\n\n      for (var i = 0; i < res.length; i++) {\n        var ai = res[i];\n        ai.date = ai.PaymentDate ? ai.PaymentDate.S2Date() : ai.PaymentDate;\n        ai.key = i + 1;\n\n        if (!map[ai.TrustBondID]) {\n          dest.push([{\n            Interest: ai.Interest,\n            InterestLeftOver: ai.InterestLeftOver,\n            Principal: ai.Principal,\n            RemainingBalance: ai.RemainingBalance,\n            RemainingBalances: ai.RemainingBalances,\n            ShortName: ai.ShortName,\n            TrustBondID: ai.TrustBondID,\n            TrustPeriod: ai.TrustPeriod,\n            date: ai.date,\n            key: ai.key\n          }]);\n          map[ai.TrustBondID] = ai;\n        } else {\n          for (var j = 0; j < dest.length; j++) {\n            var dj = dest[j];\n\n            if (dj[0].TrustBondID == ai.TrustBondID) {\n              dj.push(ai);\n              break;\n            }\n          }\n        }\n      }\n\n      console.log(dest);\n      var charAr = [];\n      var categoriesX = [];\n\n      for (var i = 0; i < dest.length; i++) {\n        charAr.push({\n          name: dest[i][0].ShortName,\n          TrustBondID: dest[i][0].TrustBondID,\n          data: [],\n          dataTable: []\n        });\n\n        for (var a = 0; a < dest[i].length; a++) {\n          charAr[i].data.push(parseFloat((dest[i][a].RemainingBalances / 10000).toFixed(4)));\n          charAr[i].dataTable.push(dest[i][a]);\n\n          if (i == dest.length - 1) {\n            categoriesX.push(a + 1 + '期');\n          }\n        }\n      }\n\n      self.chartDestAr = charAr;\n      categoriesX = dest[dest.length - 1] ? dest[dest.length - 1].map(function (v) {\n        return v.TrustPeriod + '期';\n      }) : [];\n      self.highChartFun(categoriesX, charAr);\n    },\n    initOutPayment: function initOutPayment() {\n      var _this2 = this;\n\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.usp_GetPoolCashOutflowByTrustId');\n      svc.AddParam({\n        Name: 'TrustId',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTable().then(function (res) {\n        _this2.outPayment = res;\n      });\n    },\n    initPayment: function initPayment() {\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.FeeStructure_Get');\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTable().then(function (res) {\n        for (var i = 0; i < res.length; i++) {\n          Object.keys(res[i]).forEach(function (key) {\n            if (key != 'ReceivingDays' && key != 'PaymentDays' && key != 'Period') {\n              res[i][key] = res[i][key] ? res[i][key].toLocaleString() : res[i][key];\n            }\n          });\n        }\n\n        self.payment = res;\n      });\n    },\n    initAllot: function initAllot() {\n      var _this3 = this;\n\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.FactBondPayment_Get');\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTables().then(function (ress) {\n        if (!ress.length) {\n          return;\n        }\n\n        for (var a = 0; a < ress.length; a++) {\n          for (var i = 0; i < ress[a].length; i++) {\n            ress[a][i].RemainingBalances = ress[a][i].RemainingBalance;\n            ress[a][i].RemainingBalance = utils.formatCurrency(ress[a][i].RemainingBalance);\n            ress[a][i].Principal = utils.formatCurrency(ress[a][i].Principal);\n            ress[a][i].InterestLeftOver = utils.formatCurrency(ress[a][i].InterestLeftOver);\n            ress[a][i].Interest = utils.formatCurrency(ress[a][i].Interest);\n\n            if (a == 1) {\n              ress[a][i].date = ress[a][i].PaymentDate ? ress[a][i].PaymentDate.S2Date() : ress[a][i].PaymentDate;\n              ress[a][i].TrustPeriod = ress[a][i].PaymentPeriod;\n            }\n          }\n        }\n\n        _this3.bondEach = ress[1];\n        var res = ress[0];\n        self.chartDestArFun(res);\n        var map = {},\n            dest = [];\n\n        for (var i = 0; i < res.length; i++) {\n          var ai = res[i];\n          ai.date = ai.PaymentDate ? ai.PaymentDate.S2Date() : ai.PaymentDate;\n          ai.key = i + 1;\n          if (ai.TrustPeriod < 0) continue;\n\n          if (!map[ai.TrustPeriod]) {\n            dest.push([{\n              Interest: ai.Interest,\n              InterestLeftOver: ai.InterestLeftOver,\n              Principal: ai.Principal,\n              RemainingBalance: ai.RemainingBalance,\n              ShortName: ai.ShortName,\n              TrustBondID: ai.TrustBondID,\n              TrustPeriod: ai.TrustPeriod,\n              date: ai.date,\n              key: ai.key\n            }]);\n            map[ai.TrustPeriod] = ai;\n          } else {\n            for (var j = 0; j < dest.length; j++) {\n              var dj = dest[j];\n\n              if (dj[0].TrustPeriod == ai.TrustPeriod) {\n                dj.push(ai);\n                break;\n              }\n            }\n          }\n        }\n\n        if (dest.length > 0) {\n          self.period = dest[0][0].TrustPeriod;\n        } else {\n          self.period = '';\n        }\n\n        var levelAr = [];\n\n        for (var i = 0; i < dest.length; i++) {\n          dest[i][0].children = [];\n          levelAr.push(dest[i][0]);\n        }\n\n        for (var i = 0; i < levelAr.length; i++) {\n          levelAr[i].children = dest[i].slice(1);\n        }\n\n        self.allot = levelAr;\n        self.allotUpdate = levelAr;\n        console.log(levelAr); // highChart数据\n      });\n    },\n    stateFormat: function stateFormat(row, column, cellValue) {\n      if (cellValue == null) {\n        return '';\n      } else {\n        cellValue += \"\";\n        if (!cellValue.includes(\".\")) cellValue += \".\";\n        return cellValue.replace(/(\\d)(?=(\\d{3})+\\.)/g, function ($0, $1) {\n          return $1 + \",\";\n        }).replace(/\\.$/, \"\");\n      }\n    },\n    highChartFun: function highChartFun(categoriesX, data) {\n      o = {\n        chart: {\n          type: 'spline'\n        },\n        title: {\n          text: ''\n        },\n        subtitle: {\n          text: ''\n        },\n        yAxis: {\n          title: {\n            text: '期末余额（万元）'\n          },\n          labels: {\n            format: '{value:.,0f}'\n          }\n        },\n        xAxis: {\n          categories: categoriesX\n        },\n        exporting: {\n          enabled: false\n        },\n        //隐藏导出图片\n        credits: {\n          enabled: false\n        },\n        //隐藏highcharts的站点标志\n        plotOptions: {// series: {\n          //   label: {\n          //     connectorAllowed: false\n          //   },\n          //   pointStart: 2010\n          // }\n        },\n        tooltip: {\n          // head + 每个 point + footer 拼接成完整的 table\n          headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n          pointFormat: '<tr><td style=\"color:{series.color};padding:0\">{series.name}(万元): </td>' + '<td style=\"padding:0\"><b>{point.y}</b></td></tr>',\n          footerFormat: '</table>',\n          //shared: true,\n          useHTML: true\n        },\n        series: data\n      };\n      Highcharts.chart('containerChart', o);\n      Highcharts.setOptions({\n        lang: {\n          thousandsSep: ','\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["PaymentHistory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"detailPage\">\n    <ItemBox title=\"收益分配记录\">\n      <template slot=\"right\">\n        <span class=\"flodText\" @click=\"flodFun('allot')\">{{!allotShow?'展开':'收起'}}</span>\n      </template>\n      <div style=\"display:flex;\" v-show=\"allotShow\">\n        <div class=\"leftTableF\">\n          <span>切换证券显示分配记录：</span>\n          <el-select v-model=\"allotSelect\" placeholder=\"请选择\" @change=\"allotChange\">\n            <el-option key=\"-1\" label=\"全部\" value=\"-1\"/>\n            <el-option\n              v-for=\"item in chartDestAr\"\n              :key=\"item.TrustBondID\"\n              :label=\"item.name\"\n              :value=\"item.TrustBondID\"/>\n              <el-option\n              v-for=\"item in chartDestAr\"\n              :key=\"item.TrustBondID+'0'\"\n              :label=\"item.name+'-每份'\"\n              :value=\"item.TrustBondID+'each'\"/>\n          </el-select>\n        <el-table :data=\"allotUpdate\" row-key=\"key\" height=\"360px\" :key=\"allotSelect\" class=\"syfpjlTable\">\n          <el-table-column prop=\"TrustPeriod\" label=\"期数\" width=\"60\"></el-table-column>\n          <el-table-column prop=\"ShortName\" label=\"债券简称\"></el-table-column>\n          <el-table-column prop=\"Principal\" label=\"本金支付（元）\"></el-table-column>\n          <el-table-column prop=\"Interest\" label=\"利息支付（元）\"></el-table-column>\n          <el-table-column prop=\"RemainingBalance\" label=\"期末余额（元）\"></el-table-column>\n          <el-table-column prop=\"date\" label=\"兑付日期\"></el-table-column>\n          <!-- <el-table-column prop=\"InterestLeftOver\" label=\"顺延至下期利息（元）\" min-width=\"100\"></el-table-column> -->\n        </el-table>\n        </div>\n        <div  class=\"rightChart\" v-show=\"allot.length>0\">\n          <div class=\"fullscreen-button\">\n            <el-button type=\"text\" @click=\"openChart\">图表全屏</el-button>\n          </div>\n          <div id=\"containerChart\"></div>\n        </div>\n      </div>\n      <div v-show=\"!allotShow\" class=\"fold-content-tip\">内容已被隐藏，可点击右上方按钮展开</div>\n    </ItemBox>\n    <ItemBox title=\"费用支付记录\" >\n      <template slot=\"right\">\n        <span class=\"flodText\" @click=\"flodFun('payment')\">{{!paymentShow?'展开':'收起'}}</span>\n      </template>\n      <div v-show=\"paymentShow\">\n        <div class=\"unitSwitch\">切换金额单位：<span @click=\"unitSwitch(0)\" :class=\"!monetaryUnit?'active':''\">元</span> <span class=\"fg\">/</span> <span @click=\"unitSwitch(1)\"  :class=\"monetaryUnit?'active':''\">万元</span></div>\n        <div v-if=\"AssetTypeB\" key=\"type-a\">\n          <el-table :data=\"outPayment\" style=\"width: 100%\"  height=\"360px\">\n            <el-table-column prop=\"PaymentPeriod\" label=\"期数\" width=\"50\"></el-table-column>\n            <el-table-column prop=\"Tax\" :label=\"'税收('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"110\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Tax)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"AgentPayment\" :label=\"'代理兑付费用('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.AgentPayment)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Issuance_fee\" :label=\"'发行费用('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Issuance_fee)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Trustee_Pay\" :label=\"'受托机构报酬('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Trustee_Pay)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"FundCustodian_Pay\" :label=\"'资金保管机构报酬('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"160\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.FundCustodian_Pay)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Disposal_cost\" :label=\"'处置费用('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Disposal_cost)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"LoanService_Pay\" :label=\"'贷款服务机构报酬('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"160\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.LoanService_Pay)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Audit_fees\" :label=\"'审计费('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Audit_fees)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"TrackService_fee\" :label=\"'跟踪评级服务费('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"160\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.TrackService_fee)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Other_expenses\" :label=\"'其他费用支出('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Other_expenses)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Expenses\" :label=\"'费用支出('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Expenses)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Total_Amount\" :label=\"'总计('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Total_Amount)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Total_interest\" :label=\"'证券本金总支出('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"160\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Total_interest)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Total_principal\" :label=\"'证券利息总支出('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"160\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Total_principal)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Secondary_income\" :label=\"'次级档收益('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"130\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Secondary_income)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Secondary_capitalCost\" :label=\"'次级档固定资金成本('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"190\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Secondary_capitalCost)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"Secondary_totalRevenue\" :label=\"'次级档总收益('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.Secondary_totalRevenue)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"SpecialTrust_Benefits\" :label=\"'特别信托收益权特别信托利益('+(monetaryUnit?'万元':'元')+')'\" :formatter=\"stateFormat\" width=\"230\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.SpecialTrust_Benefits)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"RevolvingPurchase\" :label=\"'持续购买资产支出（循环购买金额/'+(monetaryUnit?'万元':'元')+'）'\" :formatter=\"stateFormat\" width=\"210\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.RevolvingPurchase)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"PrincipalBalance\" :label=\"'转存下期本金（结余存入本金账户金额/'+(monetaryUnit?'万元':'元')+'）'\" :formatter=\"stateFormat\" width=\"230\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.PrincipalBalance)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"InterestBalance\" :label=\"'转存下期收入（结余存入利息账户金额/'+(monetaryUnit?'万元':'元')+'）'\" :formatter=\"stateFormat\" width=\"230\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.InterestBalance)}}\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div v-else key=\"type-b\">\n          <el-table :data=\"payment\" style=\"width: 100%\" height=\"360px\">\n            <el-table-column prop=\"PaymentPeriodID\" label=\"期数\" width=\"50\"></el-table-column>\n            <el-table-column prop=\"AssetInterestCollected\" :label=\"'资产池利息收入('+(monetaryUnit?'万元':'元')+')'\" min-width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.AssetInterestCollected)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"TotalInterestCollected\" :label=\"'全部利息回收款('+(monetaryUnit?'万元':'元')+')'\" min-width=\"140\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.TotalInterestCollected)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"TaxFee\" :label=\"'税收('+(monetaryUnit?'万元':'元')+')'\" min-width=\"130\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.TaxFee)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"TotalFee\" :label=\"'费用总支出('+(monetaryUnit?'万元':'元')+')'\" width=\"130\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.TotalFee)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"PaymentDays\" label=\"计息期间(天)\" min-width=\"100\">\n              <template slot-scope=\"scope\">\n                {{scope.row.PaymentDays?Number(scope.row.PaymentDays):scope.row.PaymentDays}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"ReceivingDays\" label=\"收款期间(天)\" min-width=\"100\">\n              <template slot-scope=\"scope\">\n                {{scope.row.ReceivingDays?Number(scope.row.ReceivingDays):scope.row.ReceivingDays}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"AssetOpeningBalance\" :label=\"'期初资产池未还本金('+(monetaryUnit?'万元':'元')+')'\" min-width=\"170\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.AssetOpeningBalance)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"BondOpeningBalance\" :label=\"'证券未还本金('+(monetaryUnit?'万元':'元')+')'\" min-width=\"130\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.BondOpeningBalance)}}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"BondOpeningBalancePriority\" :label=\"'证券未还本金(优先级/'+(monetaryUnit?'万元':'元')+')'\" min-width=\"170\">\n              <template slot-scope=\"scope\">\n                {{numUnit(scope.row.BondOpeningBalancePriority)}}\n              </template>\n            </el-table-column>\n            <!-- <el-table-column prop=\"AssetAmount\" label=\"资产池总规模（元）\" width=\"130\"></el-table-column>\n            <el-table-column prop=\"TotalOfferAmount\" label=\"证券发行总规模（元）\" width=\"130\"></el-table-column> -->\n          </el-table>\n          </div>\n      </div>\n      <div v-show=\"!paymentShow\" class=\"fold-content-tip\">内容已被隐藏，可点击右上方按钮展开</div>\n    </ItemBox>\n    <base-dialog :visible.sync=\"showChart\" title=\"图表\" fullscreen :showFullscreen=\"false\">\n      <div id=\"dialogChart\" style=\"height: 90vh;\"></div>\n    </base-dialog>\n  </div>\n</template>\n\n<script>\n  import Highcharts from 'highcharts';\n  import ItemBox from '@/components/layout/ItemBox.vue';\n  import {mapState, mapMutations} from 'vuex';\r\n  import utils from '@/utils/index';\n  let o = null;\n  export default {\n    data() {\n      return {\n        allot: [],\n        allotUpdate:[],\n        payment: [],\n        period: '',\n        paymentShow:true,\n        allotShow:true,\n        chartDestAr:[],\n        outPayment:[],\n        monetaryUnit:0,\n        allotSelect:'-1',\n        bondEach:[],\n        showChart: false,\n      }\n    },\n    components:{\n      ItemBox\n    },\n    created() {\n      this.initAllot();\n      if (this.AssetType == 'NPL') {\n        this.initOutPayment()\n      }else{\n        this.initPayment()\n      }\n    },\n    computed: {\n      ...mapState('productInfo',['productDetail']),\n      TrustID() {\n        return this.$store.state.productInfo.trustId;\n      },\n      AssetType() {\n        return this.productDetail.AssetType\n      },\n      AssetTypeB() {\n        if (this.AssetType == 'NPL') {\n          return true\n        }else{\n          return false\n        }\n      }\n    },\n    watch: {\n      AssetType(v) {\n        if (v == 'NPL') {\n        this.initOutPayment()\n        }else{\n          this.initPayment()\n        }\n      },\n\n    },\n    methods: {\n      openChart() {\n        this.showChart = true;\n        if(this.$_tempChart) {\n          this.$_tempChart.destroy()\n        }\n        this.$nextTick(() => {\n          this.$_tempChart = Highcharts.chart('dialogChart', o);\n        })\n      },\n      numUnit(num){\n        if (num == '0.00') {\n          return 0;\n        }\n        let money = num && num != 'ND'?(num*(this.monetaryUnit?0.0001:1)).toFixed(2).toString().replace(/(\\d{1,3})(?=(\\d{3})+(?:$|\\.))/g, \"$&,\"):num\n        return money;\n      },\n      unitSwitch(unit) {\n        this.monetaryUnit = unit;\n      },\n      allotChange() {\n        console.log(this.allotSelect)\n        if (this.allotSelect == '-1') {\n          this.allotUpdate = this.allot\n        }else if(String(this.allotSelect).indexOf('each')>-1) {\n          let id = this.allotSelect.split('each')[0];\n          this.allotUpdate = this.bondEach.filter((item) => {\n            return item.TrustBondId == id\n          })\n        }else{\n          for (var i = 0; i < this.chartDestAr.length; i++) {\n            if (this.allotSelect == this.chartDestAr[i].TrustBondID) {\n              this.allotUpdate = this.chartDestAr[i].dataTable\n            }\n          }\n        }\n      },\n      flodFun(name) {\n        if (name == 'allot') {\n          this.allotShow = !this.allotShow\n        }else if(name == 'payment') {\n          this.paymentShow = !this.paymentShow\n        }\n      },\n      chartDestArFun(res) {\n        var self = this;\n        var map = {},dest = [];\n        for (var i = 0; i < res.length; i++) {\n          var ai = res[i];\n          ai.date = ai.PaymentDate?ai.PaymentDate.S2Date():ai.PaymentDate;\n          ai.key = i+1;\n          if (!map[ai.TrustBondID]) {\n            dest.push([{\n              Interest: ai.Interest,\n              InterestLeftOver: ai.InterestLeftOver,\n              Principal: ai.Principal,\n              RemainingBalance: ai.RemainingBalance,\n              RemainingBalances:ai.RemainingBalances,\n              ShortName: ai.ShortName,\n              TrustBondID: ai.TrustBondID,\n              TrustPeriod: ai.TrustPeriod,\n              date:ai.date,\n              key:ai.key\n            }]);\n            map[ai.TrustBondID] = ai;\n          } else {\n            for (var j = 0; j < dest.length; j++) {\n              var dj = dest[j];\n              if (dj[0].TrustBondID == ai.TrustBondID) {\n                dj.push(ai);\n                break;\n              }\n            }\n          }\n        }\n        console.log(dest)\n        var charAr = []\n        var categoriesX = []\n        for (var i = 0; i < dest.length; i++) {\n          charAr.push({\n            name:dest[i][0].ShortName,\n            TrustBondID:dest[i][0].TrustBondID,\n            data:[],\n            dataTable:[]\n          })\n          for (var a = 0; a < dest[i].length; a++) {\n            charAr[i].data.push(parseFloat((dest[i][a].RemainingBalances/10000).toFixed(4)))\n            charAr[i].dataTable.push(dest[i][a])\n            if (i==dest.length-1) {\n              categoriesX.push(a+1+'期')\n            }\n\n          }\n        }\n        self.chartDestAr = charAr;\n        categoriesX = dest[dest.length-1] ? dest[dest.length-1].map(v => v.TrustPeriod+'期') : [];\n        self.highChartFun(categoriesX,charAr)\n      },\n      initOutPayment() {\n        var self = this;\n        var svc = this.$http('PortfolioManagement', 'DV.usp_GetPoolCashOutflowByTrustId');\n        svc.AddParam({\n          Name: 'TrustId',\n          Value: self.TrustID,\n          DBType: 'int'\n        });\n        svc.ExecTable().then(res => {\n          this.outPayment = res\n        })\n      },\n      initPayment() {\n        var self = this;\n        var svc = this.$http('PortfolioManagement', 'DV.FeeStructure_Get');\n        svc.AddParam({\n          Name: 'TrustID',\n          Value: self.TrustID,\n          DBType: 'int'\n        });\n        svc.ExecTable().then(res => {\n          for (var i = 0; i < res.length; i++) {\n            Object.keys(res[i]).forEach((key) => {\n              if (key != 'ReceivingDays' && key != 'PaymentDays' && key != 'Period') {\n                res[i][key] = res[i][key]?res[i][key].toLocaleString():res[i][key]\n              }\n            })\n          }\n          self.payment = res\n\n        })\n      },\n      initAllot() {\n        var self = this;\n        var svc = this.$http('PortfolioManagement', 'DV.FactBondPayment_Get');\n        svc.AddParam({\n          Name: 'TrustID',\n          Value: self.TrustID,\n          DBType: 'int'\n        });\n        svc.ExecTables().then(ress => {\n          if (!ress.length) {\n            return\n          }\n          for (var a = 0; a < ress.length; a++) {\n            for (var i = 0; i < ress[a].length; i++) {\n              ress[a][i].RemainingBalances =  ress[a][i].RemainingBalance\n              ress[a][i].RemainingBalance = utils.formatCurrency(ress[a][i].RemainingBalance)\n              ress[a][i].Principal = utils.formatCurrency(ress[a][i].Principal)\n              ress[a][i].InterestLeftOver = utils.formatCurrency(ress[a][i].InterestLeftOver)\n              ress[a][i].Interest = utils.formatCurrency(ress[a][i].Interest)\n              if (a == 1) {\n                ress[a][i].date = ress[a][i].PaymentDate?ress[a][i].PaymentDate.S2Date():ress[a][i].PaymentDate;\n                ress[a][i].TrustPeriod = ress[a][i].PaymentPeriod\n              }\n            }\n\n          }\n          this.bondEach = ress[1]\n          let res = ress[0]\n          self.chartDestArFun(res)\n          var map = {},dest = [];\n          for (var i = 0; i < res.length; i++) {\n            var ai = res[i];\n            ai.date = ai.PaymentDate?ai.PaymentDate.S2Date():ai.PaymentDate;\n            ai.key = i+1;\n            if(ai.TrustPeriod < 0) continue;\n            if (!map[ai.TrustPeriod]) {\n              dest.push([{\n                Interest: ai.Interest,\n                InterestLeftOver: ai.InterestLeftOver,\n                Principal: ai.Principal,\n                RemainingBalance: ai.RemainingBalance,\n                ShortName: ai.ShortName,\n                TrustBondID: ai.TrustBondID,\n                TrustPeriod: ai.TrustPeriod,\n                date:ai.date,\n                key:ai.key\n              }]);\n              map[ai.TrustPeriod] = ai;\n            } else {\n              for (var j = 0; j < dest.length; j++) {\n                var dj = dest[j];\n                if (dj[0].TrustPeriod == ai.TrustPeriod) {\n                  dj.push(ai);\n                  break;\n                }\n              }\n            }\n          }\n          if (dest.length>0) {\n            self.period = dest[0][0].TrustPeriod\n          }else {\n            self.period = ''\n          }\n          var levelAr = []\n          for (var i = 0; i < dest.length; i++) {\n            dest[i][0].children =[]\n            levelAr.push(dest[i][0])\n          }\n          for (var i = 0; i < levelAr.length; i++) {\n            levelAr[i].children = dest[i].slice(1)\n          }\n          self.allot = levelAr\n          self.allotUpdate = levelAr\n          console.log(levelAr)\n          // highChart数据\n\n\n        })\n      },\n      stateFormat(row, column, cellValue) {\n        if(cellValue == null){\n          return ''\n        }else{\n          cellValue += \"\";\n          if (!cellValue.includes(\".\")) cellValue += \".\";\n          return cellValue\n            .replace(/(\\d)(?=(\\d{3})+\\.)/g, function($0, $1) {\n              return $1 + \",\";\n            })\n            .replace(/\\.$/, \"\");\n        }\n      },\n      highChartFun(categoriesX,data) {\n        o = {\n          chart: {\n            type: 'spline'\n          },\n          title: {\n            text: ''\n          },\n          subtitle: {\n            text: ''\n          },\n          yAxis: {\n            title: {\n              text: '期末余额（万元）'\n            },\n            labels: {\n              format: '{value:.,0f}'\n            }\n          },\n          xAxis: {\n            categories:categoriesX\n          },\n          exporting: { enabled: false },//隐藏导出图片\n          credits: { enabled: false },//隐藏highcharts的站点标志\n          plotOptions: {\n            // series: {\n            //   label: {\n            //     connectorAllowed: false\n            //   },\n            //   pointStart: 2010\n            // }\n          },\n          tooltip: {\n            // head + 每个 point + footer 拼接成完整的 table\n            headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n            pointFormat: '<tr><td style=\"color:{series.color};padding:0\">{series.name}(万元): </td>' +\n            '<td style=\"padding:0\"><b>{point.y}</b></td></tr>',\n            footerFormat: '</table>',\n            //shared: true,\n            useHTML: true\n          },\n          series: data,\n        }\n        Highcharts.chart('containerChart', o);\n        Highcharts.setOptions({\n          lang: {\n            thousandsSep: ','\n          }\n        });\n      }\n    }\n  }\n\n</script>\n\n<style lang=\"scss\" scpoed>\n.flodText{\n  font-size: 13px;\n  cursor: pointer;\n  color: $--color-primary;\n}\n.leftTableF{\n  width: calc(100% - 350px);\n  /deep/ .el-table__body-wrapper{\n    overflow-y: auto;\n  }\n}\n.rightChart{\n  flex:0 0 350px;\n  border-left: 1px solid #f0f0f0;\n  min-height: 260px;\n  padding: 10px 0;\n  margin-left: 10px;\n}\n.el-table.syfpjlTable .cell{\n  padding: 0;\n}\n.fold-content-tip{\n  color: $--color-grey;\n}\n.unitSwitch{\n  font-size: 14px;\n  padding-left: 10px;\n  span{\n    cursor: pointer;\n    &.active{\n      color: #4c5cc9;\n      font-weight: bold;\n      font-size: 14px;\n    }\n    &.fg{\n      color: #c6c6c6;\n      display: inline-block;\n      margin: 0 6px;\n    }\n  }\n}\n.fullscreen-button{\n  text-align: right;\n  padding-right: 10px;\n}\n</style>\n"],"sourceRoot":"src/views/product"}]}