{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\ProductRoadShow.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\ProductRoadShow.vue","mtime":1604281047867},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar CUSTOMER = process.env.VUE_APP_CUSTOMER;\nconsole.log(CUSTOMER);\nimport { mapState, mapMutations } from 'vuex';\nimport utilsIndex from '@/utils/index.js';\nimport fsvc from '@/api/FileService';\nimport ItemBox from '@/components/layout/ItemBox.vue';\nimport iframeLoading from '@/components/common/iframeLoading';\nimport QuillEditor from '@/components/product/QuillEditor.vue';\nimport Dates from './Dates.vue';\nimport SecuritiesInformation from './SecuritiesInformation';\nimport { BasePath } from '@/utils/config.js';\nexport default {\n  name: \"ProductRoadShow\",\n  data: function data() {\n    return {\n      fileData: '',\n      fileName: '',\n      previewImg: '',\n      zoomInS: false,\n      percentage: 0,\n      progressSw: false,\n      tableData: [],\n      editS: false,\n      projectContent: '',\n      structurePicture: '',\n      basicInfo1: [],\n      basicInfo2: [],\n      basicInfo3: [],\n      imgId: '',\n      t1: true,\n      t2: true,\n      t3: true,\n      t4: true,\n      t5: true,\n      readMore: true\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapState('user', ['userName'])), {}, {\n    TrustID: function TrustID() {\n      return this.$store.state.productInfo.trustId;\n    },\n    iframeUrl: function iframeUrl() {\n      return BasePath + 'QuickDeal/simple.html#/StructureDesign/' + this.TrustID + '/viewDateSet?menu=viewDateSet,Layered&editable=false';\n    },\n    iframeUrlSAD: function iframeUrlSAD() {\n      return BasePath + \"QuickDeal/simple.html#/SensitivityAnalysisDefaultRate/\".concat(this.TrustID);\n    },\n    paymentIframeUrl: function paymentIframeUrl() {\n      return BasePath + 'QuickDeal/simple.html#/StructureDesign/' + this.TrustID + '/PaymentSequenceSetting?menu=PaymentSequenceSetting&editable=false';\n    }\n  }),\n  components: {\n    ItemBox: ItemBox,\n    iframeLoading: iframeLoading,\n    QuillEditor: QuillEditor,\n    Dates: Dates,\n    SecuritiesInformation: SecuritiesInformation\n  },\n  created: function created() {\n    this.loadDealStructure();\n    this.getData();\n    this.getEdit();\n  },\n  methods: {\n    getData: function getData() {\n      var _this = this;\n\n      var self = this;\n      var svc = self.$http('PortfolioManagement', 'DV.usp_getPoolDistriBution_simulation');\n      svc.AddParam({\n        Name: \"TrustId\",\n        Value: self.TrustID,\n        DBType: \"int\"\n      });\n      svc.ExecTables().then(function (res) {\n        _this.basicInfo1 = res[0].map(function (item) {\n          item.ItemValue = utilsIndex.numUnit(item.ItemValue);\n          return item;\n        });\n        _this.basicInfo2 = res[1].map(function (item) {\n          item.CountPercentage = utilsIndex.numUnit(item.CountPercentage);\n          return item;\n        });\n        _this.basicInfo3 = res[2].map(function (item) {\n          item.CountPercentage = utilsIndex.numUnit(item.CountPercentage);\n          return item;\n        });\n        _this.tableData = res[3].map(function (item) {\n          item.Amount = utilsIndex.numUnit(item.Amount);\n          item.AmountPercentage = utilsIndex.numUnit(item.AmountPercentage);\n          item.CountPercentage = utilsIndex.numUnit(item.CountPercentage);\n          return item;\n        });\n      });\n    },\n    uploadClick: function uploadClick() {\n      document.getElementById('fileDiv').click();\n    },\n    removePreview: function removePreview() {\n      document.getElementById(\"fileDiv\").value = '';\n      this.fileData = '';\n      this.fileName = '';\n      this.previewImg = '';\n    },\n    fileChange: function fileChange(event) {\n      var file = event.target.files;\n      console.log(file);\n      var fileType = file[0].name.substr(file[0].name.lastIndexOf(\".\"));\n\n      if (fileType != '.jpg' && fileType != '.jpeg' && fileType != '.png') {\n        this.$message.warning(\"请选择jpg,jpeg,png格式的图片！\");\n        return;\n      }\n\n      this.fileData = document.getElementById(\"fileDiv\").files[0];\n      this.fileName = file[0].name;\n      this.previewImg = this.getObjectURL(this.fileData);\n    },\n    getObjectURL: function getObjectURL(file) {\n      var url = null;\n\n      if (window.createObjectURL != undefined) {\n        // basic\n        url = window.createObjectURL(file);\n      } else if (window.URL != undefined) {\n        // mozilla(firefox)\n        url = window.URL.createObjectURL(file);\n      } else if (window.webkitURL != undefined) {\n        // webkit or chrome\n        url = window.webkitURL.createObjectURL(file);\n      }\n\n      return url;\n    },\n    uploadSave: function uploadSave() {\n      var self = this;\n      var postData = document.getElementById(\"fileDiv\").files;\n\n      if (postData.length < 1) {\n        self.$message.error('请选择上传的图片');\n        return;\n      }\n\n      var len = postData.length;\n      var ai = 0;\n      self.percentage = 0;\n      var postDataI = 0;\n      var nbprogress = 0;\n      var postDataName = postData[postDataI].name;\n      var folderName = 'DealViewer\\\\DealStructurePicture\\\\' + self.TrustID;\n\n      var progress = function progress(progressEvt) {\n        self.progressSw = true;\n        nbprogress = progressEvt.loaded / progressEvt.total;\n        self.percentage = parseInt((postDataI + nbprogress) / postData.length * 100);\n      };\n\n      var callback1 = function callback1(fpath) {\n        var filePath = fpath.UploadResult;\n        filePath = filePath.substr(0, filePath.lastIndexOf('\\\\') + 1);\n        console.log(filePath);\n        var fileType = postDataName.substr(postDataName.lastIndexOf(\".\") + 1);\n        var svc = self.$http('PortfolioManagement', 'DV.usp_DealStructurePictureShow_Add');\n        svc.AddParam({\n          Name: \"TrustId\",\n          Value: self.TrustID,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"FilePath\",\n          Value: filePath,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"FileName\",\n          Value: postDataName,\n          DBType: \"string\"\n        }); // svc.AddParam({\n        // \tName: \"UserName\",\n        // \tValue: self.userName,\n        // \tDBType: \"string\"\n        // });\n\n        svc.ExecResult().then(function (res) {\n          self.progressSw = true;\n          self.removePreview(); // self.percentage = parseInt(((postDataI+1)/(postData.length)) * 100)\n\n          setTimeout(function () {\n            self.progressSw = false;\n          }, 500);\n          self.loadDealStructure();\n        });\n      }; // var svc = self.$http('PortfolioManagement', 'DV.[usp_DealStructurePictureShow_Remove]');\n      // svc.AddParam({\n      // \tName: \"TrustID\",\n      // \tValue: self.TrustID,\n      // \tDBType: \"int\"\n      // });\n      // svc.AddParam({\n      // \tName: \"UserName\",\n      // \tValue: self.userName,\n      // \tDBType: \"string\"\n      // });\n      // svc.ExecResult().then(res => {\n      // \tif(isNaN(res)){\n      // \t\tself.$message.error('文件上传发生内部服务错误');\n      // \t}else{\n      // \t\t//删除物理文件\n      // \t\tif (self.structurePicture) {\n      // \t\t\tfsvc.Remove(self.structurePicture,0);\n      // \t\t}\n      // \t\tfsvc.UploadOther(postData[postDataI], postDataName, folderName)(progress, callback1)\n      // \t}\n      // })\n\n\n      fsvc.UploadOther(postData[postDataI], postDataName, folderName)(progress, callback1);\n    },\n    loadDealStructure: function loadDealStructure() {\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.[usp_DealStructurePictureShow_Get]');\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTable().then(function (res) {\n        if (res.length > 0) {\n          var fileSource = res[0].FileFullPath;\n\n          if (fileSource) {\n            fileSource = fileSource.replace(/\\\\/g, \"/\");\n            self.structurePicture = BasePath + 'FileBaseFolder/' + fileSource;\n            self.imgId = res[0].Id;\n          } else {\n            self.imgId = '';\n            self.structurePicture = '';\n          }\n\n          return;\n        }\n\n        self.structurePicture = '';\n        self.imgId = '';\n      });\n    },\n    deleteFile: function deleteFile() {\n      var self = this;\n      var xml = \"\\n\\t    \\t<temp><Id>\".concat(this.imgId, \"</Id></temp>\\n\\t    \");\n      this.$confirm('图片将被删除,是否继续？', '提示', {\n        confirmButtonText: '确定',\n        cancelButttonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var svc = self.$http('PortfolioManagement', 'DV.[usp_DealStructurePictureShow_Remove]');\n        svc.AddParam({\n          Name: \"TrustID\",\n          Value: self.TrustID,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"temp\",\n          Value: xml,\n          DBType: \"xml\"\n        });\n        svc.ExecResult().then(function (res) {\n          if (isNaN(res)) {\n            self.$message.error('文件删除请求发生错误');\n          } else {\n            self.$message.success('文件删除成功'); //删除物理文件\n\n            if (self.structurePicture) {\n              fsvc.Remove(self.structurePicture, 0);\n            }\n\n            self.loadDealStructure();\n          }\n        });\n      }).catch(function () {});\n    },\n    editContent: function editContent(content) {\n      var _this2 = this;\n\n      var self = this;\n      this.editS = false;\n      this.projectContent = content;\n      var svc = self.$http('PortfolioManagement', 'DV.usp_SaveProjectHighLights');\n      svc.AddParam({\n        Name: \"TrustId\",\n        Value: self.TrustID,\n        DBType: \"int\"\n      });\n      svc.AddParam({\n        Name: \"HighLights\",\n        Value: self.projectContent,\n        DBType: \"string\"\n      });\n      svc.ExecTable().then(function (res) {\n        console.log(res);\n\n        _this2.getEdit();\n      });\n    },\n    getEdit: function getEdit() {\n      var _this3 = this;\n\n      var self = this;\n      var svc = self.$http('PortfolioManagement', 'DV.usp_getProjectHighLights');\n      svc.AddParam({\n        Name: \"TrustId\",\n        Value: self.TrustID,\n        DBType: \"int\"\n      });\n      svc.ExecTable().then(function (res) {\n        console.log(res);\n\n        if (res.length) {\n          _this3.projectContent = res[0].HighLights;\n        }\n      });\n    },\n    editRemove: function editRemove() {\n      var self = this;\n      this.$confirm('项目亮点将被删除,是否继续？', '提示', {\n        confirmButtonText: '确定',\n        cancelButttonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var svc = self.$http('PortfolioManagement', 'DV.usp_DeleteProjectHighLights');\n        svc.AddParam({\n          Name: \"TrustId\",\n          Value: self.TrustID,\n          DBType: \"int\"\n        });\n        svc.ExecTable().then(function (res) {\n          self.$message.success('删除成功！');\n          self.projectContent = '';\n        });\n      }).catch(function () {});\n    },\n    closeEdit: function closeEdit() {\n      this.editS = false;\n    }\n  }\n};",{"version":3,"sources":["ProductRoadShow.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"productRoadShow detailPage\">\r\n\t\t<ItemBox title=\"项目简介\">\r\n\t\t\t<div class=\"box\">\r\n\t\t\t\t<div class=\"title\">项目要素概览<a href=\"javascript:;\" class=\"fr\" @click=\"t1 = !t1\">展开/收起</a></div>\r\n\t\t\t\t<div class=\"content\" v-show=\"t1\">\r\n\t\t\t\t\t<!-- <iframeLoading :iframeUrl=\"iframeUrl\"></iframeLoading> -->\n          <SecuritiesInformation></SecuritiesInformation>\n          <Dates></Dates>\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"box\">\r\n        <div class=\"title\">交易参与方<a href=\"javascript:;\" class=\"fr\" @click=\"t2 = !t2\">展开/收起</a></div>\r\n\t\t\t\t<div class=\"content\"  v-show=\"t2\" style=\"padding:0 15px 15px 15px;\">\r\n\t\t\t\t\t<div class=\"pictureDiv\" >\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<el-button size=\"mini\" @click=\"uploadSave\" type=\"primary\" :disabled=\"!previewImg \" v-show=\"!structurePicture\">上传图片</el-button>\r\n\t\t\t\t\t\t\t<el-button size=\"mini\" @click=\"deleteFile\" v-show=\"structurePicture\"><i class=\"el-icon-delete\" style=\"margin-right:5px;\"></i>删除图片</el-button>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<img :src=\"structurePicture\" style=\"width:80%;max-width:800px;\"v-show=\"structurePicture\"/>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"upload\"  v-show=\"!structurePicture\">\r\n\t\t\t\t\t\t<div class=\"imgDiv\"v-show=\"previewImg\">\r\n\t\t\t\t\t\t\t<el-image :src=\"previewImg\" v-show=\"previewImg\"></el-image>\r\n\t\t\t\t\t\t\t<div class=\"shade\">\r\n\t\t\t\t\t\t\t\t<i class=\"el-icon-zoom-in\" title=\"放大\" @click=\"zoomInS = true\"></i>\r\n\t\t\t\t\t\t\t\t<i class=\"el-icon-delete\" title=\"删除\" @click=\"removePreview\"></i>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"shade progress\"v-if=\"progressSw\">\r\n\t\t\t\t\t\t\t\t<el-progress type=\"circle\" :percentage=\"percentage\" ></el-progress>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"zoomIn\" v-show=\"zoomInS\">\r\n\t\t\t\t\t\t\t<img :src=\"previewImg\" @click=\"zoomInS = false\" title=\"点击缩小图片\"/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p v-show=\"!previewImg\" style=\"text-align:center;\">\r\n\t\t\t\t\t\t\t<i class=\"el-icon-plus\" @click=\"uploadClick\" title=\"点击选择上传图片\"></i>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<input type=\"file\" id=\"fileDiv\" accept=\".jpeg,.jpg,.png\" @change=\"fileChange\"/>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<img>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"box\">\r\n        <div class=\"title\">基础资产分析-模拟池统计信息<a href=\"javascript:;\" class=\"fr\" @click=\"t3 = !t3\">展开/收起</a></div>\r\n\t\t\t\t<div class=\"content baseContent\"  v-show=\"t3\">\r\n\t\t\t\t\t<div class=\"base\">\r\n\t\t\t\t  \t<template v-if=\"basicInfo1 && basicInfo1.length\">\r\n\t\t\t\t\t  \t<span class=\"titles\">{{basicInfo1[0].TitleName}}</span>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li v-for=\"item in basicInfo1\"><span class=\"left\">{{item.ItemName}}</span><span class=\"right\">{{item.ItemValue}}{{item.ItemCode == \"WeightedAverageCurrentInterest\"?'%':''}}</span></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t  \t</template>\r\n\t\t\t\t  \t<template v-if=\"basicInfo2 && basicInfo2.length\">\r\n\t\t\t\t\t  \t<span class=\"titles\">{{basicInfo2[0].TitleName}}</span>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li v-for=\"item in basicInfo2\"><span class=\"left\">{{item.Bucket}}借款笔数占比</span><span class=\"right\">{{item.CountPercentage}}%</span></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-if=\"basicInfo3 && basicInfo3.length\">\r\n\t\t\t\t\t\t\t<span class=\"titles\">{{basicInfo3[0].TitleName}}</span>\r\n\t\t\t\t\t  \t<ul>\r\n\t\t\t\t\t\t\t\t<li v-for=\"item in basicInfo3\"><span class=\"left\">{{item.Bucket}}人群占比</span><span class=\"right\">{{item.CountPercentage}}%</span></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"table\" v-if=\"tableData && tableData.length\">\r\n\t\t\t\t\t\t<span class=\"titles\">{{tableData[0].TitleName}}</span>\r\n\t\t\t\t\t\t<el-table :data=\"tableData\" style=\"width:100%;\" max-height=\"310\">\r\n\t\t\t\t      <el-table-column\r\n\t\t\t\t        prop=\"Bucket\"\r\n\t\t\t\t        label=\"地区\"\r\n\t\t\t\t        >\r\n\t\t\t\t      </el-table-column>\r\n\t\t\t\t      <el-table-column\r\n\t\t\t\t        prop=\"Amount\"\r\n\t\t\t\t        label=\"贷款本金余额（元）\"\r\n\t\t\t\t        >\r\n\t\t\t\t      </el-table-column>\r\n\t\t\t\t      <el-table-column\r\n\t\t\t\t        prop=\"AmountPercentage\"\r\n\t\t\t\t        label=\"本金余额占比\">\r\n\t\t\t\t        <template slot-scope=\"{row}\">\r\n\t\t\t\t        \t{{row.AmountPercentage}}%\r\n\t\t\t\t        </template>\r\n\t\t\t\t      </el-table-column>\r\n\t\t\t\t      <el-table-column\r\n\t\t\t\t        prop=\"Count\"\r\n\t\t\t\t        label=\"借款人数\">\r\n\t\t\t\t      </el-table-column>\r\n\t\t\t\t      <el-table-column\r\n\t\t\t\t        prop=\"CountPercentage\"\r\n\t\t\t\t        label=\"借款占比\">\r\n\t\t\t\t        <template slot-scope=\"{row}\">\r\n\t\t\t\t        \t{{row.CountPercentage}}%\r\n\t\t\t\t        </template>\r\n\t\t\t\t      </el-table-column>\r\n\t\t\t\t    </el-table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n<!-- \t\t\t<div class=\"box\">\r\n        <div class=\"title\">现金流分配顺序<a href=\"javascript:;\" class=\"fr\" @click=\"t4 = !t4\">展开/收起</a></div>\r\n\t\t\t\t<div class=\"content\"  v-show=\"t4\">\r\n\t\t\t\t\t<iframeLoading :iframeUrl=\"paymentIframeUrl\" :loadingNo=\"true\"></iframeLoading>\r\n\t\t\t\t</div>\r\n\t\t\t</div> -->\r\n\t\t</ItemBox>\r\n\t\t<ItemBox title=\"项目亮点\">\r\n\t\t\t<template slot=\"right\">\r\n\t\t\t\t<el-button @click=\"editS = true\" size=\"mini\":disabled=\"editS\"><i :class=\"projectContent?'iconfont icon-bianji':'el-icon-plus'\" style=\"margin-right:5px;font-size:14px;\" ></i>{{projectContent?'编辑':'添加'}}</el-button>\r\n\t\t\t\t<el-button size=\"mini\":disabled=\"!projectContent\" @click=\"editRemove\"><i class=\"el-icon-delete\" style=\"margin-right:5px;font-size:14px;\" ></i>删除</el-button>\r\n\t\t\t</template>\r\n\t\t\t<div class=\"box editMain\">\r\n\t\t\t\t<QuillEditor v-if=\"editS\" @editContent='editContent' :projectContent=\"projectContent\" @closeEdit=\"closeEdit\"></QuillEditor>\r\n\t\t\t\t<p class=\"noData\" v-show=\"!editS && !projectContent\">暂无内容，请添加~</p>\r\n\t\t\t\t<div v-html=\"projectContent\" v-if=\"!editS\" class=\"ql-editor\"\r\n        :class=\"{readMore: readMore}\"></div>\r\n        <div v-if=\"projectContent\" class=\"readMore-text\" :class=\"{readMorePos: readMore}\" @click=\"readMore = !readMore\">{{readMore?'点击查看全部':'点击收起'}}</div>\r\n\t\t\t</div>\r\n\t\t</ItemBox>\r\n\t\t<ItemBox title=\"敏感性分析\">\r\n\t\t\t<div class=\"box\">\r\n         <div class=\"title\">一键击穿违约率测算结果<a href=\"javascript:;\" class=\"fr\" @click=\"t5 = !t5\">展开/收起</a></div>\r\n\t\t\t\t<div class=\"content\"  v-show=\"t5\">\r\n\t\t\t\t\t<iframeLoading :iframeUrl=\"iframeUrlSAD\"></iframeLoading>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ItemBox>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nconst CUSTOMER = process.env.VUE_APP_CUSTOMER;\r\nconsole.log(CUSTOMER)\r\nimport {\r\n\tmapState,mapMutations\r\n} from 'vuex';\r\nimport utilsIndex from '@/utils/index.js';\r\nimport fsvc from '@/api/FileService';\r\nimport ItemBox from '@/components/layout/ItemBox.vue';\r\nimport iframeLoading from '@/components/common/iframeLoading';\r\nimport QuillEditor from '@/components/product/QuillEditor.vue';\nimport Dates from './Dates.vue';\nimport SecuritiesInformation from './SecuritiesInformation';\nimport { BasePath } from '@/utils/config.js';\r\nexport default {\r\n\tname: \"ProductRoadShow\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfileData:'',\r\n\t\t\tfileName:'',\r\n\t\t\tpreviewImg:'',\r\n\t\t\tzoomInS:false,\r\n\t\t\tpercentage:0,\r\n\t\t\tprogressSw:false,\r\n\t\t\ttableData: [],\r\n      editS:false,\r\n      projectContent:'',\r\n      structurePicture:'',\r\n      basicInfo1:[],\r\n      basicInfo2:[],\r\n      basicInfo3:[],\r\n      imgId:'',\r\n      t1: true,\r\n      t2: true,\r\n      t3: true,\r\n      t4: true,\r\n      t5: true,\r\n      readMore: true\r\n\t\t}\r\n\t},\r\n  computed:{\r\n  \t...mapState('user',['userName']),\r\n    TrustID() {\r\n      return this.$store.state.productInfo.trustId;\r\n    },\r\n    iframeUrl() {\r\n      return BasePath +'QuickDeal/simple.html#/StructureDesign/'+this.TrustID+'/viewDateSet?menu=viewDateSet,Layered&editable=false'\r\n    },\r\n    iframeUrlSAD() {\r\n      return BasePath +`QuickDeal/simple.html#/SensitivityAnalysisDefaultRate/${this.TrustID}`\r\n    },\r\n    paymentIframeUrl(){\r\n    \treturn BasePath +'QuickDeal/simple.html#/StructureDesign/'+this.TrustID+'/PaymentSequenceSetting?menu=PaymentSequenceSetting&editable=false'\r\n    }\r\n  },\r\n  components:{\r\n\t\tItemBox,iframeLoading,QuillEditor,\n    Dates,\n    SecuritiesInformation\r\n\t},\r\n\tcreated() {\r\n\t\tthis.loadDealStructure();\r\n\t\tthis.getData();\r\n\t\tthis.getEdit()\r\n\t},\r\n  methods:{\r\n  \tgetData() {\r\n  \t\tlet self = this;\r\n  \t\tvar svc = self.$http('PortfolioManagement', 'DV.usp_getPoolDistriBution_simulation');\r\n\t\t\tsvc.AddParam({\r\n\t\t\t\tName: \"TrustId\",\r\n\t\t\t\tValue: self.TrustID,\r\n\t\t\t\tDBType: \"int\"\r\n\t\t\t});\r\n\t\t\tsvc.ExecTables().then(res => {\r\n\t\t\t\tthis.basicInfo1 = res[0].map((item) => {\r\n\t\t\t\t\titem.ItemValue =  utilsIndex.numUnit(item.ItemValue)\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t\tthis.basicInfo2 = res[1].map((item) => {\r\n\t\t\t\t\titem.CountPercentage =  utilsIndex.numUnit(item.CountPercentage)\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t\tthis.basicInfo3 = res[2].map((item) => {\r\n\t\t\t\t\titem.CountPercentage =  utilsIndex.numUnit(item.CountPercentage)\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t\tthis.tableData = res[3].map((item) => {\r\n\t\t\t\t\titem.Amount =  utilsIndex.numUnit(item.Amount)\r\n\t\t\t\t\titem.AmountPercentage =  utilsIndex.numUnit(item.AmountPercentage)\r\n\t\t\t\t\titem.CountPercentage =  utilsIndex.numUnit(item.CountPercentage)\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\r\n\t\t\t})\r\n  \t},\r\n    uploadClick() {\r\n    \tdocument.getElementById('fileDiv').click()\r\n    },\r\n    removePreview() {\r\n    \tdocument.getElementById(\"fileDiv\").value = '';\r\n    \tthis.fileData = ''\r\n\t\t\tthis.fileName = ''\r\n\t\t\tthis.previewImg = ''\r\n    },\r\n    fileChange(event) {\r\n    \tlet file = event.target.files;\r\n    \tconsole.log(file)\r\n\t\t\tlet fileType = file[0].name.substr(file[0].name.lastIndexOf(\".\"));\r\n\t\t\tif(fileType!='.jpg' && fileType!='.jpeg'&& fileType!='.png'){\r\n\t\t\t\tthis.$message.warning(\"请选择jpg,jpeg,png格式的图片！\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.fileData = document.getElementById(\"fileDiv\").files[0];\r\n\t\t\tthis.fileName = file[0].name;\r\n\t\t\tthis.previewImg = this.getObjectURL(this.fileData);\r\n    },\r\n    getObjectURL(file) {\r\n\t\t\tvar url = null ;\r\n\t\t\tif (window.createObjectURL!=undefined) { // basic\r\n\t\t\t\turl = window.createObjectURL(file) ;\r\n\t\t\t} else if (window.URL!=undefined) { // mozilla(firefox)\r\n\t\t\t\turl = window.URL.createObjectURL(file) ;\r\n\t\t\t} else if (window.webkitURL!=undefined) { // webkit or chrome\r\n\t\t\t\turl = window.webkitURL.createObjectURL(file) ;\r\n\t\t\t}\r\n\t\t\treturn url ;\r\n\t\t},\r\n    uploadSave(){\r\n\t\t\tvar self = this;\r\n\t\t\tvar postData = document.getElementById(\"fileDiv\").files;\r\n\t\t\tif (postData.length<1) {\r\n\t\t\t    self.$message.error('请选择上传的图片');\r\n\t\t\t    return;\r\n\t\t\t}\r\n\t\t\tvar len = postData.length\r\n\t\t\tvar ai = 0\r\n\t\t\tself.percentage = 0\r\n\t\t\tvar postDataI = 0;\r\n\t\t\tvar nbprogress = 0;\r\n\t\t\tvar postDataName = postData[postDataI].name;\r\n\t\t\tvar folderName='DealViewer\\\\DealStructurePicture\\\\'+self.TrustID;\r\n\t\t\tconst progress = function (progressEvt) {\r\n\t\t\tself.progressSw = true\r\n\t\t\tnbprogress = progressEvt.loaded / progressEvt.total;\r\n\t\t\tself.percentage = parseInt((postDataI + nbprogress)/(postData.length) * 100)\r\n\t\t\t};\r\n\t\t\tvar callback1 = function (fpath) {\r\n\t\t\t\tlet filePath = fpath.UploadResult;\r\n\t\t\t\tfilePath = filePath.substr(0,filePath.lastIndexOf('\\\\')+1)\r\n\t\t\t\tconsole.log(filePath)\r\n\t\t\t\tlet fileType=postDataName.substr(postDataName.lastIndexOf(\".\")+1);\r\n\t\t\t\tvar svc = self.$http('PortfolioManagement', 'DV.usp_DealStructurePictureShow_Add');\r\n\t\t\t\tsvc.AddParam({\r\n\t\t\t\t\tName: \"TrustId\",\r\n\t\t\t\t\tValue: self.TrustID,\r\n\t\t\t\t\tDBType: \"int\"\r\n\t\t\t\t});\r\n\t\t\t\tsvc.AddParam({\r\n\t\t\t\t\tName: \"FilePath\",\r\n\t\t\t\t\tValue: filePath,\r\n\t\t\t\t\tDBType: \"string\"\r\n\t\t\t\t});\r\n\t\t\t\tsvc.AddParam({\r\n\t\t\t\t\tName: \"FileName\",\r\n\t\t\t\t\tValue: postDataName,\r\n\t\t\t\t\tDBType: \"string\"\r\n\t\t\t\t});\r\n\t\t\t\t// svc.AddParam({\r\n\t\t\t\t// \tName: \"UserName\",\r\n\t\t\t\t// \tValue: self.userName,\r\n\t\t\t\t// \tDBType: \"string\"\r\n\t\t\t\t// });\r\n\t\t\t\tsvc.ExecResult().then(res => {\r\n\t\t\t\t\t\tself.progressSw = true\r\n\t\t\t\t\t\tself.removePreview()\r\n\t\t\t\t\t\t// self.percentage = parseInt(((postDataI+1)/(postData.length)) * 100)\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tself.progressSw = false\r\n\t\t\t\t\t\t},500)\r\n\t\t\t\t\tself.loadDealStructure();\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// var svc = self.$http('PortfolioManagement', 'DV.[usp_DealStructurePictureShow_Remove]');\r\n\t\t\t// svc.AddParam({\r\n\t\t\t// \tName: \"TrustID\",\r\n\t\t\t// \tValue: self.TrustID,\r\n\t\t\t// \tDBType: \"int\"\r\n\t\t\t// });\r\n\t\t\t// svc.AddParam({\r\n\t\t\t// \tName: \"UserName\",\r\n\t\t\t// \tValue: self.userName,\r\n\t\t\t// \tDBType: \"string\"\r\n\t\t\t// });\r\n\t\t\t// svc.ExecResult().then(res => {\r\n\t\t\t// \tif(isNaN(res)){\r\n\t\t\t// \t\tself.$message.error('文件上传发生内部服务错误');\r\n\t\t\t// \t}else{\r\n\t\t\t// \t\t//删除物理文件\r\n\t\t\t// \t\tif (self.structurePicture) {\r\n\t\t\t// \t\t\tfsvc.Remove(self.structurePicture,0);\r\n\t\t\t// \t\t}\r\n\r\n\t\t\t// \t\tfsvc.UploadOther(postData[postDataI], postDataName, folderName)(progress, callback1)\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t\tfsvc.UploadOther(postData[postDataI], postDataName, folderName)(progress, callback1)\r\n\t\t},\r\n\t\tloadDealStructure(){\r\n\t\t\tvar self = this;\r\n\t\t\tvar svc = this.$http('PortfolioManagement', 'DV.[usp_DealStructurePictureShow_Get]');\r\n\t\t\tsvc.AddParam({ Name: 'TrustID', Value: self.TrustID, DBType: 'int' });\r\n\t\t\tsvc.ExecTable().then(res =>{\r\n\t\t\t\tif(res.length>0){\r\n\t\t\t\t  let fileSource = res[0].FileFullPath;\r\n\t\t\t\t  if(fileSource) {\r\n            fileSource = fileSource.replace(/\\\\/g,\"/\");\r\n            self.structurePicture = BasePath +'FileBaseFolder/'+fileSource;\r\n            self.imgId = res[0].Id\r\n          }else{\r\n          \tself.imgId = '';\r\n          \tself.structurePicture='';\r\n          }\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n        self.structurePicture='';\r\n        self.imgId = '';\r\n\t\t\t})\r\n\t\t},\r\n\t\tdeleteFile() {\r\n\t    var self = this;\r\n\t    let xml = `\r\n\t    \t<temp><Id>${this.imgId}</Id></temp>\r\n\t    `\r\n\t    this.$confirm('图片将被删除,是否继续？','提示', {\r\n\t        confirmButtonText: '确定',\r\n\t        cancelButttonText:'取消',\r\n\t        type:'warning'\r\n\t    }).then(() => {\r\n\t        var svc = self.$http('PortfolioManagement', 'DV.[usp_DealStructurePictureShow_Remove]');\r\n\t\t\t\t\tsvc.AddParam({\r\n\t\t\t\t\t\tName: \"TrustID\",\r\n\t\t\t\t\t\tValue: self.TrustID,\r\n\t\t\t\t\t\tDBType: \"int\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsvc.AddParam({\r\n\t\t\t\t\t\tName: \"temp\",\r\n\t\t\t\t\t\tValue: xml,\r\n\t\t\t\t\t\tDBType: \"xml\"\r\n\t\t\t\t\t});\r\n\t        svc.ExecResult().then(res => {\r\n\t            if(isNaN(res)){\r\n\t                self.$message.error('文件删除请求发生错误');\r\n\t            }else{\r\n\t                self.$message.success('文件删除成功');\r\n\t                //删除物理文件\r\n\t                if (self.structurePicture) {\r\n\t                \tfsvc.Remove(self.structurePicture,0);\r\n\t                }\r\n\t                self.loadDealStructure();\r\n\t            }\r\n\t        })\r\n\t    }).catch(() => {})\r\n\r\n\t},\r\n    editContent(content) {\r\n    \tlet self = this;\r\n    \tthis.editS = false;\r\n    \tthis.projectContent = content;\r\n    \tvar svc = self.$http('PortfolioManagement', 'DV.usp_SaveProjectHighLights');\r\n\t\t\tsvc.AddParam({\r\n\t\t\t\tName: \"TrustId\",\r\n\t\t\t\tValue: self.TrustID,\r\n\t\t\t\tDBType: \"int\"\r\n\t\t\t});\r\n\t\t\tsvc.AddParam({\r\n\t\t\t\tName: \"HighLights\",\r\n\t\t\t\tValue: self.projectContent,\r\n\t\t\t\tDBType: \"string\"\r\n\t\t\t});\r\n\t\t\tsvc.ExecTable().then(res =>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.getEdit()\r\n\t\t\t})\r\n    },\r\n    getEdit() {\r\n    \tlet self = this;\r\n    \tvar svc = self.$http('PortfolioManagement', 'DV.usp_getProjectHighLights');\r\n\t\t\tsvc.AddParam({\r\n\t\t\t\tName: \"TrustId\",\r\n\t\t\t\tValue: self.TrustID,\r\n\t\t\t\tDBType: \"int\"\r\n\t\t\t});\r\n\t\t\tsvc.ExecTable().then(res =>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tif (res.length) {\r\n\t\t\t\t\tthis.projectContent = res[0].HighLights\r\n\t\t\t\t}\r\n\t\t\t})\r\n    },\r\n    editRemove() {\r\n    \tlet self = this;\r\n    \tthis.$confirm('项目亮点将被删除,是否继续？','提示', {\r\n\t        confirmButtonText: '确定',\r\n\t        cancelButttonText:'取消',\r\n\t        type:'warning'\r\n\t    }).then(() => {\r\n\t    \tvar svc = self.$http('PortfolioManagement', 'DV.usp_DeleteProjectHighLights');\r\n\t\t\t\tsvc.AddParam({\r\n\t\t\t\t\tName: \"TrustId\",\r\n\t\t\t\t\tValue: self.TrustID,\r\n\t\t\t\t\tDBType: \"int\"\r\n\t\t\t\t});\r\n\t\t\t\tsvc.ExecTable().then(res =>{\r\n\t\t\t\t\tself.$message.success('删除成功！');\r\n\t\t\t\t\tself.projectContent = ''\r\n\t\t\t\t})\r\n\t    }).catch(() => {})\r\n\r\n    },\r\n    closeEdit() {\r\n    \tthis.editS = false;\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.productRoadShow{\r\n\t.noData{\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t\ttext-align: center;\r\n\t}\r\n  .box.editMain{\r\n    position: relative;\r\n\r\n    .readMore{\r\n      height: 160px;\r\n      overflow: hidden;\r\n    }\r\n    .readMore-text{\r\n      text-align: center;\r\n      height: 35px;\r\n      line-height: 30px;\r\n      color: $--color-primary;\r\n      cursor: pointer;\r\n\r\n      &.readMorePos{\r\n        position: absolute;\r\n        background-color: rgba(255, 255, 255,.8);\r\n        bottom:0;\r\n        left: 0;\r\n        right: 0;\r\n      }\r\n    }\r\n  }\r\n\t.itemBox-content{\r\n\t\tpadding:0!important;\r\n\t\tbox-shadow: none!important;\r\n\t\t>.box{\r\n\t\tmargin-bottom: 20px;\r\n\t\tbox-shadow: #e9eeff 0 0 20px;\r\n\t\t.title{\r\n\t\t\tfont-size: 13px;\r\n\t\t\tposition: relative;\r\n\t\t\tpadding: 10px 13px;\r\n      margin: 16px;\r\n\t\t\t&:before{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tcontent: '';\r\n\t\t\t\twidth: 6px;\r\n\t\t\t\theight: 3px;\r\n\t\t\t\tmargin-top: -0.5px;\r\n\t\t\t\tbackground-color: $--color-primary;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.content{\r\n\t\t\tmargin-top: 10px;\r\n\t\t\t&.baseContent{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t\t.iframe-page{\r\n\t\t\t\theight: 500px;\r\n\t\t\t}\r\n\t\t\t.pictureDiv{\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tp{\r\n\t\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t// padding-right: 15px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.upload{\r\n\t\t\t\tborder: 1px dashed #ddd;\r\n\t\t    border-radius: 5px;\r\n\t\t    padding: 5px;\r\n\t\t    text-align: center;\r\n\t\t    position: relative;\r\n\t\t    flex:1;\r\n\t\t    padding:30px 0;\r\n\t\t    .zoomIn{\r\n\t\t    \tposition: fixed;\r\n\t\t    \ttop: 0;left: 0;\r\n\t\t    \twidth: 100vw;\r\n\t\t    \theight: 100vh;\r\n\t\t    \tbackground-color: rgba(0,0,0,0.5);\r\n\t\t    \ttext-align: center;\r\n\t\t    \timg{\r\n\t\t    \t\tmax-height: 80%;\r\n\t\t    \t\tmax-width: 70%;\r\n\t\t    \t\tposition: absolute;\r\n\t\t\t\t    left: 50%;\r\n\t\t\t\t    top: 50%;\r\n\t\t\t\t    transform: translate(-50%,-50%);\r\n\t\t    \t}\r\n\t\t    }\r\n\t\t    i.el-icon-plus{\r\n\t\t    \tfont-size: 61px;\r\n    \t\t\tcolor: #ddd;\r\n    \t\t\tcursor: pointer;\r\n    \t\t\tmargin-bottom: 20px;\r\n\t\t    }\r\n\t\t    #fileDiv{\r\n\t\t    \tdisplay: none;\r\n\t\t    }\r\n\t\t    .imgDiv{\r\n\t\t    \twidth: 200px;\r\n\t\t    \theight: 150px;\r\n\t\t    \tposition: relative;\r\n\t\t    \tleft: 50%;\r\n\t\t    \tmargin-left: -100px;\r\n\t\t    \tmargin-bottom: 15px;\r\n\t\t    \t&:hover{\r\n\t\t    \t\t.shade{\r\n\t\t    \t\t\tdisplay: inline-block;\r\n\t\t    \t\t}\r\n\t\t    \t}\r\n\t\t    \t.el-image{\r\n\t\t    \t\twidth: 100%;\r\n\t\t    \t\theight: 100%;\r\n\t\t    \t}\r\n\t\t    \t.shade{\r\n\t\t    \t\tposition: absolute;\r\n\t\t    \t\ttop: 0;\r\n\t\t    \t\tleft: 0;\r\n\t\t    \t\twidth: 100%;\r\n\t\t    \t\theight: 100%;\r\n\t\t    \t\tbackground-color:rgba(0,0,0,0.5);\r\n\t\t    \t\tdisplay: none;\r\n\t\t    \t\t&.progress{\r\n\t\t    \t\t\tdisplay: inline-block;\r\n\t\t    \t\t}\r\n\t\t    \t\ti{\r\n\t\t    \t\t\tcolor: #fff;\r\n\t\t    \t\t\tmargin:0 10px;\r\n\t\t    \t\t\tfont-size: 20px;\r\n\t\t    \t\t\tline-height: 150px;\r\n\t\t    \t\t\tcursor: pointer;\r\n\t\t    \t\t}\r\n\t\t    \t}\r\n\t\t    \t.el-progress{\r\n\t\t\t\t    position: absolute;\r\n\t\t\t\t\t\ttop: 50%;\r\n\t\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\t\ttransform: translate(-50%,-50%);\r\n\t\t\t\t    .el-progress__text{\r\n\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t}\r\n\t\t    \t}\r\n\t\t    }\r\n\r\n\t\t\t}\r\n\t\t\t.base{\r\n\t\t\t\tpadding: 0 15px 0 13px;\r\n\t\t\t\tflex:0 0 350px;\r\n\t\t\t\tbackground-color: #f0f7ff;\r\n\t\t\t\tspan.titles{\r\n\t\t\t\t\tline-height: 25px;\r\n\t\t\t    color: #8d99ed;\r\n\t\t\t    font-size: 13px;\r\n\t\t\t    border-bottom: 1px solid #707fe9;\r\n\t\t\t    display: inline-block;\r\n\t\t\t    margin: 5px 0;\r\n\t\t\t\t}\r\n\t\t\t\tul>li{\r\n\t\t\t\t\tline-height: 28px;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t\t.left{\r\n\t\t\t\t\t\tflex:1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.right{\r\n\t\t\t\t\t\tflex:0 0 100px;\r\n\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.table{\r\n\t\t\t\tflex:1;\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\t>span{\r\n\t\t\t\t\tline-height: 25px;\r\n\t\t\t    color: #8d99ed;\r\n\t\t\t    font-size: 13px;\r\n\t\t\t    border-bottom: 1px solid #707fe9;\r\n\t\t\t    display: inline-block;\r\n\t\t\t    margin: 5px 0;\r\n\t\t\t    margin-left: 10px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\t}\r\n\r\n\t.editMain{\r\n\t\t// box-shadow: none!important;\r\n\t\th1,h2,h3{\r\n\t\t\ttext-indent: 2em;\r\n\t\t}\r\n\t\tp{\r\n\t\t\tline-height: 25px;\r\n\t\t\ttext-indent: 2em;\r\n\t\t}\r\n\t\timg{\r\n\t\t\tmax-width: 90%;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/product"}]}