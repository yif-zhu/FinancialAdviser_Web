{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\router\\index.js","mtime":1604374204499},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport store from '../store/';\nVue.use(Router); // 搜索当前目录\n\nvar context = require.context('.', false, /\\.js$/);\n\nvar modules = context.keys().filter(function (item) {\n  return item !== './index.js';\n}).map(function (key) {\n  return context(key).default;\n});\nvar routes = [{\n  path: '/',\n  name: 'Welcome',\n  meta: {\n    requiresAuth: true\n  },\n  redirect: process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'huatai' ? '/Product/ProductList' : '/Product/ProductList'\n}, {\n  path: '/Login',\n  name: 'Login',\n  meta: {\n    title: '登录'\n  },\n  component: function component() {\n    return import('../views/Login.vue');\n  }\n}].concat(_toConsumableArray(modules)); // if (!process.env.VUE_APP_CUSTOMER || process.env.VUE_APP_CUSTOMER !== 'xiaomi') {\n//   routes.push({\n//     path: '/vvauto-login',\n//     name: 'AutoLogin',\n//     meta: {\n//       title: '登录'\n//     },\n//     component: () =>\n//       import('../views/AutoLogin.vue')\n//   })\n// }\n\nvar router = new Router({\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  // 验证登录权限\n  // 控制导航栏显示隐藏\n  if (to.path === '/login' || to.name === '404') {\n    store.commit('changeHeaderVisible', false);\n  } else {\n    store.commit('changeHeaderVisible', true);\n  }\n\n  if (to.meta.requiresAuth) {\n    if (store.getters.loggedIn) {\n      store.commit('setPageUrl', to.fullPath);\n      next();\n    } else {\n      var path = '';\n\n      if (process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'huatai') {\n        // 华泰需要免登录\n        path = '/vvauto-login';\n      } else {\n        path = '/login';\n      }\n\n      next({\n        path: path,\n        query: {\n          redirectURL: to.fullPath\n        } // 将当前路由路径作为参数，登录成功后跳转回该路径\n\n      });\n    }\n  } else {\n    next();\n  }\n}); // 导出Router实例\n\nexport default router;",{"version":3,"sources":["C:/Users/yif_z/Desktop/DealViewer/src/router/index.js"],"names":["Vue","Router","store","use","context","require","modules","keys","filter","item","map","key","default","routes","path","name","meta","requiresAuth","redirect","process","env","VUE_APP_CUSTOMER","title","component","router","beforeEach","to","from","next","commit","getters","loggedIn","fullPath","query","redirectURL"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,KAAP,MAAkB,WAAlB;AAEAF,GAAG,CAACG,GAAJ,CAAQF,MAAR,E,CAEA;;AACA,IAAMG,OAAO,GAAGC,OAAO,CAACD,OAAR,CAAgB,GAAhB,EAAqB,KAArB,EAA4B,OAA5B,CAAhB;;AACA,IAAME,OAAO,GAAGF,OAAO,CAACG,IAAR,GAAeC,MAAf,CAAsB,UAAAC,IAAI;AAAA,SAAIA,IAAI,KAAK,YAAb;AAAA,CAA1B,EAAqDC,GAArD,CAAyD,UAAAC,GAAG;AAAA,SAAIP,OAAO,CAACO,GAAD,CAAP,CAAaC,OAAjB;AAAA,CAA5D,CAAhB;AAEA,IAAMC,MAAM,IAAI;AACZC,EAAAA,IAAI,EAAE,GADM;AAEZC,EAAAA,IAAI,EAAE,SAFM;AAGZC,EAAAA,IAAI,EAAE;AACJC,IAAAA,YAAY,EAAE;AADV,GAHM;AAMZC,EAAAA,QAAQ,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBAAZ,IAAgCF,OAAO,CAACC,GAAR,CAAYC,gBAAZ,KAAiC,QAAjE,GACR,sBADQ,GACiB;AAPf,CAAJ,EASV;AACEP,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,IAAI,EAAE;AACJM,IAAAA,KAAK,EAAE;AADH,GAHR;AAMEC,EAAAA,SAAS,EAAE;AAAA,WACT,OAAO,oBAAP,CADS;AAAA;AANb,CATU,4BAkBPjB,OAlBO,EAAZ,C,CAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMkB,MAAM,GAAG,IAAIvB,MAAJ,CAAW;AACxBY,EAAAA,MAAM,EAANA;AADwB,CAAX,CAAf;AAGAW,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACA;AACA,MAAIF,EAAE,CAACZ,IAAH,KAAY,QAAZ,IAAwBY,EAAE,CAACX,IAAH,KAAY,KAAxC,EAA+C;AAC7Cb,IAAAA,KAAK,CAAC2B,MAAN,CAAa,qBAAb,EAAoC,KAApC;AACD,GAFD,MAEO;AACL3B,IAAAA,KAAK,CAAC2B,MAAN,CAAa,qBAAb,EAAoC,IAApC;AACD;;AACD,MAAIH,EAAE,CAACV,IAAH,CAAQC,YAAZ,EAA0B;AACxB,QAAIf,KAAK,CAAC4B,OAAN,CAAcC,QAAlB,EAA4B;AAC1B7B,MAAAA,KAAK,CAAC2B,MAAN,CAAa,YAAb,EAA2BH,EAAE,CAACM,QAA9B;AACAJ,MAAAA,IAAI;AACL,KAHD,MAGO;AACL,UAAId,IAAI,GAAG,EAAX;;AACA,UAAIK,OAAO,CAACC,GAAR,CAAYC,gBAAZ,IAAgCF,OAAO,CAACC,GAAR,CAAYC,gBAAZ,KAAiC,QAArE,EAA+E;AAC7E;AACAP,QAAAA,IAAI,GAAG,eAAP;AACD,OAHD,MAGK;AACHA,QAAAA,IAAI,GAAG,QAAP;AACD;;AACDc,MAAAA,IAAI,CAAC;AACHd,QAAAA,IAAI,EAAJA,IADG;AAEHmB,QAAAA,KAAK,EAAE;AACLC,UAAAA,WAAW,EAAER,EAAE,CAACM;AADX,SAFJ,CAID;;AAJC,OAAD,CAAJ;AAMD;AACF,GAnBD,MAmBO;AACLJ,IAAAA,IAAI;AACL;AACF,CA9BD,E,CAgCA;;AACA,eAAeJ,MAAf","sourcesContent":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport store from '../store/';\n\nVue.use(Router);\n\n// 搜索当前目录\nconst context = require.context('.', false, /\\.js$/);\nconst modules = context.keys().filter(item => item !== './index.js').map(key => context(key).default);\n\nconst routes = [{\n    path: '/',\n    name: 'Welcome',\n    meta: {\n      requiresAuth: true\n    },\n    redirect: process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'huatai' ?\n      '/Product/ProductList' : '/Product/ProductList',\n  },\n  {\n    path: '/Login',\n    name: 'Login',\n    meta: {\n      title: '登录'\n    },\n    component: () =>\n      import('../views/Login.vue')\n  },\n  ...modules\n];\n\n// if (!process.env.VUE_APP_CUSTOMER || process.env.VUE_APP_CUSTOMER !== 'xiaomi') {\n//   routes.push({\n//     path: '/vvauto-login',\n//     name: 'AutoLogin',\n//     meta: {\n//       title: '登录'\n//     },\n//     component: () =>\n//       import('../views/AutoLogin.vue')\n//   })\n// }\n\nconst router = new Router({\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  // 验证登录权限\n  // 控制导航栏显示隐藏\n  if (to.path === '/login' || to.name === '404') {\n    store.commit('changeHeaderVisible', false);\n  } else {\n    store.commit('changeHeaderVisible', true);\n  }\n  if (to.meta.requiresAuth) {\n    if (store.getters.loggedIn) {\n      store.commit('setPageUrl', to.fullPath);\n      next();\n    } else {\n      let path = '';\n      if (process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'huatai') {\n        // 华泰需要免登录\n        path = '/vvauto-login';\n      }else{\n        path = '/login';\n      }\n      next({\n        path,\n        query: {\n          redirectURL: to.fullPath\n        } // 将当前路由路径作为参数，登录成功后跳转回该路径\n      });\n    }\n  } else {\n    next();\n  }\n});\n\n// 导出Router实例\nexport default router;\n"]}]}