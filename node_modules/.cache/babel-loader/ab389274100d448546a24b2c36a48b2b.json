{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\layout\\AppHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\layout\\AppHeader.vue","mtime":1604665472999},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import dataGrid from '@/components/common/DataGrid.vue';\nimport userImg from '@/assets/images/user.png';\nimport { mapState, mapMutations, mapMutions } from 'vuex';\nimport md5 from 'js-md5';\nexport default {\n  name: \"AppHeader\",\n  data: function data() {\n    var validator = function validator(rule, value, callback) {\n      var test = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,20}$/;\n\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else if (!test.test(value)) {\n        callback(new Error('密码长度为8-20位，必须包括字母、数字'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      active: '1',\n      userImg: userImg,\n      modifyPasswordDialog: false,\n      passwordForm: {\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      passwordRules: {\n        newPassword: [{\n          validator: validator,\n          trigger: 'blur'\n        }],\n        confirmPassword: [{\n          validator: validator,\n          trigger: 'blur'\n        }]\n      },\n      passwordErrors: {\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      activeRead: 'unread',\n      listOrder: 'TrustId desc',\n      listFilter: 'IsConcerned=1',\n      showTips: false,\n      showColorsEgg: false,\n      versionName: 'Kookaburra',\n      total: 0,\n      currentPage: 1,\n      pagesize: 10,\n      filterCheckType: '',\n      tableData: [],\n      CUSTOMER: process.env.VUE_APP_CUSTOMER,\n      showFollows: false\n    };\n  },\n  components: {// dataGrid\n  },\n  computed: _objectSpread(_objectSpread({}, mapState('user', ['userName', 'isRoot'])), {}, {\n    ConcernTrust: function ConcernTrust() {\n      return this.$store.state.productInfo.ConcernTrust;\n    }\n  }),\n  watch: {\n    ConcernTrust: function ConcernTrust(v) {\n      if (this.$refs.refDataGrid) this.$refs.refDataGrid.refresh();\n    }\n  },\n  created: function created() {\n    this.ConcernTrust_Get();\n  },\n  methods: _objectSpread(_objectSpread({}, mapMutations(['setLoginStatus', 'productInfo/setProductDetail', 'productInfo/setConcernTrust'])), {}, {\n    ConcernTrust_Get: function ConcernTrust_Get() {\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.UserConcernTrust_Get');\n      svc.AddParam({\n        Name: 'UserName',\n        Value: self.userName,\n        DBType: 'string'\n      });\n      svc.ExecTable().then(function (res) {\n        self['productInfo/setConcernTrust'](res);\n      });\n    },\n    handleModifyUserPassword: function handleModifyUserPassword() {\n      var _this = this;\n\n      var $form = this.$refs.passwordForm;\n      $form.validate(function (valid) {\n        if (valid) {\n          var _this$passwordForm = _this.passwordForm,\n              oldPassword = _this$passwordForm.oldPassword,\n              newPassword = _this$passwordForm.newPassword,\n              confirmPassword = _this$passwordForm.confirmPassword;\n\n          if (oldPassword === newPassword) {\n            _this.passwordErrors.newPassword = '请设置一个新的密码!';\n            return;\n          }\n\n          if (newPassword !== confirmPassword) {\n            _this.passwordErrors.confirmPassword = '两次输入的密码不一致!';\n            return;\n          }\n\n          var svc = _this.$http('UserManagement', 'QuickFrame.usp_ChangePasswordWithResult');\n\n          svc.AddParam({\n            Name: \"UserName\",\n            Value: _this.userName,\n            DBType: \"string\"\n          });\n          svc.AddParam({\n            Name: \"OldPassword\",\n            Value: md5(oldPassword),\n            DBType: \"string\"\n          });\n          svc.AddParam({\n            Name: \"NewPassword\",\n            Value: md5(newPassword),\n            DBType: \"string\"\n          });\n          svc.ExecResult().then(function (res) {\n            if (res == 1) {\n              _this.passwordErrors.oldPassword = '原密码不正确!';\n            } else {\n              _this.$message.success('恭喜您，密码修改成功!');\n\n              _this.modifyPasswordDialog = false;\n              $form.resetFields();\n              $form.clearValidate();\n            }\n          });\n        }\n      });\n    },\n    handleSetting: function handleSetting(type) {\n      var _this2 = this;\n\n      switch (type) {\n        case 'admin':\n          this.$router.push('/Admin');\n          break;\n\n        case 'logout':\n          this.$store.dispatch('user/handleUserLogout').then(function () {\n            _this2.$router.push('/login');\n\n            _this2.setLoginStatus(false);\n          });\n          break;\n\n        case 'modifyPassword':\n          this.modifyPasswordDialog = true;\n      } //alert(type)\n\n    },\n    handleSizeChange: function handleSizeChange(size) {\n      this.pagesize = size;\n      var currentPage = this.currentPage;\n      var pagesize = this.pagesize;\n      this.tableData = this.$allTableData.slice((currentPage - 1) * pagesize, currentPage * pagesize);\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      var currentPage = this.currentPage;\n      var pagesize = this.pagesize;\n      this.tableData = this.$allTableData.slice((currentPage - 1) * pagesize, currentPage * pagesize);\n    },\n    moreFocusFun: function moreFocusFun() {\n      this.$router.push({\n        path: '/ProductFocus/ProductList'\n      });\n    }\n  })\n};",{"version":3,"sources":["AppHeader.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"scss\" scoped>\n  .app-header{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    justify-content: space-between;\n    flex-direction: column;\n    width: 100%;\n    height: 40px;\n    background: linear-gradient(to right , #2D3EAB, #0D1E8A 20%, #0D1E8A 70%, #3d4fc5);\n    background-color: #2D3EAB;\n    .inner{\n      padding: 0 20px;\n      .content{\n        display: flex;\n        height: 40px;\n        flex-direction: row;\n        align-items: center;\n        >div{\n          flex:1;\n        }\n        .logo{\n          flex:1;\n          font-size: 18px;\n          font-weight: bold;\n          color: #fff;\n          a{\n            color: #fff;\n            .dv-logo{\n              height: 26px\n            }\n          }\n        }\n        .menu{\n          ul{\n            text-align: right;\n            li{\n              display: inline-block;\n              font-size: 14px;\n              color: rgba(255,255,255,0.6);\n              margin-left: 40px;\n              vertical-align: middle;\n\n              &:first-child{\n                margin-left: 0;\n              }\n              &.message{\n                &.active{\n                  position: relative;\n                  &:before{\n                    display: inline-block;\n                    width: 5px;\n                    height: 5px;\n                    border-radius: 5px;\n                    background-color: red;\n                    content: '';\n                    position: absolute;\n                    top: -2px;right: -2px;\n                  }\n                }\n                i{\n                  cursor: pointer;\n                }\n              }\n              a{\n                color: rgba(255,255,255,0.6);\n                vertical-align: middle;\n                &.router-link-active{\n                  color: #fff;\n                }\n              }\n              &.userName{\n                span{\n                  vertical-align: middle;\n                }\n                img{\n                  width: 23px;\n                  height: 23px;\n                  vertical-align: middle;\n                  margin-right: 10px;\n                }\n              }\n            }\n          }\n\n          .setting{\n            color: rgba(255,255,255,0.6);\n            cursor: pointer;\n            &:hover{\n              color: #fff;\n            }\n          }\n        }\n\n      }\n\n    }\n  }\n.icon-guanzhu1{\n  color:rgb(247, 186, 42);\n  font-size:13px;\n  cursor: pointer;\n}\n.icon-guanzhu{\n  color: #c0c4cc;\n  font-size: 13px;\n  cursor: pointer;\n}\n.moreP{\n  font-size: 12px;\n  text-align: center;\n  line-height: 30px;\n  color: $--color-grey;\n  cursor: pointer;\n}\n.popoverUl{\n  a{\n    line-height: 30px;\n    font-size: 12px;\n    border-bottom: 1px solid #ddd;\n    color: $--color-grey;\n    display: inline-block;\n    overflow: hidden;\n    text-overflow:ellipsis;\n    white-space: nowrap;\n    width: 100%;\n    cursor: pointer;\n  }\n}\n.messageTab{\n  font-size: 12px;\n}\n/deep/ .el-tabs__item{\n  font-size: 12px;\n  height: 30px;\n  line-height: 30px;\n}\n</style>\n<template>\n  <div class=\"app-header\">\n    <div class=\"inner\">\n      <div class=\"content\">\n        <div class=\"logo\">\n          <router-link to=\"/Enterprise/EnterpriseList\">\n            <img src=\"@/assets/images/dv.svg\" alt=\"\" class=\"dv-logo\">\n          </router-link>\n        </div>\n<!--        <Search v-if=\"CUSTOMER === 'xiaomi'\"/>-->\n        <div class=\"menu\">\n          <ul class=\"app-menu\">\n            <li class=\"menu-item\">\n              <router-link to=\"/Enterprise\">\n                <span>企业列表</span>\n              </router-link>\n            </li>\n            <li class=\"menu-item\">\n              <router-link to=\"/IndustryData\">\n                <span>行业数据</span>\n              </router-link>\n            </li>\n            <li class=\"menu-item\">\n              <router-link to=\"/ReportManage\">\n                <span>报告管理</span>\n              </router-link>\n            </li>\n\n            <li class=\"userName\">\n              <img :src=\"userImg\"/>\n              <el-dropdown @command=\"handleSetting\">\n                <span class=\"setting\">\n                设置<i class=\"el-icon-arrow-down el-icon--right\"></i>\n                </span>\n                <el-dropdown-menu slot=\"dropdown\" :visibleArrow=\"false\">\n                  <el-dropdown-item command=\"admin\">系统设置</el-dropdown-item>\n                  <el-dropdown-item command=\"modifyPassword\">修改密码</el-dropdown-item>\n                  <el-dropdown-item command=\"logout\">退出登录</el-dropdown-item>\n                </el-dropdown-menu>\n              </el-dropdown>\n            </li>\n          </ul>\n\n        </div>\n      </div>\n    </div>\n    <el-dialog title=\"修改密码\" width=\"430px\" :visible.sync=\"modifyPasswordDialog\" :lock-scroll=\"false\">\n      <el-form ref=\"passwordForm\" :model=\"passwordForm\" :rules=\"passwordRules\" key=\"modifyPassword\">\n        <el-form-item label=\"原密码\" prop=\"oldPassword\" :error=\"passwordErrors.oldPassword\">\n          <el-input type=\"password\" v-model=\"passwordForm.oldPassword\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword\" :error=\"passwordErrors.newPassword\">\n          <el-input type=\"password\" v-model=\"passwordForm.newPassword\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"confirmPassword\" :error=\"passwordErrors.confirmPassword\">\n          <el-input type=\"password\" v-model=\"passwordForm.confirmPassword\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleModifyUserPassword\">确定</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\n  // import dataGrid from '@/components/common/DataGrid.vue';\n  import userImg from '@/assets/images/user.png'\n  import {mapState, mapMutations, mapMutions} from 'vuex';\n  import md5 from 'js-md5';\n  export default {\n    name: \"AppHeader\",\n    data() {\n      const validator = (rule, value, callback) => {\n        let test = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,20}$/;\n        if (value === '') {\n          callback(new Error('请输入密码'));\n        }else if (!(test.test(value))) {\n          callback(new Error('密码长度为8-20位，必须包括字母、数字'));\n        } else {\n          callback();\n        }\n      };\n      return {\n        active: '1',\n        userImg:userImg,\n        modifyPasswordDialog: false,\n        passwordForm: {\n          oldPassword:'',\n          newPassword:'',\n          confirmPassword: ''\n        },\n        passwordRules: {\n          newPassword: [\n            { validator, trigger: 'blur' }\n          ],\n          confirmPassword: [\n            { validator, trigger: 'blur' }\n          ],\n        },\n        passwordErrors: {\n          oldPassword: '',\n          newPassword: '',\n          confirmPassword: '',\n        },\n        activeRead:'unread',\n        listOrder: 'TrustId desc',\n        listFilter: 'IsConcerned=1',\n        showTips: false,\n        showColorsEgg: false,\n        versionName : 'Kookaburra',\n        total: 0,\n        currentPage: 1,\n        pagesize: 10,\n        filterCheckType: '',\n        tableData: [],\n        CUSTOMER: process.env.VUE_APP_CUSTOMER,\n        showFollows: false\n      }\n    },\n    components:{\n      // dataGrid\n    },\n    computed: {\n      ...mapState('user',['userName', 'isRoot']),\n      ConcernTrust() {\n        return this.$store.state.productInfo.ConcernTrust\n      }\n    },\n    watch:{\n      ConcernTrust(v) {\n        if(this.$refs.refDataGrid) this.$refs.refDataGrid.refresh()\n      }\n    },\n    created() {\n      this.ConcernTrust_Get()\n    },\n    methods: {\n      // ...mapMutations('productInfo', ['setProductDetail','setConcernTrust'],['setLoginStatus']),\n      ...mapMutations(['setLoginStatus', 'productInfo/setProductDetail','productInfo/setConcernTrust']),\n      ConcernTrust_Get() {\n        var self = this;\n        var svc = this.$http('PortfolioManagement', 'DV.UserConcernTrust_Get');\n        svc.AddParam({\n          Name: 'UserName',\n          Value: self.userName,\n          DBType: 'string'\n        });\n        svc.ExecTable().then(res => {\n          self['productInfo/setConcernTrust'](res)\n        })\n      },\n      handleModifyUserPassword() {\n        const $form = this.$refs.passwordForm;\n        $form.validate((valid) => {\n          if(valid) {\n            const {\n              oldPassword,\n              newPassword,\n              confirmPassword\n            } = this.passwordForm;\n            if(oldPassword === newPassword) {\n              this.passwordErrors.newPassword = '请设置一个新的密码!';\n              return;\n            }\n            if(newPassword !== confirmPassword) {\n              this.passwordErrors.confirmPassword = '两次输入的密码不一致!';\n              return;\n            }\n\n            let svc = this.$http(\n              'UserManagement',\n              'QuickFrame.usp_ChangePasswordWithResult'\n            );\n            svc.AddParam({\n              Name: \"UserName\",\n              Value: this.userName,\n              DBType: \"string\"\n            });\n            svc.AddParam({\n              Name: \"OldPassword\",\n              Value: md5(oldPassword),\n              DBType: \"string\"\n            });\n            svc.AddParam({\n              Name: \"NewPassword\",\n              Value: md5(newPassword),\n              DBType: \"string\"\n            });\n            svc.ExecResult().then(res => {\n              if (res == 1) {\n                this.passwordErrors.oldPassword = '原密码不正确!';\n              }else{\n                this.$message.success('恭喜您，密码修改成功!');\n                this.modifyPasswordDialog = false;\n                $form.resetFields();\n                $form.clearValidate();\n              }\n            });\n          }\n        })\n      },\n      handleSetting(type) {\n        switch (type) {\n          case 'admin':\n            this.$router.push('/Admin');\n            break;\n          case 'logout':\n            this.$store.dispatch('user/handleUserLogout').then(()=>{\n              this.$router.push('/login');\n              this.setLoginStatus(false);\n            });\n            break;\n          case 'modifyPassword':\n            this.modifyPasswordDialog = true\n        }\n        //alert(type)\n      },\n    handleSizeChange(size) {\n      this.pagesize = size;\n      let currentPage=this.currentPage;\n      let pagesize= this.pagesize;\n      this.tableData = this.$allTableData.slice((currentPage-1)*pagesize,currentPage*pagesize);\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      let currentPage=this.currentPage;\n      let pagesize= this.pagesize;\n      this.tableData = this.$allTableData.slice((currentPage-1)*pagesize,currentPage*pagesize);\n    },\n         moreFocusFun() {\n        this.$router.push({\n          path:'/ProductFocus/ProductList'\n        })\n      },\n\n    }\n  }\n</script>\n"],"sourceRoot":"src/components/layout"}]}