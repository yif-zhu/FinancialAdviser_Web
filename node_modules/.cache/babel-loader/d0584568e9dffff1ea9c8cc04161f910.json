{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\Dates.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\Dates.vue","mtime":1604281047645},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ItemBox from '@/components/layout/ItemBox.vue';\nexport default {\n  data: function data() {\n    return {\n      periodData: [],\n      RevolvingPeriod: '0',\n      AmortisationPeriod: 0,\n      iframeUrl1: '',\n      iframeUrl2: '',\n      activeName: 'first',\n      thirdS: 0\n    };\n  },\n  components: {\n    ItemBox: ItemBox\n  },\n  created: function created() {\n    this.productBase();\n  },\n  watch: {\n    activeName: function activeName(v) {\n      var self = this;\n\n      if (v == 'third') {\n        self.thirdS = 1;\n      } else {\n        self.thirdS = 0;\n      }\n    }\n  },\n  computed: {\n    TrustID: function TrustID() {\n      return this.$store.state.productInfo.trustId;\n    }\n  },\n  methods: {\n    productBase: function productBase() {\n      var _this = this;\n\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.TrustDateInfo_Get', 1);\n      self.iframeUrl1 = '/goldenstandabs/www/productDesignTools/index.html?trustId=' + self.TrustID;\n      self.iframeUrl2 = '/GoldenStandABS/www/components/viewDateSet/DateCalendar.html?tid=' + self.TrustID + '&name=兑付日';\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTables().then(function (res) {\n        if (res[0].length == 0) {\n          return;\n        }\n\n        var data = res[0][0];\n        console.log(res);\n        self.AmortisationPeriod = data.AmortisationPeriod;\n        self.RevolvingPeriod = data.RevolvingPeriod;\n        var timeData = [];\n        console.log(data);\n        Object.keys(data).forEach(function (key) {\n          var keyName = key == 'ClosureDate' ? '法定到期日' : key == 'AmortisationPeriodEnd' ? '摊还期结束' : key == 'AmortisationPeriodStart' ? '摊还期开始' : key == 'FirstCollectionDate' ? '首个计算日' : key == 'FirstPaymentDate' ? '首个兑付日' : key == 'FirstInterestCollectionDate' ? '' : key == 'RevolvingPeriodEnd' ? '循环期结束' : key == 'PoolCloseDate' ? '初始起算日' : key == 'LiquidatedDate' ? '清算日' : key == 'RevolvingPeriodStart' ? '循环期开始' : '产品设立日';\n          var className = key == 'AmortisationPeriodEnd' ? 'APE' : key == 'AmortisationPeriodStart' ? 'APS' : key == 'FirstCollectionDate' ? 'MDT' : key == 'FirstPaymentDate' ? 'MDT' : key == 'FirstInterestCollectionDate' ? 'MDT' : key == 'PoolCloseDate' ? 'MDT' : key == 'LiquidatedDate' ? 'MDT' : key == 'RevolvingPeriodEnd' ? 'RPE' : key == 'RevolvingPeriodStart' ? 'RPS' : '';\n\n          if (key === 'LiquidatedDate') {\n            if (data[key]) data[key] = data[key].S2Date();\n          }\n\n          if (String(data[key]).indexOf('-') > 3) {\n            timeData.push({\n              name: keyName,\n              time: data[key],\n              size: new Date(data[key]).getTime(),\n              className: className\n            });\n          }\n        });\n\n        if (res[1] && res[1].length) {\n          for (var i = 0; i < res[1].length; i++) {\n            timeData.push({\n              name: res[1][i].TitleName,\n              time: res[1][i].EndDate.S2Date(),\n              size: new Date(res[1][i].EndDate.S2Date()).getTime(),\n              className: 'MDT'\n            });\n          }\n        }\n\n        var objectArraySort = function objectArraySort(keyName) {\n          return function (objectN, objectM) {\n            var valueN = objectN[keyName];\n            var valueM = objectM[keyName];\n            if (valueN < valueM) return 1;else if (valueN > valueM) return -1;else return 0;\n          };\n        };\n\n        timeData.sort(objectArraySort('size')); //console.log(timeData)\n\n        var map = {},\n            dest = [],\n            arr = timeData;\n\n        for (var i = 0; i < arr.length; i++) {\n          var ai = arr[i];\n\n          if (!map[ai.size]) {\n            dest.push({\n              size: ai.size,\n              name: ai.name,\n              time: ai.time,\n              className: ai.className,\n              data: [ai]\n            });\n            map[ai.size] = ai;\n          } else {\n            for (var j = 0; j < dest.length; j++) {\n              var dj = dest[j];\n\n              if (dj.size == ai.size) {\n                dj.data.push(ai);\n                break;\n              }\n            }\n          }\n        }\n\n        dest = dest.reverse(); //console.log(dest)\n\n        for (var i = 0; i < dest.length; i++) {\n          dest[i].emCN = '';\n          dest[i].data.forEach(function (item) {\n            var cn = item.className;\n\n            if (cn && cn != '') {\n              dest[i].emCN += cn + ' ';\n            }\n\n            var cnli = item.className + 'li';\n            dest[i].className = dest[i].className.replace('APS', '').replace('APE', '').replace('RPS', '').replace('RPE', '');\n            dest[i].className += ' ' + cnli + ' ';\n          });\n        }\n\n        _this.periodData = dest;\n        console.log(_this.periodData);\n\n        _this.$nextTick(function () {\n          var start = document.getElementsByClassName('APS')[0] ? document.getElementsByClassName('APS')[0].getAttribute('dataIndex') : 0;\n          var end = document.getElementsByClassName('APE')[0] ? document.getElementsByClassName('APE')[0].getAttribute('dataIndex') : 0;\n          var lid = document.getElementsByClassName('liLen');\n          console.log(lid);\n          var length = 0;\n          var borderRightLen = 0;\n\n          for (var i = 0; i < lid.length; i++) {\n            if (i > start && i < end) {\n              length += lid[i].clientHeight;\n            }\n\n            if (i == start || i == end) {\n              length += lid[i].clientHeight / 2;\n            }\n\n            if (i > 0 && i < lid.length - 1) {\n              borderRightLen += lid[i].clientHeight;\n            }\n\n            if (i == 0 || i == lid.length - 1) {\n              borderRightLen += lid[i].clientHeight / 2;\n            }\n          }\n\n          if (document.getElementsByClassName('BRLen')[0]) {\n            document.getElementsByClassName('BRLen')[0].style.height = borderRightLen + 'px';\n            document.getElementsByClassName('BRLen')[0].style.top = lid[0].clientHeight / 2 + 'px';\n          }\n\n          console.log(length);\n\n          if (document.getElementsByClassName('APL')[0]) {\n            document.getElementsByClassName('APL')[0].style.height = length + 'px';\n          }\n\n          var start1 = document.getElementsByClassName('RPS')[0] ? document.getElementsByClassName('RPS')[0].getAttribute('dataIndex') : 0;\n          var end1 = document.getElementsByClassName('RPE')[0] ? document.getElementsByClassName('RPE')[0].getAttribute('dataIndex') : 0;\n          console.log(start1, end1);\n          var lid1 = document.getElementsByClassName('liLen');\n          var length1 = 0;\n\n          for (var i = 0; i < lid1.length; i++) {\n            if (i > start1 && i < end1) {\n              length1 += lid1[i].clientHeight;\n            }\n\n            if (i == start1 || i == end1) {\n              length1 += lid1[i].clientHeight / 2;\n            }\n          }\n\n          if (document.getElementsByClassName('RPL')[0]) {\n            document.getElementsByClassName('RPL')[0].style.height = length1 + 'px';\n          }\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["Dates.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"detailPage\">\n    <ItemBox title=\"日历\">\n      <!-- <el-tabs v-model=\"activeName\">\n\t\t    <el-tab-pane label=\"日历1\" name=\"first\">\n\n\t\t    </el-tab-pane>\n\t\t    <el-tab-pane label=\"日历2\" name=\"second\">\n\t\t    \t<iframe id=\"mainContent1\" width=\"100%\" height=\"300px\" :src=\"iframeUrl1\"  scrolling=\"no\" hspace=\"-100\" vspace=\"-100\"></iframe>\n\t\t    </el-tab-pane>\n\t\t    <el-tab-pane label=\"日历3\" name=\"third\">\n\n\t\t    </el-tab-pane>\n\t\t  </el-tabs>\n     <iframe id=\"mainContent2\" width=\"100%\" height=\"500\" :src=\"iframeUrl2\" :style=\"{opacity:thirdS}\"></iframe> -->\n      <div id=\"Dates\">\n        <div class=\"BRLen\"></div>\n        <ul>\n          <li v-for=\"(item, index) in periodData\" :class=\"item.className\" class=\"liLen\">\n            <em class=\"APL\" v-if=\"item.emCN.indexOf('APS') > -1 && AmortisationPeriod > -1\">\n              <span>\n                摊还期\n                <b>{{ AmortisationPeriod }}个月</b>\n              </span>\n            </em>\n            <em class=\"APL\" v-if=\"item.emCN.indexOf('APE') > -1 && AmortisationPeriod < 0\">\n              <span>\n                摊还期\n                <b>{{ AmortisationPeriod }}个月</b>\n              </span>\n            </em>\n            <em class=\"RPL\" v-if=\"item.emCN.indexOf('RPS') > -1 && RevolvingPeriod != '0'\">\n              <span>\n                循环期\n                <b>{{ RevolvingPeriod }}个月</b>\n              </span>\n            </em>\n            <span class=\"time\">\n              <span>\n                <i class=\"iconfont icon-shijian\"></i>\n                {{ item.time }}\n              </span>\n            </span>\n            <span class=\"text\">\n              <span v-for=\"items in item.data\">\n                <span v-if=\"RevolvingPeriod == '0'\">\n                  <span class=\"textspan\" :class=\"items.className\" :dataIndex=\"index\" v-show=\"items.name != '循环期开始'\"><span v-html=\"items.name\"></span></span>\n                </span>\n                <span v-else>\n                  <span class=\"textspan\" :class=\"items.className\" :dataIndex=\"index\"><span v-html=\"items.name\"></span></span>\n                </span>\n              </span>\n            </span>\n          </li>\n        </ul>\n        <p v-if=\"periodData.length == 0\" class=\"noData\">暂无数据</p>\n      </div>\n    </ItemBox>\n  </div>\n</template>\n\n<script>\nimport ItemBox from '@/components/layout/ItemBox.vue';\nexport default {\n  data() {\n    return {\n      periodData: [],\n      RevolvingPeriod: '0',\n      AmortisationPeriod: 0,\n      iframeUrl1: '',\n      iframeUrl2: '',\n      activeName: 'first',\n      thirdS: 0\n    };\n  },\n  components: {\n    ItemBox\n  },\n  created() {\n    this.productBase();\n  },\n  watch: {\n    activeName(v) {\n      var self = this;\n      if (v == 'third') {\n        self.thirdS = 1;\n      } else {\n        self.thirdS = 0;\n      }\n    }\n  },\n  computed: {\n    TrustID() {\n      return this.$store.state.productInfo.trustId;\n    }\n  },\n  methods: {\n    productBase() {\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.TrustDateInfo_Get', 1);\n      self.iframeUrl1 = '/goldenstandabs/www/productDesignTools/index.html?trustId=' + self.TrustID;\n      self.iframeUrl2 = '/GoldenStandABS/www/components/viewDateSet/DateCalendar.html?tid=' + self.TrustID + '&name=兑付日';\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTables().then(res => {\n        if (res[0].length == 0) {\n          return;\n        }\n        var data = res[0][0];\n        console.log(res);\n        self.AmortisationPeriod = data.AmortisationPeriod;\n        self.RevolvingPeriod = data.RevolvingPeriod;\n        var timeData = [];\n        console.log(data);\n        Object.keys(data).forEach(key => {\n          var keyName =\n            key == 'ClosureDate'\n              ? '法定到期日'\n              : key == 'AmortisationPeriodEnd'\n              ? '摊还期结束'\n              : key == 'AmortisationPeriodStart'\n              ? '摊还期开始'\n              : key == 'FirstCollectionDate'\n              ? '首个计算日'\n              : key == 'FirstPaymentDate'\n              ? '首个兑付日'\n              : key == 'FirstInterestCollectionDate'\n              ? ''\n              : key == 'RevolvingPeriodEnd'\n              ? '循环期结束'\n              : key == 'PoolCloseDate'\n              ? '初始起算日'\n              : key == 'LiquidatedDate'\n              ? '清算日'\n              : key == 'RevolvingPeriodStart'\n              ? '循环期开始'\n              : '产品设立日';\n\n          var className =\n            key == 'AmortisationPeriodEnd'\n              ? 'APE'\n              : key == 'AmortisationPeriodStart'\n              ? 'APS'\n              : key == 'FirstCollectionDate'\n              ? 'MDT'\n              : key == 'FirstPaymentDate'\n              ? 'MDT'\n              : key == 'FirstInterestCollectionDate'\n              ? 'MDT'\n              : key == 'PoolCloseDate'\n              ? 'MDT'\n              : key == 'LiquidatedDate'\n              ? 'MDT'\n              : key == 'RevolvingPeriodEnd'\n              ? 'RPE'\n              : key == 'RevolvingPeriodStart'\n              ? 'RPS'\n              : '';\n          if(key === 'LiquidatedDate') {\n            if(data[key]) data[key] = data[key].S2Date();\n          }\n          if (String(data[key]).indexOf('-') > 3) {\n            timeData.push({\n              name: keyName,\n              time: data[key],\n              size: new Date(data[key]).getTime(),\n              className: className\n            });\n          }\n        });\n        if (res[1] && res[1].length) {\n          for (var i = 0; i < res[1].length; i++) {\n            timeData.push({\n              name: res[1][i].TitleName,\n              time: res[1][i].EndDate.S2Date(),\n              size: new Date(res[1][i].EndDate.S2Date()).getTime(),\n              className: 'MDT'\n            });\n          }\n        }\n\n        var objectArraySort = function(keyName) {\n          return function(objectN, objectM) {\n            var valueN = objectN[keyName];\n            var valueM = objectM[keyName];\n            if (valueN < valueM) return 1;\n            else if (valueN > valueM) return -1;\n            else return 0;\n          };\n        };\n        timeData.sort(objectArraySort('size'));\n        //console.log(timeData)\n        var map = {},\n          dest = [],\n          arr = timeData;\n        for (var i = 0; i < arr.length; i++) {\n          var ai = arr[i];\n          if (!map[ai.size]) {\n            dest.push({\n              size: ai.size,\n              name: ai.name,\n              time: ai.time,\n              className: ai.className,\n              data: [ai]\n            });\n            map[ai.size] = ai;\n          } else {\n            for (var j = 0; j < dest.length; j++) {\n              var dj = dest[j];\n              if (dj.size == ai.size) {\n                dj.data.push(ai);\n                break;\n              }\n            }\n          }\n        }\n        dest = dest.reverse();\n        //console.log(dest)\n        for (var i = 0; i < dest.length; i++) {\n          dest[i].emCN = '';\n          dest[i].data.forEach(item => {\n            var cn = item.className;\n            if (cn && cn != '') {\n              dest[i].emCN += cn + ' ';\n            }\n            var cnli = item.className + 'li';\n            dest[i].className = dest[i].className\n              .replace('APS', '')\n              .replace('APE', '')\n              .replace('RPS', '')\n              .replace('RPE', '');\n            dest[i].className += ' ' + cnli + ' ';\n          });\n        }\n        this.periodData = dest;\n        console.log(this.periodData);\n        this.$nextTick(() => {\n          var start = document.getElementsByClassName('APS')[0] ? document.getElementsByClassName('APS')[0].getAttribute('dataIndex') : 0;\n          var end = document.getElementsByClassName('APE')[0] ? document.getElementsByClassName('APE')[0].getAttribute('dataIndex') : 0;\n          var lid = document.getElementsByClassName('liLen');\n          console.log(lid);\n          var length = 0;\n          var borderRightLen = 0;\n          for (var i = 0; i < lid.length; i++) {\n            if (i > start && i < end) {\n              length += lid[i].clientHeight;\n            }\n            if (i == start || i == end) {\n              length += lid[i].clientHeight / 2;\n            }\n            if (i > 0 && i < lid.length - 1) {\n              borderRightLen += lid[i].clientHeight;\n            }\n            if (i == 0 || i == lid.length - 1) {\n              borderRightLen += lid[i].clientHeight / 2;\n            }\n          }\n          if (document.getElementsByClassName('BRLen')[0]) {\n            document.getElementsByClassName('BRLen')[0].style.height = borderRightLen + 'px';\n            document.getElementsByClassName('BRLen')[0].style.top = lid[0].clientHeight / 2 + 'px';\n          }\n          console.log(length);\n          if (document.getElementsByClassName('APL')[0]) {\n            document.getElementsByClassName('APL')[0].style.height = length + 'px';\n          }\n          var start1 = document.getElementsByClassName('RPS')[0] ? document.getElementsByClassName('RPS')[0].getAttribute('dataIndex') : 0;\n          var end1 = document.getElementsByClassName('RPE')[0] ? document.getElementsByClassName('RPE')[0].getAttribute('dataIndex') : 0;\n          console.log(start1, end1);\n          var lid1 = document.getElementsByClassName('liLen');\n          var length1 = 0;\n          for (var i = 0; i < lid1.length; i++) {\n            if (i > start1 && i < end1) {\n              length1 += lid1[i].clientHeight;\n            }\n            if (i == start1 || i == end1) {\n              length1 += lid1[i].clientHeight / 2;\n            }\n          }\n\n          if (document.getElementsByClassName('RPL')[0]) {\n            document.getElementsByClassName('RPL')[0].style.height = length1 + 'px';\n          }\n        });\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#Dates {\n  position: relative;\n  .BRLen {\n    position: absolute;\n    left: 180px;\n    width: 1px;\n    border-right: 1px solid #d0d3e0;\n  }\n  ul {\n    padding-left: 180px;\n    width: 100%;\n    max-width: 900px;\n    li {\n      width: 100%;\n      display: inline-block;\n      padding: 10px;\n      // background-color: $--color-grey-background;\n      // margin-bottom: 20px;\n      border-radius: 5px;\n      display: flex;\n      min-height: 80px;\n      position: relative;\n      padding-left: 46px;\n      padding-right: 40px;\n      &:nth-child(1) {\n        em {\n          border-top: none !important;\n        }\n      }\n      em {\n        display: inline-block;\n        position: absolute;\n        width: 150px;\n        right: 100%;\n        border: 1px dashed #d0d3e0;\n        border-right: none;\n        border-left: none;\n        border-bottom: none;\n        top: 50%;\n        font-style: normal;\n        color: #444;\n        padding-left: 5px;\n        &:before {\n          display: inline-block;\n          content: '';\n          position: absolute;\n          right: -4px;\n          top: -4px;\n          width: 8px;\n          height: 8px;\n          border-radius: 8px;\n        }\n        &:after {\n          display: inline-block;\n          content: '';\n          position: absolute;\n          right: -4px;\n          bottom: -4px;\n          width: 8px;\n          height: 8px;\n          border-radius: 8px;\n        }\n        &.RPL {\n          &:before,\n          &:after {\n            background-color: #3245bf;\n            box-shadow: 0 0 0 5px rgba(152, 165, 249, 0.45);\n            z-index: 3;\n          }\n          &:after {\n            background-color: rgba(50, 69, 191, 0.8);\n          }\n          // border-color: $--color-primary;\n          span {\n            position: absolute;\n            top: 38%;\n            display: inline-block;\n            width: 70%;\n            left: 5px;\n            color: $--color-primary;\n            text-align: center;\n            b {\n              color: #444;\n              font-size: 15px;\n              display: block;\n              line-height: 25px;\n            }\n          }\n        }\n        &.APL {\n          &:before,\n          &:after {\n            background-color: #e25d0f;\n            box-shadow: 0 0 0 5px rgba(235, 170, 131, 0.45);\n            z-index: 2;\n          }\n          // border-color: $--color-orange;\n          span {\n            position: absolute;\n            top: 38%;\n            display: inline-block;\n            width: 70%;\n            left: 5px;\n            color: $--color-orange;\n            text-align: center;\n            b {\n              color: #444;\n              font-size: 15px;\n              display: block;\n              line-height: 25px;\n            }\n          }\n        }\n      }\n      &:after {\n        display: inline-block;\n        content: '';\n        position: absolute;\n        width: 6px;\n        height: 6px;\n        border-radius: 6px;\n        top: 50%;\n        right: -3px;\n        margin-top: -3px;\n      }\n      &.MDTli {\n        .iconfont {\n          color: #acacac;\n        }\n        &:after {\n          background-color: #acacac;\n        }\n      }\n      &.RPSli {\n        .iconfont {\n          color: $--color-primary;\n        }\n        &:after {\n          background-color: $--color-primary;\n        }\n      }\n      &.APSli,\n      &.APEli {\n        .iconfont {\n          color: $--color-orange;\n        }\n        &:after {\n          background-color: $--color-orange;\n        }\n      }\n      &.RPEli {\n        .iconfont {\n          color: $--color-primary;\n        }\n        &:after {\n          background-color: $--color-primary;\n        }\n      }\n\n      &:before {\n        display: inline-block;\n        content: '';\n        width: 100%;\n        height: 1px;\n        border-top: 1px dashed #d0d3e0;\n        position: absolute;\n        top: 50%;\n        left: 0;\n      }\n      .time {\n        text-align: center;\n        flex: 0 0 135px;\n        position: relative;\n        &:before {\n          display: inline-block;\n          content: '';\n          width: 8px;\n          height: 8px;\n          border-radius: 8px;\n          background-color: #acacac;\n          position: absolute;\n          top: 50%;\n          left: -50px;\n          margin-top: -3px;\n          z-index: 1;\n        }\n        span {\n          display: inline-block;\n          width: 100%;\n          line-height: 25px;\n          border-radius: 15px;\n          border: 1px solid #d0d3e0;\n          color: #444;\n          font-weight: bold;\n          position: absolute;\n          top: 50%;\n          left: 0;\n          background-color: #fff;\n          font-size: 14px;\n          margin-top: -14px;\n          i {\n            margin-right: 5px;\n          }\n        }\n      }\n      .text {\n        flex: 1;\n        padding-left: 20px;\n        font-size: 13px;\n        > span {\n          display: block;\n          width: 100%;\n          text-align: right;\n        }\n        .textspan {\n          display: inline-block;\n          color: #444;\n          text-align: right;\n          width: 100%;\n          position: relative;\n          margin: 3px 0;\n          > span {\n            display: inline-block;\n            min-width: 100px;\n            text-align: center;\n            border-radius: 15px;\n            line-height: 25px;\n            background-color: #fff;\n          }\n          &.APS,\n          &.APE {\n            > span {\n              background-color: $--color-orange;\n            }\n          }\n          &.RPS,\n          &.RPE {\n            > span {\n              background-color: $--color-primary;\n            }\n          }\n          &.APS,\n          &.APE,\n          &.RPS,\n          &.RPE {\n            position: relative;\n            color: #fff;\n          }\n        }\n      }\n    }\n  }\n}\n#mainContent2 {\n  height: 500px;\n}\n.fc-day-grid-container {\n  height: 100% !important;\n}\n</style>\n"],"sourceRoot":"src/views/product"}]}