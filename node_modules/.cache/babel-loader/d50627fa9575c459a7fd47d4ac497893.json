{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\utils\\jsonp.js","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\utils\\jsonp.js","mtime":1604281047049},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["/**\n * Callback index.\n */\nvar count = 0;\n/**\n * Noop function.\n */\n\nfunction noop() {}\n/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - prefix {String} qs parameter (`__jp`)\n *  - name {String} qs parameter (`prefix` + incr)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */\n\n\nexport default function jsonp(url, opts, fn) {\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n\n  if (!opts) opts = {};\n  var prefix = opts.prefix || '__jp'; // use the callback name that was passed if one was provided.\n  // otherwise generate a unique name by incrementing our counter.\n\n  var id = opts.name || prefix + count++;\n  var param = opts.param || 'callback';\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\n  var enc = encodeURIComponent;\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script;\n  var timer;\n\n  if (timeout) {\n    timer = setTimeout(function () {\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup() {\n    if (script.parentNode) script.parentNode.removeChild(script);\n    window[id] = noop;\n    if (timer) clearTimeout(timer);\n  }\n\n  function cancel() {\n    if (window[id]) {\n      cleanup();\n    }\n  }\n\n  window[id] = function (data) {\n    cleanup();\n    if (fn) fn(null, data);\n  }; // add qs component\n\n\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?'); // create script\n\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n  return cancel;\n}",{"version":3,"sources":["C:/Users/yif_z/Desktop/DealViewer/src/utils/jsonp.js"],"names":["count","noop","jsonp","url","opts","fn","prefix","id","name","param","timeout","enc","encodeURIComponent","target","document","getElementsByTagName","head","script","timer","setTimeout","cleanup","Error","parentNode","removeChild","window","clearTimeout","cancel","data","indexOf","replace","createElement","src","insertBefore"],"mappings":"AAAA;AACA;AACA;AAEA,IAAIA,KAAK,GAAG,CAAZ;AAEA;AACA;AACA;;AAEA,SAASC,IAAT,GAAe,CAAE;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAe,SAASC,KAAT,CAAeC,GAAf,EAAoBC,IAApB,EAA0BC,EAA1B,EAA6B;AAC1C,MAAI,cAAc,OAAOD,IAAzB,EAA+B;AAC7BC,IAAAA,EAAE,GAAGD,IAAL;AACAA,IAAAA,IAAI,GAAG,EAAP;AACD;;AACD,MAAI,CAACA,IAAL,EAAWA,IAAI,GAAG,EAAP;AAEX,MAAIE,MAAM,GAAGF,IAAI,CAACE,MAAL,IAAe,MAA5B,CAP0C,CAS1C;AACA;;AACA,MAAIC,EAAE,GAAGH,IAAI,CAACI,IAAL,IAAcF,MAAM,GAAIN,KAAK,EAAtC;AAEA,MAAIS,KAAK,GAAGL,IAAI,CAACK,KAAL,IAAc,UAA1B;AACA,MAAIC,OAAO,GAAG,QAAQN,IAAI,CAACM,OAAb,GAAuBN,IAAI,CAACM,OAA5B,GAAsC,KAApD;AACA,MAAIC,GAAG,GAAGC,kBAAV;AACA,MAAIC,MAAM,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,KAA8CD,QAAQ,CAACE,IAApE;AACA,MAAIC,MAAJ;AACA,MAAIC,KAAJ;;AAGA,MAAIR,OAAJ,EAAa;AACXQ,IAAAA,KAAK,GAAGC,UAAU,CAAC,YAAU;AAC3BC,MAAAA,OAAO;AACP,UAAIf,EAAJ,EAAQA,EAAE,CAAC,IAAIgB,KAAJ,CAAU,SAAV,CAAD,CAAF;AACT,KAHiB,EAGfX,OAHe,CAAlB;AAID;;AAED,WAASU,OAAT,GAAkB;AAChB,QAAIH,MAAM,CAACK,UAAX,EAAuBL,MAAM,CAACK,UAAP,CAAkBC,WAAlB,CAA8BN,MAA9B;AACvBO,IAAAA,MAAM,CAACjB,EAAD,CAAN,GAAaN,IAAb;AACA,QAAIiB,KAAJ,EAAWO,YAAY,CAACP,KAAD,CAAZ;AACZ;;AAED,WAASQ,MAAT,GAAiB;AACf,QAAIF,MAAM,CAACjB,EAAD,CAAV,EAAgB;AACda,MAAAA,OAAO;AACR;AACF;;AAEDI,EAAAA,MAAM,CAACjB,EAAD,CAAN,GAAa,UAASoB,IAAT,EAAc;AACzBP,IAAAA,OAAO;AACP,QAAIf,EAAJ,EAAQA,EAAE,CAAC,IAAD,EAAOsB,IAAP,CAAF;AACT,GAHD,CAxC0C,CA6C1C;;;AACAxB,EAAAA,GAAG,IAAI,CAAC,CAACA,GAAG,CAACyB,OAAJ,CAAY,GAAZ,CAAD,GAAoB,GAApB,GAA0B,GAA3B,IAAkCnB,KAAlC,GAA0C,GAA1C,GAAgDE,GAAG,CAACJ,EAAD,CAA1D;AACAJ,EAAAA,GAAG,GAAGA,GAAG,CAAC0B,OAAJ,CAAY,IAAZ,EAAkB,GAAlB,CAAN,CA/C0C,CAiD1C;;AACAZ,EAAAA,MAAM,GAAGH,QAAQ,CAACgB,aAAT,CAAuB,QAAvB,CAAT;AACAb,EAAAA,MAAM,CAACc,GAAP,GAAa5B,GAAb;AACAU,EAAAA,MAAM,CAACS,UAAP,CAAkBU,YAAlB,CAA+Bf,MAA/B,EAAuCJ,MAAvC;AAEA,SAAOa,MAAP;AACD","sourcesContent":["/**\n * Callback index.\n */\n\nlet count = 0;\n\n/**\n * Noop function.\n */\n\nfunction noop(){}\n\n/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - prefix {String} qs parameter (`__jp`)\n *  - name {String} qs parameter (`prefix` + incr)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */\n\nexport default function jsonp(url, opts, fn){\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n  if (!opts) opts = {};\n\n  let prefix = opts.prefix || '__jp';\n\n  // use the callback name that was passed if one was provided.\n  // otherwise generate a unique name by incrementing our counter.\n  let id = opts.name || (prefix + (count++));\n\n  let param = opts.param || 'callback';\n  let timeout = null != opts.timeout ? opts.timeout : 60000;\n  let enc = encodeURIComponent;\n  let target = document.getElementsByTagName('script')[0] || document.head;\n  let script;\n  let timer;\n\n\n  if (timeout) {\n    timer = setTimeout(function(){\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup(){\n    if (script.parentNode) script.parentNode.removeChild(script);\n    window[id] = noop;\n    if (timer) clearTimeout(timer);\n  }\n\n  function cancel(){\n    if (window[id]) {\n      cleanup();\n    }\n  }\n\n  window[id] = function(data){\n    cleanup();\n    if (fn) fn(null, data);\n  };\n\n  // add qs component\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?');\n\n  // create script\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n\n  return cancel;\n}\n"]}]}