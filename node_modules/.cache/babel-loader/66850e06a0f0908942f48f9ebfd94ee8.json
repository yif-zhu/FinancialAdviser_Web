{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\ProductDoc.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\ProductDoc.vue","mtime":1604281047867},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport fsvc from '@/api/FileService';\nimport ItemBox from '@/components/layout/ItemBox.vue';\nimport { addClass, removeClass } from '@/utils/dom.js';\nexport default {\n  data: function data() {\n    return {\n      productDetail: {},\n      docList: [],\n      docListDeepCopy: [],\n      filterValue: ''\n    };\n  },\n  components: {\n    ItemBox: ItemBox\n  },\n  created: function created() {\n    this.productDetail = JSON.parse(sessionStorage.getItem(\"productDetail\"));\n    this.initProductDoc();\n  },\n  computed: {\n    TrustID: function TrustID() {\n      return this.$store.state.productInfo.trustId;\n    }\n  },\n  watch: {\n    filterValue: function filterValue(v) {\n      this.docList = JSON.parse(JSON.stringify(this.docListDeepCopy));\n\n      if (v.trim() != '') {\n        for (var i = 0; i < this.docList.length; i++) {\n          this.docList[i].children = this.docList[i].children.filter(function (item) {\n            if (item.FileName.indexOf(v) > -1) {\n              return item;\n            }\n          });\n        }\n      }\n    }\n  },\n  methods: {\n    initProductDoc: function initProductDoc() {\n      var self = this;\n      var svc = this.$http('PortfolioManagement', 'DV.TrustAssociatedDocs_Get');\n      svc.AddParam({\n        Name: 'TrustID',\n        Value: self.TrustID,\n        DBType: 'int'\n      });\n      svc.ExecTables().then(function (res) {\n        for (var i = 0; i < res[0].length; i++) {\n          res[0][i].FileName = res[0][i].FileCategoryName;\n          res[0][i].children = [];\n\n          for (var ii = 0; ii < res[1].length; ii++) {\n            res[1][ii].icon = 'iconfont icon-folder-open';\n\n            if (res[1][ii].FileCategory == res[0][i].FileCategory) {\n              res[0][i].children.push(res[1][ii]);\n            }\n          }\n        }\n\n        self.docList = JSON.parse(JSON.stringify(res[0]));\n        self.docListDeepCopy = JSON.parse(JSON.stringify(res[0]));\n      });\n    },\n    downLoadFile: function downLoadFile(file) {\n      fsvc.DownLoadFileByPath(file.FilePath + file.FileName, file.FileName, 1);\n    },\n    clearFilter: function clearFilter() {\n      this.filterValue = '';\n    },\n    foldFun: function foldFun(index) {\n      var dis = document.getElementsByClassName('file' + index)[0].style.display;\n      var iconD = document.getElementsByClassName('icon' + index)[0];\n\n      if (dis == 'none') {\n        document.getElementsByClassName('file' + index)[0].style.display = 'block';\n        removeClass(iconD, 'icon-zhankaisvg');\n        addClass(iconD, 'icon-zhankai2');\n      } else {\n        document.getElementsByClassName('file' + index)[0].style.display = 'none';\n        addClass(iconD, 'icon-zhankaisvg');\n        removeClass(iconD, 'icon-zhankai2');\n      }\n    }\n  }\n};",{"version":3,"sources":["ProductDoc.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"detailPage productDoc\">\n    <ItemBox title=\"文件下载\">\n    <div class=\"filterBox\">\n    \t<el-input  size=\"mini\" v-model=\"filterValue\" placeholder=\"请输入关键词搜索相关文档\"></el-input>\n    \t<i class=\"iconfont icon-cha8\" v-show=\"filterValue.trim() != ''\" @click=\"clearFilter\" title=\"清空筛选\"></i>\n    </div>\n      <ul class=\"report\">\n        <li v-for=\"(item,index) in docList\">\n        \t<p @click=\"foldFun(index)\">{{item.FileCategoryName}}<span><i class=\"iconfont icon-zhankai2\" :class=\"'icon'+index\"></i></span></p>\n          <ul class=\"file\" :class=\"'file'+index\">\n            <li v-for=\"file in item.children\" >\n              <span class=\"text\" @click=\"downLoadFile(file)\">{{file.FileName}}</span>\n              <el-button  size=\"mini\" icon=\"el-icon-download\" title=\"下载文件\" round @click=\"downLoadFile(file)\"></el-button>\n            </li>\n            <li v-if=\"item.children.length<1\">\n            \t<span class=\"hint\">暂无数据</span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </ItemBox>\n\t</div>\n</template>\n\n<script>\n\timport fsvc from '@/api/FileService';\n  import ItemBox from '@/components/layout/ItemBox.vue';\n  import {addClass,removeClass} from '@/utils/dom.js'\nexport default{\n\tdata() {\n\t\treturn {\n\t\t\tproductDetail:{},\n\t\t\tdocList:[],\n\t\t\tdocListDeepCopy:[],\n\t\t\tfilterValue:''\n\t\t}\n\t},\n  components:{\n    ItemBox\n  },\n\tcreated(){\n\t\tthis.productDetail = JSON.parse(sessionStorage.getItem(\"productDetail\"));\n\t\tthis.initProductDoc()\n\t},\n\tcomputed: {\n    TrustID() {\n      return this.$store.state.productInfo.trustId;\n    }\n  },\n  watch:{\n  \tfilterValue(v) {\n  \t\tthis.docList = JSON.parse(JSON.stringify(this.docListDeepCopy))\n  \t\tif (v.trim() != '') {\n  \t\t\tfor (var i = 0; i < this.docList.length; i++) {\n\t  \t\t\tthis.docList[i].children = this.docList[i].children.filter((item) => {\n\t  \t\t\t\tif (item.FileName.indexOf(v)>-1) {\n\t  \t\t\t\t\treturn item\n\t  \t\t\t\t}\n\t  \t\t\t})\n\t  \t\t}\n  \t\t}\n  \t}\n  },\n\tmethods:{\n\t\tinitProductDoc(){\n\t\t\tvar self = this;\n\t\t\tvar svc = this.$http('PortfolioManagement', 'DV.TrustAssociatedDocs_Get');\n\t\t\tsvc.AddParam({ Name: 'TrustID', Value: self.TrustID, DBType: 'int' });\n\t\t\tsvc.ExecTables().then(res =>{\n\t\t\t\tfor (var i = 0; i < res[0].length; i++) {\n\t\t\t\t    res[0][i].FileName = res[0][i].FileCategoryName\n\t\t\t\t    res[0][i].children = []\n\t\t\t\t    for (var ii = 0; ii < res[1].length; ii++) {\n\t\t\t\t        res[1][ii].icon = 'iconfont icon-folder-open'\n\t\t\t\t        if (res[1][ii].FileCategory == res[0][i].FileCategory) {\n\t\t\t\t            res[0][i].children.push(res[1][ii])\n\t\t\t\t        }\n\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t\tself.docList = JSON.parse(JSON.stringify(res[0]))\n\t\t\t\tself.docListDeepCopy = JSON.parse(JSON.stringify(res[0]))\n\t\t\t})\n\t\t},\n\t\tdownLoadFile(file){\n\t\t\tfsvc.DownLoadFileByPath(file.FilePath + file.FileName, file.FileName, 1)\n\t\t},\n\t\tclearFilter() {\n\t\t\tthis.filterValue = ''\n\t\t},\n\t\tfoldFun(index) {\n\t\t\tvar dis = document.getElementsByClassName('file'+index)[0].style.display\n\t\t\tvar iconD = document.getElementsByClassName('icon'+index)[0]\n\t\t\tif (dis == 'none') {\n\t\t\t\tdocument.getElementsByClassName('file'+index)[0].style.display = 'block'\n\t\t\t\tremoveClass(iconD,'icon-zhankaisvg')\n\t\t\t\taddClass(iconD,'icon-zhankai2')\n\t\t\t}else{\n\t\t\t\tdocument.getElementsByClassName('file'+index)[0].style.display = 'none'\n\t\t\t\taddClass(iconD,'icon-zhankaisvg')\n\t\t\t\tremoveClass(iconD,'icon-zhankai2')\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.productDoc{\n\t.report{\n\t\tline-height: 30px;\n\t\tli{\n\t\t\tcolor: $--color-grey;\n\t\t\tfont-size: 13px;\n\t\t\tp{\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t\t.file{\n\t\t\tpadding-left: 15px;\n\t\t\tline-height: 30px;\n\t\t\tli{\n\t\t\t\tcolor: $--color-black;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tspan.text{\n\t\t\t\t\tmargin-right: 20px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.el-button--mini.is-round{\n\t\tpadding: 5px;\n\t}\n\t.hint{\n\t\tfont-size: 12px;\n\t\tcolor: #a0a0a0;\n\t}\n}\n.filterBox{\n\tposition: relative;\n\tdisplay: inline-block;\n\t.el-input__inner{\n\t\twidth: 400px;\n\t\tborder-radius: 20px;\n\t\tbackground-color: #f5f5f5;\n\t}\n\ti{\n\t\tposition: absolute;\n\t\ttop: 7px;\n\t\tright: 10px;\n\t\tcolor: #c7c7c7;\n\t\tcursor: pointer;\n\t}\n}\n\n</style>\n"],"sourceRoot":"src/views/product"}]}