{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\DynamicTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\DynamicTab.vue","mtime":1604281046033},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { createNamespacedHelpers } from 'vuex';\n\nvar _createNamespacedHelp = createNamespacedHelpers('dynamicTabs'),\n    mapState = _createNamespacedHelp.mapState,\n    mapMutations = _createNamespacedHelp.mapMutations;\n\nexport default {\n  name: \"DynamicTab\",\n  data: function data() {\n    return {\n      activeIndex: ''\n    };\n  },\n  created: function created() {\n    this.setAllTabs();\n  },\n  mounted: function mounted() {\n    this.activeIndex = this.currentTabIndex;\n    var self = this;\n    var _beforeUnload_time = 0,\n        _gap_time = 0;\n    var is_fireFox = navigator.userAgent.indexOf(\"Firefox\") > -1;\n    window.addEventListener('unload', function (e) {\n      _gap_time = new Date().getTime() - _beforeUnload_time;\n\n      if (_gap_time <= 5) {\n        console.log('sx11');\n        self.removeAllTabs();\n        self.removeCacheTabs();\n      }\n    });\n    window.addEventListener('beforeunload', function () {\n      _beforeUnload_time = new Date().getTime();\n\n      if (is_fireFox) {\n        //火狐关闭执行\n        console.log('sx22');\n        self.removeAllTabs();\n        self.removeCacheTabs();\n      }\n    });\n  },\n  computed: _objectSpread({}, mapState(['tabs', 'currentTab', 'currentTabIndex'])),\n  watch: {\n    currentTabIndex: function currentTabIndex(v) {\n      if (v !== '' && v !== this.activeIndex) {\n        this.activeIndex = v;\n      }\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapMutations(['removeTab', 'setCurrentTab', 'setCurrentTabIndex', 'setCacheTabs', 'setAllTabs', 'removeAllTabs', 'removeCacheTabs'])), {}, {\n    handleRemove: function handleRemove(id) {\n      this.removeTab(id);\n      this.$router.push(this.currentTab);\n      this.setCacheTabs();\n    },\n    handleClick: function handleClick(tab) {\n      this.setCurrentTabIndex(tab.name); // 利用element一个多余的参数来挂载一些数据 （不知道未来会不会被干掉）\n\n      var currentTab = tab.labelContent();\n      console.log(currentTab);\n      this.setCurrentTab(currentTab);\n\n      if (currentTab.title) {\n        this.$title(currentTab.title);\n        this.$router.push(JSON.parse(JSON.stringify(currentTab)));\n        console.log(JSON.parse(JSON.stringify(currentTab)));\n      }\n    }\n  }),\n  destroyed: function destroyed() {\n    this.removeAllTabs();\n    this.removeCacheTabs();\n  }\n};",{"version":3,"sources":["DynamicTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAiBA,SAAA,uBAAA,QAAA,MAAA;;4BACA,uBAAA,CAAA,aAAA,C;IAAA,Q,yBAAA,Q;IAAA,Y,yBAAA,Y;;AACA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,WAAA,EAAA;AADA,KAAA;AAAA,GAFA;AAKA,EAAA,OALA,qBAKA;AACA,SAAA,UAAA;AACA,GAPA;AAQA,EAAA,OARA,qBAQA;AACA,SAAA,WAAA,GAAA,KAAA,eAAA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,QAAA,kBAAA,GAAA,CAAA;AAAA,QAAA,SAAA,GAAA,CAAA;AACA,QAAA,UAAA,GAAA,SAAA,CAAA,SAAA,CAAA,OAAA,CAAA,SAAA,IAAA,CAAA,CAAA;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,UAAA,CAAA,EAAA;AACA,MAAA,SAAA,GAAA,IAAA,IAAA,GAAA,OAAA,KAAA,kBAAA;;AACA,UAAA,SAAA,IAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,QAAA,IAAA,CAAA,aAAA;AACA,QAAA,IAAA,CAAA,eAAA;AACA;AACA,KAPA;AAQA,IAAA,MAAA,CAAA,gBAAA,CAAA,cAAA,EAAA,YAAA;AACA,MAAA,kBAAA,GAAA,IAAA,IAAA,GAAA,OAAA,EAAA;;AACA,UAAA,UAAA,EAAA;AAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,QAAA,IAAA,CAAA,aAAA;AACA,QAAA,IAAA,CAAA,eAAA;AACA;AAEA,KARA;AASA,GA9BA;AA+BA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,MAAA,EAAA,YAAA,EAAA,iBAAA,CAAA,CADA,CA/BA;AAkCA,EAAA,KAAA,EAAA;AACA,IAAA,eADA,2BACA,CADA,EACA;AACA,UAAA,CAAA,KAAA,EAAA,IAAA,CAAA,KAAA,KAAA,WAAA,EAAA;AACA,aAAA,WAAA,GAAA,CAAA;AACA;AACA;AALA,GAlCA;AAyCA,EAAA,OAAA,kCACA,YAAA,CAAA,CACA,WADA,EAEA,eAFA,EAGA,oBAHA,EAIA,cAJA,EAKA,YALA,EAMA,eANA,EAOA,iBAPA,CAAA,CADA;AAUA,IAAA,YAVA,wBAUA,EAVA,EAUA;AACA,WAAA,SAAA,CAAA,EAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,KAAA,UAAA;AACA,WAAA,YAAA;AACA,KAdA;AAeA,IAAA,WAfA,uBAeA,GAfA,EAeA;AAEA,WAAA,kBAAA,CAAA,GAAA,CAAA,IAAA,EAFA,CAGA;;AACA,UAAA,UAAA,GAAA,GAAA,CAAA,YAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA;AACA,WAAA,aAAA,CAAA,UAAA;;AACA,UAAA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,MAAA,CAAA,UAAA,CAAA,KAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,UAAA,CAAA,CAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,UAAA,CAAA,CAAA;AACA;AACA;AA3BA,IAzCA;AAsEA,EAAA,SAtEA,uBAsEA;AACA,SAAA,aAAA;AACA,SAAA,eAAA;AACA;AAzEA,CAAA","sourcesContent":["<template>\n  <el-tabs class=\"dynamic-tab\"\n           v-model=\"activeIndex\"\n           @tab-remove=\"handleRemove\"\n           @tab-click=\"handleClick\"\n           type=\"card\">\n    <el-tab-pane v-for=\"item in tabs\"\n                 :key=\"item.id\"\n                 :label=\"item.title\"\n                 :labelContent=\"()=>(item)\"\n                 :name=\"item.id\"\n                 :closable=\"item.closable\">\n    </el-tab-pane>\n  </el-tabs>\n</template>\n\n<script>\n  import { createNamespacedHelpers } from 'vuex';\n  const { mapState, mapMutations } = createNamespacedHelpers('dynamicTabs');\n  export default {\n    name: \"DynamicTab\",\n    data: () => ({\n      activeIndex: ''\n    }),\n    created() {\n      this.setAllTabs();\n    },\n    mounted() {\n      this.activeIndex  = this.currentTabIndex;\n      var self = this;\n      var _beforeUnload_time = 0, _gap_time = 0;\n      var is_fireFox = navigator.userAgent.indexOf(\"Firefox\")>-1;\n      window.addEventListener('unload', e => {\n        _gap_time = new Date().getTime() - _beforeUnload_time\n        if(_gap_time <= 5) {\n          console.log('sx11')\n          self.removeAllTabs();\n          self.removeCacheTabs();\n        }\n      })\n      window.addEventListener('beforeunload',() => {\n        _beforeUnload_time = new Date().getTime()\n        if(is_fireFox) {//火狐关闭执行\n          console.log('sx22')\n          self.removeAllTabs();\n          self.removeCacheTabs();\n        }\n\n      });\n    },\n    computed: {\n      ...mapState(['tabs', 'currentTab', 'currentTabIndex'])\n    },\n    watch: {\n      currentTabIndex(v) {\n        if(v !== '' && v !== this.activeIndex) {\n          this.activeIndex = v;\n        }\n      }\n    },\n    methods: {\n      ...mapMutations([\n        'removeTab',\n        'setCurrentTab',\n        'setCurrentTabIndex',\n        'setCacheTabs',\n        'setAllTabs',\n        'removeAllTabs',\n        'removeCacheTabs',\n      ]),\n      handleRemove(id) {\n        this.removeTab(id);\n        this.$router.push(this.currentTab);\n        this.setCacheTabs();\n      },\n      handleClick(tab) {\n\n        this.setCurrentTabIndex(tab.name);\n        // 利用element一个多余的参数来挂载一些数据 （不知道未来会不会被干掉）\n        let currentTab = tab.labelContent();\n        console.log(currentTab)\n        this.setCurrentTab(currentTab);\n        if(currentTab.title) {\n          this.$title(currentTab.title);\n          this.$router.push(JSON.parse(JSON.stringify(currentTab)));\n          console.log(JSON.parse(JSON.stringify(currentTab)))\n        }\n      },\n    },\n    destroyed() {\n      this.removeAllTabs();\n      this.removeCacheTabs();\n    }\n  };\n</script>\n<style lang=\"scss\">\n  .dynamic-tab{\n    position: absolute;\n    width: 100%;\n    top: 5px;\n    .el-tabs__nav{\n      border-radius: 2px!important;\n    }\n    // left: 10px;\n    .el-tabs__nav-scroll{\n      // background-color: #172374;\n    }\n    &.el-tabs--card > .el-tabs__header{\n      border:none;\n    }\n    .el-tabs__nav-next, .el-tabs__nav-prev{\n      line-height: 30px;\n    }\n    .el-tabs__nav.is-top>div{\n\n      color: #fff;\n    }\n    .el-tabs__header.is-top {\n      margin: 0;\n    }\n    &.el-tabs--card > .el-tabs__header .el-tabs__item.is-active,\n    &.el-tabs--card > .el-tabs__header .el-tabs__item.is-active.is-closable{\n      background-color:#d6b06e;\n      border-bottom: none;\n      color: #fff;\n    }\n    &.el-tabs--card > .el-tabs__header .el-tabs__nav{\n      border:none;\n      overflow: hidden;\n    }\n    .el-tabs__nav.is-top{\n      height: 30px;\n      line-height: 30px;\n      background-color: #4b569c;\n    }\n    .el-tabs__nav.is-top > div{\n      // border-bottom: 2px solid #5264d9;\n      height: 30px;\n      line-height: 30px;\n      border-left: none!important;\n      font-size: 12px;\n      color: rgba(255, 255, 255, .8);\n      &:hover{\n        color: #fff;\n      }\n    }\n    /*.el-tabs__nav.is-top > div:nth-child(1){*/\n      /*border-top-left-radius: 0;*/\n    /*}*/\n\n  }\n</style>\n"],"sourceRoot":"src/components/common"}]}