{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\DisposalDdefault.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\DisposalDdefault.vue","mtime":1604281047661},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import ItemBox from '@/components/layout/ItemBox.vue';\n  export default {\n    data() {\n      return {\n\t\t\t\tCurrentPeriodAr: []\n      }\n    },\n    created() {\n      this.initFactPayment();\n    },\n    components:{\n      ItemBox\n    },\n    computed: {\n      TrustID() {\n        return this.$store.state.productInfo.trustId;\n      }\n    },\n    methods: {\n      initFactPayment() {\n        var self = this;\n        var svc = this.$http('PortfolioManagement', 'DV.usp_GetDisposalStatusByTrustId');\n        svc.AddParam({\n          Name: 'TrustID',\n          Value: self.TrustID,\n          DBType: 'int'\n        });\n        svc.ExecTable().then(res => {\n          if (res.length < 1) {\n            return\n          }\n          var obj = {}\n          for (var i = 0; i < res.length; i++) {\n            res[i].key = i+1;\n            obj[res[i].PaymentPeriod] = res[i].PaymentPeriod\n          }\n\n          for(var a in obj) {\n            var data = []\n            for (var i = 0; i < res.length; i++) {\n              if (Number(res[i].PaymentPeriod) == Number(a)) {\n                data.push(res[i])\n              }\n            }\n            var itemD = data[0]\n            itemD.children = data.slice(1)\n\n            this.CurrentPeriodAr.push(itemD)\n            console.log(this.CurrentPeriodAr)\n          }\n        })\n      },\n      stateFormat(row, column, cellValue) {\n        if(cellValue == null){\n          return ''\n        }else{\n          cellValue += \"\";\n          if (!cellValue.includes(\".\")) cellValue += \".\";\n          return cellValue\n            .replace(/(\\d)(?=(\\d{3})+\\.)/g, function($0, $1) {\n              return $1 + \",\";\n            })\n            .replace(/\\.$/, \"\");\n        }\n      },\t\n    }\n  }\n\n",{"version":3,"sources":["DisposalDdefault.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DisposalDdefault.vue","sourceRoot":"src/views/product","sourcesContent":["<template>\r\n  <div class=\"detailPage\">\r\n    <ItemBox title=\"违约处置状态分布\">\r\n      <el-table :data=\"CurrentPeriodAr\" size=\"mini\" v-if=\"CurrentPeriodAr.length>0\"  row-key=\"key\">\r\n        <el-table-column prop=\"PaymentPeriod\" label=\"期数\" >\r\n        </el-table-column>\r\n        <el-table-column prop=\"Disposal_status\" label=\"各处置状态\" >\r\n        </el-table-column>\r\n        <el-table-column prop=\"CustomerCount\" label=\"户数\" >\r\n        </el-table-column>\r\n        <el-table-column prop=\"Proportion\" label=\"占比（%）\" >\r\n        </el-table-column>\r\n        <el-table-column prop=\"Initial_Amount\" :formatter=\"stateFormat\" label=\"期初本息余额\" >\r\n        </el-table-column>\r\n      </el-table>\r\n    </ItemBox>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ItemBox from '@/components/layout/ItemBox.vue';\r\n  export default {\r\n    data() {\r\n      return {\r\n\t\t\t\tCurrentPeriodAr: []\r\n      }\r\n    },\r\n    created() {\r\n      this.initFactPayment();\r\n    },\r\n    components:{\r\n      ItemBox\r\n    },\r\n    computed: {\r\n      TrustID() {\r\n        return this.$store.state.productInfo.trustId;\r\n      }\r\n    },\r\n    methods: {\r\n      initFactPayment() {\r\n        var self = this;\r\n        var svc = this.$http('PortfolioManagement', 'DV.usp_GetDisposalStatusByTrustId');\r\n        svc.AddParam({\r\n          Name: 'TrustID',\r\n          Value: self.TrustID,\r\n          DBType: 'int'\r\n        });\r\n        svc.ExecTable().then(res => {\r\n          if (res.length < 1) {\r\n            return\r\n          }\r\n          var obj = {}\r\n          for (var i = 0; i < res.length; i++) {\r\n            res[i].key = i+1;\r\n            obj[res[i].PaymentPeriod] = res[i].PaymentPeriod\r\n          }\r\n\r\n          for(var a in obj) {\r\n            var data = []\r\n            for (var i = 0; i < res.length; i++) {\r\n              if (Number(res[i].PaymentPeriod) == Number(a)) {\r\n                data.push(res[i])\r\n              }\r\n            }\r\n            var itemD = data[0]\r\n            itemD.children = data.slice(1)\r\n\r\n            this.CurrentPeriodAr.push(itemD)\r\n            console.log(this.CurrentPeriodAr)\r\n          }\r\n        })\r\n      },\r\n      stateFormat(row, column, cellValue) {\r\n        if(cellValue == null){\r\n          return ''\r\n        }else{\r\n          cellValue += \"\";\r\n          if (!cellValue.includes(\".\")) cellValue += \".\";\r\n          return cellValue\r\n            .replace(/(\\d)(?=(\\d{3})+\\.)/g, function($0, $1) {\r\n              return $1 + \",\";\r\n            })\r\n            .replace(/\\.$/, \"\");\r\n        }\r\n      },\t\r\n    }\r\n  }\r\n\r\n</script>"]}]}