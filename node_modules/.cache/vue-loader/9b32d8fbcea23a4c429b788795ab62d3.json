{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\ReportFilter.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\ReportFilter.vue","mtime":1604662764339},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$--load-color: #e1e3ef;\n$--load-living-color: #e6e8f5;\n\n/* 数据加载 占位显示效果 */\n\n.loading {\n  background-color: $--load-color;\n}\n.max-width{\n  max-width: 300px;\n}\n",{"version":3,"sources":["ReportFilter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ReportFilter.vue","sourceRoot":"src/components/common","sourcesContent":["<style lang=\"scss\" scoped>\n.advance-filter {\n  height: 100%;\n  border-right: 1px solid $--color-grey-border;\n  &-header {\n    height: 39px;\n    line-height: 39px;\n    border-bottom: 1px solid $--color-grey-border;\n    .left{\n\n      i{\n        font-size: 14px;\n        margin-right: 5px;\n        color: $--color-primary;\n      }\n    }\n  }\n\n  .condition{\n    line-height: 20px;\n    font-size: 12px;\n  }\n  .clear-condition{\n    font-size: 12px;\n  }\n  .filter-button {\n    font-weight: 500;\n    color: #777;\n    padding: 0;\n\n    i.icon-searchlist {\n      font-size: 25px;\n      vertical-align: -4px;\n    }\n\n    &.is-unfold,\n    &:hover {\n      color: $--color-primary;\n    }\n  }\n\n  &-body{\n    padding: 10px 10px 10px 20px;\n    padding-left: 0;\n    font-size: 12px;\n    height: calc(100% - 47px);\n    overflow: auto;\n    padding-right: 0;\n\n    /deep/ >.el-scrollbar {\n      height: 100%;\n      .el-scrollbar__wrap {\n        overflow-x: hidden;\n      }\n    }\n  }\n\n  .chosen-fields {\n    display: inline-block;\n    margin-bottom: 10px;\n    margin-right: 10px;\n    background-color: #fff;\n    border:1px solid $--color-grey-light;\n    color: $--color-primary;\n    border-radius: 3px;\n    font-size: 12px;\n    position: relative;\n    padding-right: 22px;\n    &:hover{\n      border-color: $--color-primary;\n      .field-remove{\n        background-color: $--color-primary;\n        color: #fff;\n\n      }\n    }\n    .field-titles {\n      margin-right: 5px;\n      display: inline-block;\n      padding: 3px 0 3px 10px;\n      .title{\n        color: $--color-black;\n      }\n    }\n\n    .field-remove {\n      display: inline-block;\n      height: 100%;\n      cursor: pointer;\n      padding:0 5px;\n      position: absolute;\n      top: 0;right: -1px;\n      line-height: 26px;\n    }\n  }\n\n  .filter-condition-row {\n    margin-bottom: 5px;\n    padding-right: 15px;\n    &:last-child {\n      border-bottom: none;\n      padding-bottom: 0;\n      margin-bottom: 0;\n    }\n  }\n\n  .filter-label {\n    min-width: 100px;\n    font-weight: bold;\n    color: $--color-black;\n    margin-bottom: 10px;\n  }\n\n  .filter-title {\n    font-weight: 500;\n    font-size: 16px;\n    color: grey;\n    /*$--color-gray;*/\n    display: inline-block;\n    margin-right: 10px;\n  }\n\n  .filter-tag {\n    height: 26px;\n    line-height: 24px;\n    margin: 0 10px 5px 0;\n    padding: 0 10px;\n    border-color: $--color-grey-border;\n    border-radius: 3px;\n    color: $--color-grey;\n\n    &:hover {\n      border-color: $--color-primary;\n      color: $--color-primary;\n      cursor: pointer;\n    }\n\n    &.active {\n      border-color: $--color-primary;\n      color: #fff;\n      background-color: $--color-primary;\n    }\n  }\n\n  .more{\n    margin-top: 5px;\n    margin-right: 8px;\n  }\n\n  .spea-center{\n    text-align: center;\n    line-height: 26px;\n  }\n\n}\n\n.loading-preload{\n  width: 35%;\n  height: 20px;\n  margin-bottom: 10px;\n  border-radius: 2px;\n  &:nth-child(2) {\n    width: 60%;\n  }\n  &:nth-child(3) {\n    width: 42%;\n  }\n}\n.date-interval{\n  /deep/ .el-input--suffix .el-input__inner{\n    padding-right: 10px;\n  }\n}\n</style>\n<style lang=\"scss\">\n$--load-color: #e1e3ef;\n$--load-living-color: #e6e8f5;\n\n/* 数据加载 占位显示效果 */\n\n.loading {\n  background-color: $--load-color;\n}\n.max-width{\n  max-width: 300px;\n}\n</style>\n\n<template>\n  <div class=\"advance-filter\">\n    <div class=\"advance-filter-header\">\n      <span class=\"left\"><i class=\"iconfont icon-shaixuan\"></i>筛选条件</span>\n    </div>\n    <div class=\"advance-filter-body\">\n      <el-scrollbar>\n        <template v-if=\"fields.length > 0\">\n          <div class=\"filter-condition-row\">\n            <div class=\"text-center line\"  style=\"font-weight: bold;color: rgba(0,0,0,0.85); margin: 5px 0 10px 0;\">报告名称</div>\n            <el-input v-model=\"bondCode\" size=\"mini\" @change=\"handleSearch\"\n                      clearable placeholder=\"请输入报告名称\"></el-input>\n\n            <div class=\"filter-label text-ellipsis\">企业名称</div>\n            <el-select size=\"mini\" v-model=\"industy\" popper-class=\"max-width\" style=\"width: 100%;\" filterable @change=\"handleSearch\">\n              <el-option label=\"全部\" value=\"0\"></el-option>\n              <el-option v-for=\"(option, index) in fields\" :label=\"option.report_end_date\" :value=\"option.report_end_date\" :key=\"index\"></el-option>\n            </el-select>\n            <div class=\"filter-label text-ellipsis\">所属经营机构</div>\n            <el-select size=\"mini\" v-model=\"organ\" popper-class=\"max-width\" style=\"width: 100%;\" filterable @change=\"handleSearch\">\n              <el-option label=\"全部\" value=\"0\"></el-option>\n              <el-option v-for=\"(option, index) in fields\" :label=\"option.report_end_date\" :value=\"option.report_end_date\" :key=\"index\"></el-option>\n            </el-select>\n            <div class=\"filter-label text-ellipsis\">报告日期</div>\n            <el-select size=\"mini\" v-model=\"reportDate\" popper-class=\"max-width\" style=\"width: 100%;\" filterable @change=\"handleSearch\">\n              <el-option label=\"全部\" value=\"0\"></el-option>\n              <el-option v-for=\"(option, index) in fields\" :label=\"option.report_end_date\" :value=\"option.report_end_date\" :key=\"index\"></el-option>\n            </el-select>\n          </div>\n        </template>\n        <template v-else>\n          <!--数据加载效果-->\n          <div class=\"loading-preload loading\"></div>\n          <div class=\"loading-preload loading\"></div>\n          <div class=\"loading-preload loading\"></div>\n        </template>\n      </el-scrollbar>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"EnterpriseFilter\",\n  props: {\n    conName: String,\n    templateName: String\n  },\n  data: () => ({\n    advanceFilterUnfold: false,\n    fields: [],\n    conditionAr:[],\n    removeShow:false,\n    bondCode:'',\n    industy:'',\n    organ:'',\n    reportDate:'',\n  }),\n  mounted() {\n\n  },\n  created() {\n    this.filterOptions = []\n    this.tooglePanel()\n  },\n  methods: {\n    compareDate(s1, s2){\n      if(s1.indexOf('-') > 0) {\n        s1 = s1.replace(/-/g,\"\\/\");\n      }else if(!/\\/|-/.test(s1)) {\n        s1 = s1.slice(0, 4) + '/' + s1.slice(4,6) + '/' + s1.slice(6,8);\n      }\n      if(s2.indexOf('-') > 0) {\n        s2 = s2.replace(/-/g,\"\\/\");\n      }else if(!/\\/|-/.test(s2)) {\n        s2 = s2.slice(0, 4) + '/' + s2.slice(4,6) + '/' + s2.slice(6,8);\n      }\n      return ((new Date(s1)) > (new Date(s2)));\n    },\n    loadFiledsAndInit() {\n      if (this.conName === undefined || this.templateName === undefined) {\n        return;\n      }\n      var svc = this.$http(this.conName, this.conName+'.usp_GetUserInfoById', true);\n      svc.AddParam({\n        Name: 'userid',\n        Value: '20001001',\n        DBType: 'string'\n      });\n      svc.ExecTables().then((response) => {\n        if (!response || response.length < 1) {\n          return;\n        }\n        this.fields = JSON.parse(response.Data);\n      });\n    },\n    formatUIValueChange(field) {\n      var chosenTitles = [];\n      for (var i = 0, length = field.Options.length; i < length; i++) {\n        var option = field.Options[i];\n        if (option.Value) {\n          //var title = option.Text ? '{0} {1}'.Format(option.Text, option.Value) : option.Value;\n          chosenTitles.push(option.Value);\n          option.Chosen = true;\n        } else {\n          option.Chosen = false;\n        }\n      }\n      field.ChosenTitles = chosenTitles;\n      this.handleSearch()\n    },\n    tooglePanel() {\n      this.advanceFilterUnfold = !this.advanceFilterUnfold;\n      if (this.$parent.isOpenFilter !== undefined) {\n        this.$parent.isOpenFilter = this.advanceFilterUnfold;\n      }\n      if (this.advanceFilterUnfold &&\n        this.fields.length === 0 &&\n        this.filterOptions.length === 0) {\n\n        this.loadFiledsAndInit();\n      }\n    },\n    handleSearch() {\n      let ary = [];\n      if (this.bondCode.length >0){\n        ary.push(` TrustCode Like N'%{0}%'`.Format(this.bondCode))\n        // this.conditionAr.FitterCode = 'TrustCode'\n        // this.conditionAr.Fitter = 'like'\n        // this.conditionAr.Value = this.bondCode\n      }\n      if (this.industy != '0' && this.industy.length >0){\n        ary.push(` TrustName = N'{0}'`.Format(this.industy))\n        // this.conditionAr.FitterCode = 'TrustName'\n        // this.conditionAr.Fitter = '='\n        // this.conditionAr.Value = this.industy\n      }\n      if (this.organ != '0' && this.organ.length >0){\n        ary.push(` TrustNameShort = N'{0}'`.Format(this.organ))\n        // this.conditionAr.FitterCode = 'TrustNameShort'\n        // this.conditionAr.Fitter = '='\n        // this.conditionAr.Value = this.organ\n      }\n      if (this.reportDate != '0' && this.reportDate.length >0){\n        ary.push(` TrustStartDate = N'{0}'`.Format(this.reportDate))\n        // this.conditionAr.FitterCode = 'TrustStartDate'\n        // this.conditionAr.Fitter = '='\n        // this.conditionAr.Value = this.organ\n      }\n      this.$emit('handleSearch', ary.join(' and '));\n      // // this.advanceFilterUnfold = false;\n      if (this.$parent.isOpenFilter !== undefined) {\n        this.$parent.isOpenFilter = false;\n      }\n      // this.$emit('handleSearchCon',this.conditionAr,this.removeShow)\n    },\n    // 刷新数据\n    refresh() {\n      this.loadFiledsAndInit();\n    }\n  },\n};\n\n</script>\n"]}]}