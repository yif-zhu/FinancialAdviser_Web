{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\Detail.vue","mtime":1604281047661},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapState, mapMutations} from 'vuex';\nimport TaskProcess from \"@/api/TaskProcess\";\nimport dataGrid from '@/components/common/DataGrid.vue';\nimport { BasePath } from '@/utils/config.js';\nexport default {\n  data() {\n    return {\n      listOrder: 'ItemId asc,TrustStartDate asc',\n      listFilter:'',\n      checkedData:[],\n      tableAssetS:false,\n      searchProduct:'',\n      // 为华泰客户环境\n      IS_HUATAI: process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'huatai',\n      IS_XIAOMI: process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'xiaomi',\n      aflodS:true\n    }\n  },\n  components: {\n    dataGrid,\n  },\n  created() {\n    this.getTrustDetail();\n  },\n  mounted() {\n    this.handleScroll()\n  },\n  computed:{\n    ...mapState('productInfo',['productDetail']),\n    trustId() {\n      return this.$route.params.id;\n    },\n    AssetType() {\n      console.log(this.productDetail)\n      return this.productDetail.AssetType\n    },\n\n  },\n  watch:{\n    $route(to,from){\n      this.handleScroll()\n    },\n  },\n  beforeRouteUpdate(to,from,next) {\n    var box = document.getElementsByClassName('contentBox')[0]\n    if (to.name == 'AssetPoolDistributions') {\n      box.addEventListener('scroll', this.$refs.assetPooldisRou.listenerFun,true)\n    }else{\n      console.log('remove')\n      box.removeEventListener(\"scroll\", this.$refs.assetPooldisRou.listenerFun, true);\n    }\n    next()\n  },\n  methods:{\n    ...mapMutations('productInfo',['setProductDetail', 'setTrustId']),\n    doListSortChange(orderBy) {\n      this.listOrder = orderBy ? orderBy : 'TrustId desc';\n    },\n    rowClassName ({row, index}) {\n      return row.TrustId == this.productDetail.TrustId ? 'noShow' : '';\n    },\n    disabledSelect(row, index) {\n      return row.TrustId == this.productDetail.TrustId ? false : true;\n    },\n    //选中产品\n    selectionChange(data){\n      console.log(data)\n      this.checkedData = data\n\n    },\n    row_key(row) {\n      //console.log(row)\n      return row.TrustId\n    },\n    // 对比工具\n    compareTrust() {\n      let trustIds = `${this.productDetail.TrustId}`;\n      for (var i = 0; i < this.checkedData.length; i++) {\n        trustIds += ','+this.checkedData[i].TrustId\n      }\n      window.open(BasePath +`QuickCompare/#/Compare/?trustids=${trustIds}&module=DealViewer`)\n      //console.log(trustIds)\n    },\n    tableAssetFun() {\n      this.listFilter = `AssetType=N'${this.productDetail.AssetType}'`\n      this.tableAssetS = !this.tableAssetS;\n    },\n    searchProductFun(v) {\n      let nameSearch = `and (TrustName like N'%${v}%' or TrustNameShort like N'%${v}%')`;\n      if (v !== '') {\n        this.listFilter += nameSearch\n      }else{\n        this.listFilter = `AssetType=N'${this.productDetail.AssetType}'`\n      }\n    },\n    backProductList() {\n      this.$router.push('/Product/ProductList')\n    },\n    handleScroll () {\n      this.$nextTick(() => {\n        var box = document.getElementsByClassName('contentBox')[0]\n        if (document.getElementsByClassName('assetPooldis')[0]) {\n          box.addEventListener('scroll', this.$refs.assetPooldisRou.listenerFun,true)\n        }else{\n          box.removeEventListener(\"scroll\", this.$refs.assetPooldisRou.listenerFun, true);\n        }\n      })\n    },\n    productRemarksReport(){\n      let trustId = this.trustId\n      if(this.AssetType == 'NPL'){\n        let tpi = new TaskProcess('Task', 'ExportNonProductRemakes',\"TaskProcess\");\n        tpi.AddVariableItem('TrustID', trustId, 'String');\n        var msg = this.$message({\n          showClose: true,\n          duration:0,\n          message: '正在下载产品备注报告，可能需要几分钟...'\n        });\n        tpi.RunTask(()=>{\n          msg.close();\n          let eleLink = document.createElement('a');\n          eleLink.download =\"产品备注报告.xlsx\";\n          eleLink.style.display = 'none';\n          eleLink.href= BasePath +\"FileBaseFolder/VerifyStressedCashflow/Output/产品备注报告.xlsx\";\n          document.body.appendChild(eleLink);\n          eleLink.click();\n          document.body.removeChild(eleLink);\n        });\n      }else{\n        let tpi = new TaskProcess(\"Task\", 'ExportProductRemakes', \"TaskProcess\")\n        tpi.AddVariableItem('TrustID', trustId, 'String');\n        var msg = this.$message({\n          showClose: true,\n          duration:0,\n          message: '正在下载产品备注报告，可能需要几分钟...'\n        });\n        tpi.RunTask(()=>{\n          msg.close();\n          let eleLink = document.createElement('a');\n          eleLink.download =\"产品备注报告.xlsx\";\n          eleLink.style.display = 'none';\n          eleLink.href= BasePath +\"FileBaseFolder/VerifyStressedCashflow/Output/产品备注报告.xlsx\";\n          document.body.appendChild(eleLink);\n          eleLink.click();\n          document.body.removeChild(eleLink);\n        });\n      }\n    },\n    exportTrust() {\n      let trustId=this.trustId\n      let callApi = this.$http('TaskProcess', 'Task.initTaskStatusByTrustId',1);\n      callApi.AddParam({ Name: 'trustId', Value: trustId, DBType: 'int' });\n      callApi.ExecResult().then(res =>{});\n      let tpi = new TaskProcess(\"Task\", 'FixedIncomeSuite_TrustInfoExport', \"TaskProcess\")\n      tpi.AddVariableItem('TrustId', trustId, 'String');\n      tpi.ShowIndicator(() => {\n        let svc = this.$http('TaskProcess', 'Task.checkTaskStatusByTrustId',1);\n        svc.AddParam({ Name: 'trustId', Value: trustId, DBType: 'int' });\n        svc.ExecTable().then(res =>{\n            if (res.length == 0) {\n              return\n            }\n            if (res[0].Status == \"1\") {\n              let filePath = BasePath +\"TrustManagementService/TrustImportAndExportModel/QuickDeal_TrustInfoImportAndExportModel_\" + trustId + \".xml\";\n              let filename = 'QuickDeal_TrustInfoImportAndExportModel_' + trustId + '.xml'\n              let link = document.createElement('a');\n              link.download = filename;\n              link.style.display = 'none';\n              link.href = filePath;\n              document.body.appendChild(link);\n              link.click();\n              document.body.removeChild(link);\n            }\n          })\n        })\n    },\n    getTrustDetail() {\n      var self = this;\n      let trustId = Number(self.trustId);\n      this.setTrustId(trustId);\n      var svc = this.$http('PortfolioManagement', 'DV.TrustInfo_Get');\n      svc.AddParam({ Name: 'TrustID', Value: trustId, DBType: 'int' });\n      svc.ExecTable().then(res=> {\n        console.log(res)\n        this.setProductDetail(res[0]);\n        this.$title(res[0].TrustName);\n\n      })\n    },\n  }\n}\n",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/product","sourcesContent":["<template>\n  <div class=\"productDetail\">\n    <div class=\"baseInfo\">\n      <p class=\"text\">\n        <span class=\"name\"><i class=\"iconfont icon-biaoqian\" style=\"color:#5264D9;margin-right:5px;\"></i>{{this.productDetail.TrustName}}</span>\n        <span>资产类型：<b> {{this.productDetail.AssetTypeName}}</b></span>\n        <span>发行金额（元）：<b> {{this.productDetail.IssueAmount?this.productDetail.IssueAmount.toLocaleString():this.productDetail.IssueAmount}}</b></span>\n        <span>发行日期：<b> {{this.productDetail.TrustStartDate}}</b></span>\n        <!--<span class=\"fr datatate\">数据截止 20190509</span>-->\n      </p>\n      <el-popover\n        placement=\"bottom\"\n        title=\"\"\n        width=\"400\"\n        height=\"400\"\n        trigger=\"manual\"\n        v-model=\"tableAssetS\">\n        <data-grid :showFilter=\"true\" conName=\"PortfolioManagement\" tableName=\"DV.view_Products\" height=\"400\" v-if=\"tableAssetS\"\n        ref=\"refDataGrid\" isFixed :order=\"listOrder\" @sortChange=\"doListSortChange\" :pageSize=\"100\" :trustId=\"trustId\"\n        :filter=\"listFilter\" :needUserName=\"true\"  @selectionChange=\"selectionChange\" :multiSelection=\"true\" :row-key=\"row_key\" :row-class-name=\"rowClassName\">\n        <template slot=\"toolbar-filter\">\n          <el-input v-model=\"searchProduct\" placeholder=\"请输入关键字检索\" clearable size=\"mini\" style=\"width:50%;\" @change=\"searchProductFun\"></el-input>\n        </template>\n        <template slot=\"toolbar-right\">\n          <el-button type=\"primary\" plain size=\"mini\" :disabled=\"checkedData.length<1\" @click=\"compareTrust\"><i\n              class=\"el-icon-c-scale-to-original mr-5\" style=\"font-size:13px;\" ></i>对比选择产品</el-button>\n        </template>\n        <template slot=\"table-column\">\n          <el-table-column type=\"selection\" width=\"50\" :reserve-selection=\"true\" :selectable=\"disabledSelect\"></el-table-column>\n          <el-table-column prop=\"TrustNameShort\" label=\"简称\" sortable=\"custom\" fixed width=\"160\"\n            :show-overflow-tooltip=\"true\">\n            <template slot-scope=\"{row}\">\n              <router-link :to=\"'Detail/' + row.TrustId\" class=\"link\" target=\"_blank\"\n                :title=\"row.TrustNameShort\">\n                {{row.TrustNameShort}}\n              </router-link>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"AssetTypeName\" label=\"资产分类\" width=\"140\">\n          </el-table-column>\n        </template>\n      </data-grid>\n        <el-button slot=\"reference\" size=\"mini\" type=\"primary\"  style=\"position: absolute;right: 255px;top: 13px;\" @click=\"tableAssetFun\"><i class=\"el-icon-c-scale-to-original\" style=\"margin-right:5px;\"></i>产品对比</el-button>\n      </el-popover>\n\n      <el-button  size=\"mini\" type=\"primary\" @click=\"productRemarksReport\" plain style=\"position: absolute;right: 120px;top: 13px;\"><i class=\"iconfont icon-xiazai1\" style=\"margin-right:5px;\"></i>产品备注报告</el-button>\n      <el-button  size=\"mini\" type=\"primary\" @click=\"exportTrust\" plain style=\"position: absolute;right: 10px;top: 13px;\"><i class=\"iconfont icon-xiazai1\" style=\"margin-right:5px;\"></i>产品导出</el-button>\n    </div>\n    <div class=\"contentBox\">\n      <div class=\"contentBoxMain\">\n        <ul class=\"leftMenu\" :class=\"!aflodS?'noShow':''\">\n        <li>\n          <el-button size=\"mini\" style=\"width: 100%\" @click=\"backProductList\">\n            <i class=\"iconfont icon-fanhui\" style=\"margin-right:5px;font-size:13px;\"></i>返回产品列表\n          </el-button>\n        </li>\n        <li class=\"title\"><span>产品数据</span></li>\n        <li>\n          <router-link to=\"ProductInformation\">基础信息\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link to=\"SecuritiesInformation\">证券信息\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link to=\"productDates\">日期信息\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link to=\"ProductDoc\">关联文档\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link to=\"PaymentHistory\">兑付记录\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li v-if=\"!IS_XIAOMI\">\n          <router-link to=\"productMix\">产品结构\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n       <!--  <li>\n          <router-link to=\"FeeSettings\">产品费用\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link to=\"PaymentSequenceSetting\">偿付顺序\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li> -->\n        <li>\n          <router-link to=\"StressTesting\">压力测试\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li class=\"title\"><span>资产数据</span></li>\n        <li>\n          <router-link :to=\"'AssetPoolDistributions?CurrentPeriod='+productDetail.CurrentPeriod\">统计和分布\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link :to=\"'PaymentSchedule?CurrentPeriod='+productDetail.CurrentPeriod\">现金流归集\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link to=\"FactAssetPoolPayment\">还款记录\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li v-if=\"AssetType == 'NPL'\">\n          <router-link to=\"CashInFlow\">现金流流入\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li v-if=\"AssetType == 'NPL'\">\n          <router-link to=\"AssetPoolInflow\">现金流流入情况\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li v-if=\"AssetType == 'NPL'\">\n          <router-link to=\"DisposalDdefault\">违约处置状态\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li v-if=\"AssetType == 'NPL'\">\n          <router-link to=\"WorkingCapital\">流动性机构提供支持情况\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li>\n          <router-link to=\"cprcdrcrr\">产品曲线\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li v-if=\"productDetail.TrustStatus === '已清算'\">\n          <router-link to=\"liquidated\">清算报告数据\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n        <li class=\"title\"><span>产品路演</span></li>\n        <li>\n          <router-link to=\"ProductRoadShow\">推介材料\n            <i class=\"iconfont icon-arr-left\"></i></router-link>\n        </li>\n      </ul>\n      <div class=\"rightRouter\">\n        <i class=\"iconfont icon-Group- aflod\" @click=\"aflodS = !aflodS\" :class=\"!aflodS?'noShow':''\" :title=\"!aflodS?'展开左侧菜单':'收起左侧菜单'\"></i>\n        <keep-alive>\n          <router-view ref=\"assetPooldisRou\"></router-view>\n        </keep-alive>\n      </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapState, mapMutations} from 'vuex';\nimport TaskProcess from \"@/api/TaskProcess\";\nimport dataGrid from '@/components/common/DataGrid.vue';\nimport { BasePath } from '@/utils/config.js';\nexport default {\n  data() {\n    return {\n      listOrder: 'ItemId asc,TrustStartDate asc',\n      listFilter:'',\n      checkedData:[],\n      tableAssetS:false,\n      searchProduct:'',\n      // 为华泰客户环境\n      IS_HUATAI: process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'huatai',\n      IS_XIAOMI: process.env.VUE_APP_CUSTOMER && process.env.VUE_APP_CUSTOMER === 'xiaomi',\n      aflodS:true\n    }\n  },\n  components: {\n    dataGrid,\n  },\n  created() {\n    this.getTrustDetail();\n  },\n  mounted() {\n    this.handleScroll()\n  },\n  computed:{\n    ...mapState('productInfo',['productDetail']),\n    trustId() {\n      return this.$route.params.id;\n    },\n    AssetType() {\n      console.log(this.productDetail)\n      return this.productDetail.AssetType\n    },\n\n  },\n  watch:{\n    $route(to,from){\n      this.handleScroll()\n    },\n  },\n  beforeRouteUpdate(to,from,next) {\n    var box = document.getElementsByClassName('contentBox')[0]\n    if (to.name == 'AssetPoolDistributions') {\n      box.addEventListener('scroll', this.$refs.assetPooldisRou.listenerFun,true)\n    }else{\n      console.log('remove')\n      box.removeEventListener(\"scroll\", this.$refs.assetPooldisRou.listenerFun, true);\n    }\n    next()\n  },\n  methods:{\n    ...mapMutations('productInfo',['setProductDetail', 'setTrustId']),\n    doListSortChange(orderBy) {\n      this.listOrder = orderBy ? orderBy : 'TrustId desc';\n    },\n    rowClassName ({row, index}) {\n      return row.TrustId == this.productDetail.TrustId ? 'noShow' : '';\n    },\n    disabledSelect(row, index) {\n      return row.TrustId == this.productDetail.TrustId ? false : true;\n    },\n    //选中产品\n    selectionChange(data){\n      console.log(data)\n      this.checkedData = data\n\n    },\n    row_key(row) {\n      //console.log(row)\n      return row.TrustId\n    },\n    // 对比工具\n    compareTrust() {\n      let trustIds = `${this.productDetail.TrustId}`;\n      for (var i = 0; i < this.checkedData.length; i++) {\n        trustIds += ','+this.checkedData[i].TrustId\n      }\n      window.open(BasePath +`QuickCompare/#/Compare/?trustids=${trustIds}&module=DealViewer`)\n      //console.log(trustIds)\n    },\n    tableAssetFun() {\n      this.listFilter = `AssetType=N'${this.productDetail.AssetType}'`\n      this.tableAssetS = !this.tableAssetS;\n    },\n    searchProductFun(v) {\n      let nameSearch = `and (TrustName like N'%${v}%' or TrustNameShort like N'%${v}%')`;\n      if (v !== '') {\n        this.listFilter += nameSearch\n      }else{\n        this.listFilter = `AssetType=N'${this.productDetail.AssetType}'`\n      }\n    },\n    backProductList() {\n      this.$router.push('/Product/ProductList')\n    },\n    handleScroll () {\n      this.$nextTick(() => {\n        var box = document.getElementsByClassName('contentBox')[0]\n        if (document.getElementsByClassName('assetPooldis')[0]) {\n          box.addEventListener('scroll', this.$refs.assetPooldisRou.listenerFun,true)\n        }else{\n          box.removeEventListener(\"scroll\", this.$refs.assetPooldisRou.listenerFun, true);\n        }\n      })\n    },\n    productRemarksReport(){\n      let trustId = this.trustId\n      if(this.AssetType == 'NPL'){\n        let tpi = new TaskProcess('Task', 'ExportNonProductRemakes',\"TaskProcess\");\n        tpi.AddVariableItem('TrustID', trustId, 'String');\n        var msg = this.$message({\n          showClose: true,\n          duration:0,\n          message: '正在下载产品备注报告，可能需要几分钟...'\n        });\n        tpi.RunTask(()=>{\n          msg.close();\n          let eleLink = document.createElement('a');\n          eleLink.download =\"产品备注报告.xlsx\";\n          eleLink.style.display = 'none';\n          eleLink.href= BasePath +\"FileBaseFolder/VerifyStressedCashflow/Output/产品备注报告.xlsx\";\n          document.body.appendChild(eleLink);\n          eleLink.click();\n          document.body.removeChild(eleLink);\n        });\n      }else{\n        let tpi = new TaskProcess(\"Task\", 'ExportProductRemakes', \"TaskProcess\")\n        tpi.AddVariableItem('TrustID', trustId, 'String');\n        var msg = this.$message({\n          showClose: true,\n          duration:0,\n          message: '正在下载产品备注报告，可能需要几分钟...'\n        });\n        tpi.RunTask(()=>{\n          msg.close();\n          let eleLink = document.createElement('a');\n          eleLink.download =\"产品备注报告.xlsx\";\n          eleLink.style.display = 'none';\n          eleLink.href= BasePath +\"FileBaseFolder/VerifyStressedCashflow/Output/产品备注报告.xlsx\";\n          document.body.appendChild(eleLink);\n          eleLink.click();\n          document.body.removeChild(eleLink);\n        });\n      }\n    },\n    exportTrust() {\n      let trustId=this.trustId\n      let callApi = this.$http('TaskProcess', 'Task.initTaskStatusByTrustId',1);\n      callApi.AddParam({ Name: 'trustId', Value: trustId, DBType: 'int' });\n      callApi.ExecResult().then(res =>{});\n      let tpi = new TaskProcess(\"Task\", 'FixedIncomeSuite_TrustInfoExport', \"TaskProcess\")\n      tpi.AddVariableItem('TrustId', trustId, 'String');\n      tpi.ShowIndicator(() => {\n        let svc = this.$http('TaskProcess', 'Task.checkTaskStatusByTrustId',1);\n        svc.AddParam({ Name: 'trustId', Value: trustId, DBType: 'int' });\n        svc.ExecTable().then(res =>{\n            if (res.length == 0) {\n              return\n            }\n            if (res[0].Status == \"1\") {\n              let filePath = BasePath +\"TrustManagementService/TrustImportAndExportModel/QuickDeal_TrustInfoImportAndExportModel_\" + trustId + \".xml\";\n              let filename = 'QuickDeal_TrustInfoImportAndExportModel_' + trustId + '.xml'\n              let link = document.createElement('a');\n              link.download = filename;\n              link.style.display = 'none';\n              link.href = filePath;\n              document.body.appendChild(link);\n              link.click();\n              document.body.removeChild(link);\n            }\n          })\n        })\n    },\n    getTrustDetail() {\n      var self = this;\n      let trustId = Number(self.trustId);\n      this.setTrustId(trustId);\n      var svc = this.$http('PortfolioManagement', 'DV.TrustInfo_Get');\n      svc.AddParam({ Name: 'TrustID', Value: trustId, DBType: 'int' });\n      svc.ExecTable().then(res=> {\n        console.log(res)\n        this.setProductDetail(res[0]);\n        this.$title(res[0].TrustName);\n\n      })\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.productDetail{\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  padding-left:0;\n  border-radius: 3px;\n  position: relative;\n  height: 100%;\n  .baseInfo{\n    padding: 10px 20px;\n    position: relative;\n    background: #f1f2fb url(\"../../assets/images/info-bg.jpg\") no-repeat center;\n    border-bottom: 1px solid #e6e9f0;\n\n    .text{\n      margin:10px 0;\n      span{\n        margin-right: 20px;\n        color: #444;\n        font-size: 12px;\n        &.name{\n          font-size: 15px;\n          font-weight: bold;\n          border-right: 1px solid #bbb;\n          display: inline-block;\n          padding-right: 20px;\n        }\n        &.datatate{\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .contentBox{\n    flex:1;\n    background-color: #fff;\n    overflow: auto;\n    .contentBoxMain{\n      width: 100%;\n      display: flex;\n      min-height: 100%;\n    }\n    .leftMenu{\n      flex:0 0 210px;\n      background-color: #fff;\n      max-height:100%;\n      border-right: 1px solid $--color-grey-border;\n      box-shadow: #f5f9ff 1px 2px 0px 1px;\n      padding: 20px;\n      &.noShow{\n        display: none;\n      }\n      li{\n        text-align: left;\n        margin-bottom: 5px;\n        &.title{\n          padding: 10px 0;\n          color: $--color-grey;\n          font-size: 13px;\n          position: relative;\n          &:before{\n            display: inline-block;\n            content: '';\n            width: 55%;\n            height: 1px;\n            background-color:$--color-grey-border;\n            position: absolute;\n            right: 0;\n            top: 50%;\n          }\n        }\n        a{\n          display: inline-block;\n          width: 100%;\n          padding:8px 15px;\n          color: rgba($--color-black, 0.8);\n          position: relative;\n          &:hover{\n            color: $--color-black;\n          }\n          i{\n            font-size:14px;\n            position: absolute;\n            top: 9px;\n            right: 15px;\n            display: none;\n          }\n          &.router-link-exact-active.router-link-active{\n            background-color: $--color-grey-border;\n            color: $--color-black;\n            border-radius: 5px;\n            i{\n              display: inline-block;\n            }\n          }\n        }\n      }\n    }\n    .rightRouter{\n      flex:1;\n      width:0;\n      position: relative;\n      .aflod{\n        font-size: 22px;\n        color: #5264d9;\n        cursor: pointer;\n        position: absolute;\n        top: 200px;\n        left: 0;\n        font-weight: bold;\n        transform: rotate(90deg);\n        animation:move 1s infinite;\n        &.noShow{\n          transform: rotate(270deg);\n        }\n      }\n    }\n  }\n\n}\n@keyframes move\n{\n0% {opacity: 1;}\n50%{opacity: 0.2;}\n100% {opacity: 1;}\n}\n/deep/.el-table tr.noShow{\n  background-color: #ededed;\n  .link{\n    color: #bbb;\n  }\n  .cell{\n    color: #bbb;\n  }\n}\n/deep/ .tool-bar .tool-filter{\n    display: flex;\n    -webkit-box-align: center;\n    -ms-flex-align: center;\n    align-items: center;\n}\n</style>\n"]}]}