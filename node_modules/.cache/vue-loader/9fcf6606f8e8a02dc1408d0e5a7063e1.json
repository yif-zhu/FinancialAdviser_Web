{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\Pager.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\Pager.vue","mtime":1604548661873},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n\n  import {\n    mapState\n  } from 'vuex';\n  export default {\n    name: 'Pager',\n    props: {\n      conname: {\n        type: String,\n        required: true\n      },\n      procname:{\n        type: String,\n        required:true\n      },\n      tablename: {\n        type: String,\n        required: true\n      },\n      filter: {\n        type: String\n      },\n      order: {\n        type: String\n      },\n      dataloaded: {\n        type: Function,\n        required: true\n      },\n      loadingswitcher: {\n        type: Function\n      },\n      pageSize: {\n        type: Number,\n        default: 20\n      },\n\t\t\tneedUserName:{\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n      bondCode:{\n        type: String,\n        default: ''\n      },\n      trustId:{\n        type: [Number,String],\n        default: 0\n      }\n    },\n    data() {\n      return {\n        current: 1,\n        total: 0,\n        size: 0\n      };\n    },\n    computed: {\n      ...mapState(['locale']),\n\t\t\t...mapState('user',['userName']),\n    },\n    watch: {\n      filter(newValue, oldValue) {\n        if (this.loadingswitcher && typeof this.loadingswitcher === 'function') {\n          this.loadingswitcher(true);\n        }\n        this.current = 1;\n        this.getListWithPager();\n      },\n      bondCode(newValue, oldValue) {\n        if (this.loadingswitcher && typeof this.loadingswitcher === 'function') {\n          this.loadingswitcher(true);\n        }\n        this.current = 1;\n        this.getListWithPager();\n      },\n      order(newValue, oldValue) {\n        if (this.loadingswitcher && typeof this.loadingswitcher === 'function') {\n          this.loadingswitcher(true);\n        }\n        this.getListWithPager();\n      },\n      pageSize(v) {\n        this.size = v;\n      }\n    },\n    mounted() {\n      this.size = this.pageSize;\n      switch (this.procname){\n        case 'Product': this.getListWithProduct(); break;\n        case 'Industry': this.getListWithIndustry(); break;\n        case 'Report': this.getListWithReport(); break;\n        case 'User': this.getListWithUser(); break;\n        case 'Role': this.getListWithRole(); break;\n        case 'Enterprise': this.getListWithEnterprise(); break;\n        case 'Log': this.getListWithLog(); break;\n        default: this.getListWithProduct();\n      }\n    },\n    methods: {\n      getListWithProduct() {\n        var self = this;\n\n        var start = (this.current - 1) * this.size + 1;\n        var end = this.current * this.size;\n\n        var whstring = '';\n        //var whstring = \"AliasSet=N'\" + this.locale + \"'\";\n        if (this.filter) {\n          whstring += whstring ? ' and ' + this.filter : this.filter;\n        }\n\t\t\t\tvar svc='';\n\t\t\t\tif(self.needUserName){\n\t\t\t\t\tsvc = this.$http(self.conname, \"DV.GetListWithPagerAndUserName\");\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsvc = this.$http(self.conname, \"DV.GetListWithPager\");\n\t\t\t\t}\n        svc.AddParam({\n          Name: \"tableOrView\",\n          Value: self.tablename,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"start\",\n          Value: start,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"end\",\n          Value: end,\n          DBType: \"int\"\n        });\n        if (self.order) {\n          svc.AddParam({\n            Name: \"orderby\",\n            Value: self.order,\n            DBType: \"string\"\n          });\n        }\n        svc.AddParam({\n          Name: \"where\",\n          Value: whstring,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: 'total',\n          Value: '0',\n          DBType: 'int',\n          IsOutput: true,\n          Size: 100\n        });\n\t\t\t\tif(self.needUserName){\n\t\t\t\t\tsvc.AddParam({\n\t\t\t\t\t  Name: \"UserName\",\n\t\t\t\t\t  Value: self.userName,\n\t\t\t\t\t  DBType: \"string\"\n\t\t\t\t\t});\n\t\t\t\t}\n        if(self.bondCode.trim()){\n          svc.AddParam({\n            Name: \"ItemValue\",\n            Value: self.bondCode,\n            DBType: \"string\"\n          });\n        }\n        svc.ExecTable().then((ress) => {\n          if (ress) {\n            let res = {};\n            if (this.trustId) {\n              res.data = ress.data.filter((item) => {\n                return item.TrustId !== Number(this.trustId)\n              })\n              res.total = ress.total>0?ress.total - 1:ress.total\n            }else{\n              res = ress\n            }\n            //console.log(res)\n            self.total = parseInt(res.total);\n            self.dataloaded(res.data, res.total);\n            if (self.loadingswitcher && typeof self.loadingswitcher === 'function') {\n              self.loadingswitcher(false);\n            }\n            self.$emit('tableScroll')\n          }\n        });\n      },\n      getListWithIndustry() {\n        var self = this;\n\n        var start = (this.current - 1) * this.size + 1;\n        var end = this.current * this.size;\n\n        var whstring = '';\n        //var whstring = \"AliasSet=N'\" + this.locale + \"'\";\n        if (this.filter) {\n          whstring += whstring ? ' and ' + this.filter : this.filter;\n        }\n        var svc='';\n        if(self.needUserName){\n          svc = this.$http(self.conname, \"DV.GetListWithPagerAndUserName\");\n        }\n        else{\n          svc = this.$http(self.conname, \"DV.GetListWithPager\");\n        }\n        svc.AddParam({\n          Name: \"tableOrView\",\n          Value: self.tablename,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"start\",\n          Value: start,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"end\",\n          Value: end,\n          DBType: \"int\"\n        });\n        if (self.order) {\n          svc.AddParam({\n            Name: \"orderby\",\n            Value: self.order,\n            DBType: \"string\"\n          });\n        }\n        svc.AddParam({\n          Name: \"where\",\n          Value: whstring,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: 'total',\n          Value: '0',\n          DBType: 'int',\n          IsOutput: true,\n          Size: 100\n        });\n        if(self.needUserName){\n          svc.AddParam({\n            Name: \"UserName\",\n            Value: self.userName,\n            DBType: \"string\"\n          });\n        }\n        if(self.bondCode.trim()){\n          svc.AddParam({\n            Name: \"ItemValue\",\n            Value: self.bondCode,\n            DBType: \"string\"\n          });\n        }\n        svc.ExecTable().then((ress) => {\n          if (ress) {\n            let res = {};\n            if (this.trustId) {\n              res.data = ress.data.filter((item) => {\n                return item.TrustId !== Number(this.trustId)\n              })\n              res.total = ress.total>0?ress.total - 1:ress.total\n            }else{\n              res = ress\n            }\n            //console.log(res)\n            self.total = parseInt(res.total);\n            self.dataloaded(res.data, res.total);\n            if (self.loadingswitcher && typeof self.loadingswitcher === 'function') {\n              self.loadingswitcher(false);\n            }\n            self.$emit('tableScroll')\n          }\n        });\n      },\n      getListWithReport() {\n        var self = this;\n\n        var start = (this.current - 1) * this.size + 1;\n        var end = this.current * this.size;\n\n        var whstring = '';\n        //var whstring = \"AliasSet=N'\" + this.locale + \"'\";\n        if (this.filter) {\n          whstring += whstring ? ' and ' + this.filter : this.filter;\n        }\n        var svc='';\n        if(self.needUserName){\n          svc = this.$http(self.conname, \"DV.GetListWithPagerAndUserName\");\n        }\n        else{\n          svc = this.$http(self.conname, \"DV.GetListWithPager\");\n        }\n        svc.AddParam({\n          Name: \"tableOrView\",\n          Value: self.tablename,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"start\",\n          Value: start,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"end\",\n          Value: end,\n          DBType: \"int\"\n        });\n        if (self.order) {\n          svc.AddParam({\n            Name: \"orderby\",\n            Value: self.order,\n            DBType: \"string\"\n          });\n        }\n        svc.AddParam({\n          Name: \"where\",\n          Value: whstring,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: 'total',\n          Value: '0',\n          DBType: 'int',\n          IsOutput: true,\n          Size: 100\n        });\n        if(self.needUserName){\n          svc.AddParam({\n            Name: \"UserName\",\n            Value: self.userName,\n            DBType: \"string\"\n          });\n        }\n        if(self.bondCode.trim()){\n          svc.AddParam({\n            Name: \"ItemValue\",\n            Value: self.bondCode,\n            DBType: \"string\"\n          });\n        }\n        svc.ExecTable().then((ress) => {\n          if (ress) {\n            let res = {};\n            if (this.trustId) {\n              res.data = ress.data.filter((item) => {\n                return item.TrustId !== Number(this.trustId)\n              })\n              res.total = ress.total>0?ress.total - 1:ress.total\n            }else{\n              res = ress\n            }\n            //console.log(res)\n            self.total = parseInt(res.total);\n            self.dataloaded(res.data, res.total);\n            if (self.loadingswitcher && typeof self.loadingswitcher === 'function') {\n              self.loadingswitcher(false);\n            }\n            self.$emit('tableScroll')\n          }\n        });\n      },\n      getListWithUser() {\n        var self = this;\n\n        var start = (this.current - 1) * this.size + 1;\n        var end = this.current * this.size;\n\n        var whstring = '';\n        //var whstring = \"AliasSet=N'\" + this.locale + \"'\";\n        if (this.filter) {\n          whstring += whstring ? ' and ' + this.filter : this.filter;\n        }\n        var svc='';\n\n        svc = this.$http(self.conname, \"dbo.usp_GetListWithPager\");\n        svc.AddParam({\n          Name: \"tableOrView\",\n          Value: self.tablename,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"start\",\n          Value: start,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"end\",\n          Value: end,\n          DBType: \"int\"\n        });\n        if (self.order) {\n          svc.AddParam({\n            Name: \"orderby\",\n            Value: self.order,\n            DBType: \"string\"\n          });\n        }\n        svc.AddParam({\n          Name: \"where\",\n          Value: whstring,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: 'total',\n          Value: '0',\n          DBType: 'int',\n          IsOutput: true,\n          Size: 100\n        });\n        svc.ExecTable().then((ress) => {\n          if (ress) {\n            let res = {};\n            if (this.trustId) {\n              res.data = ress.data.filter((item) => {\n                return item.TrustId !== Number(this.trustId)\n              })\n              res.total = ress.total>0?ress.total - 1:ress.total\n            }else{\n              res = ress\n            }\n            //console.log(res)\n            self.total = parseInt(res.total);\n            self.dataloaded(res.data, res.total);\n            if (self.loadingswitcher && typeof self.loadingswitcher === 'function') {\n              self.loadingswitcher(false);\n            }\n            self.$emit('tableScroll')\n          }\n        });\n      },\n      getListWithRole() {\n        var self = this;\n\n        var start = (this.current - 1) * this.size + 1;\n        var end = this.current * this.size;\n\n        var whstring = '';\n        //var whstring = \"AliasSet=N'\" + this.locale + \"'\";\n        if (this.filter) {\n          whstring += whstring ? ' and ' + this.filter : this.filter;\n        }\n        var svc='';\n        if(self.needUserName){\n          svc = this.$http(self.conname, \"DV.GetListWithPagerAndUserName\");\n        }\n        else{\n          svc = this.$http(self.conname, \"DV.GetListWithPager\");\n        }\n        svc.AddParam({\n          Name: \"tableOrView\",\n          Value: self.tablename,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"start\",\n          Value: start,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"end\",\n          Value: end,\n          DBType: \"int\"\n        });\n        if (self.order) {\n          svc.AddParam({\n            Name: \"orderby\",\n            Value: self.order,\n            DBType: \"string\"\n          });\n        }\n        svc.AddParam({\n          Name: \"where\",\n          Value: whstring,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: 'total',\n          Value: '0',\n          DBType: 'int',\n          IsOutput: true,\n          Size: 100\n        });\n        if(self.needUserName){\n          svc.AddParam({\n            Name: \"UserName\",\n            Value: self.userName,\n            DBType: \"string\"\n          });\n        }\n        if(self.bondCode.trim()){\n          svc.AddParam({\n            Name: \"ItemValue\",\n            Value: self.bondCode,\n            DBType: \"string\"\n          });\n        }\n        svc.ExecTable().then((ress) => {\n          if (ress) {\n            let res = {};\n            if (this.trustId) {\n              res.data = ress.data.filter((item) => {\n                return item.TrustId !== Number(this.trustId)\n              })\n              res.total = ress.total>0?ress.total - 1:ress.total\n            }else{\n              res = ress\n            }\n            //console.log(res)\n            self.total = parseInt(res.total);\n            self.dataloaded(res.data, res.total);\n            if (self.loadingswitcher && typeof self.loadingswitcher === 'function') {\n              self.loadingswitcher(false);\n            }\n            self.$emit('tableScroll')\n          }\n        });\n      },\n      getListWithEnterprise() {\n        var self = this;\n\n        var start = (this.current - 1) * this.size + 1;\n        var end = this.current * this.size;\n\n        var whstring = '';\n        //var whstring = \"AliasSet=N'\" + this.locale + \"'\";\n        if (this.filter) {\n          whstring += whstring ? ' and ' + this.filter : this.filter;\n        }\n        var svc='';\n        if(self.needUserName){\n          svc = this.$http(self.conname, \"DV.GetListWithPagerAndUserName\");\n        }\n        else{\n          svc = this.$http(self.conname, \"DV.GetListWithPager\");\n        }\n        svc.AddParam({\n          Name: \"tableOrView\",\n          Value: self.tablename,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"start\",\n          Value: start,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"end\",\n          Value: end,\n          DBType: \"int\"\n        });\n        if (self.order) {\n          svc.AddParam({\n            Name: \"orderby\",\n            Value: self.order,\n            DBType: \"string\"\n          });\n        }\n        svc.AddParam({\n          Name: \"where\",\n          Value: whstring,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: 'total',\n          Value: '0',\n          DBType: 'int',\n          IsOutput: true,\n          Size: 100\n        });\n        if(self.needUserName){\n          svc.AddParam({\n            Name: \"UserName\",\n            Value: self.userName,\n            DBType: \"string\"\n          });\n        }\n        if(self.bondCode.trim()){\n          svc.AddParam({\n            Name: \"ItemValue\",\n            Value: self.bondCode,\n            DBType: \"string\"\n          });\n        }\n        svc.ExecTable().then((ress) => {\n          if (ress) {\n            let res = {};\n            if (this.trustId) {\n              res.data = ress.data.filter((item) => {\n                return item.TrustId !== Number(this.trustId)\n              })\n              res.total = ress.total>0?ress.total - 1:ress.total\n            }else{\n              res = ress\n            }\n            //console.log(res)\n            self.total = parseInt(res.total);\n            self.dataloaded(res.data, res.total);\n            if (self.loadingswitcher && typeof self.loadingswitcher === 'function') {\n              self.loadingswitcher(false);\n            }\n            self.$emit('tableScroll')\n          }\n        });\n      },\n      getListWithLog() {\n        var self = this;\n\n        var start = (this.current - 1) * this.size + 1;\n        var end = this.current * this.size;\n\n        var whstring = '';\n        //var whstring = \"AliasSet=N'\" + this.locale + \"'\";\n        if (this.filter) {\n          whstring += whstring ? ' and ' + this.filter : this.filter;\n        }\n        var svc='';\n        if(self.needUserName){\n          svc = this.$http(self.conname, \"DV.GetListWithPagerAndUserName\");\n        }\n        else{\n          svc = this.$http(self.conname, \"DV.GetListWithPager\");\n        }\n        svc.AddParam({\n          Name: \"tableOrView\",\n          Value: self.tablename,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: \"start\",\n          Value: start,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"end\",\n          Value: end,\n          DBType: \"int\"\n        });\n        if (self.order) {\n          svc.AddParam({\n            Name: \"orderby\",\n            Value: self.order,\n            DBType: \"string\"\n          });\n        }\n        svc.AddParam({\n          Name: \"where\",\n          Value: whstring,\n          DBType: \"string\"\n        });\n        svc.AddParam({\n          Name: 'total',\n          Value: '0',\n          DBType: 'int',\n          IsOutput: true,\n          Size: 100\n        });\n        if(self.needUserName){\n          svc.AddParam({\n            Name: \"UserName\",\n            Value: self.userName,\n            DBType: \"string\"\n          });\n        }\n        if(self.bondCode.trim()){\n          svc.AddParam({\n            Name: \"ItemValue\",\n            Value: self.bondCode,\n            DBType: \"string\"\n          });\n        }\n        svc.ExecTable().then((ress) => {\n          if (ress) {\n            let res = {};\n            if (this.trustId) {\n              res.data = ress.data.filter((item) => {\n                return item.TrustId !== Number(this.trustId)\n              })\n              res.total = ress.total>0?ress.total - 1:ress.total\n            }else{\n              res = ress\n            }\n            //console.log(res)\n            self.total = parseInt(res.total);\n            self.dataloaded(res.data, res.total);\n            if (self.loadingswitcher && typeof self.loadingswitcher === 'function') {\n              self.loadingswitcher(false);\n            }\n            self.$emit('tableScroll')\n          }\n        });\n      },\n      pageSizeChange(size) {\n        if (this.loadingswitcher && typeof this.loadingswitcher === 'function') {\n          this.loadingswitcher(true);\n        }\n        this.size = size;\n        this.current = 1;\n        this.getListWithPager();\n      },\n      pageIndexChange(index) {\n        if (this.loadingswitcher && typeof this.loadingswitcher === 'function') {\n          this.loadingswitcher(true);\n        }\n        this.current = index;\n        this.getListWithPager();\n      }\n    }\n  };\n\n",null]}