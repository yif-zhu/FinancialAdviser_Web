{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\admin\\ProductListTable.vue?vue&type=style&index=0&id=2772cbde&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\admin\\ProductListTable.vue","mtime":1604281045798},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  .productList{\n\t\t\t  background: #fff;\n\t\t\t display: flex;\n\t\t\t flex: 1;\n\t\t\t min-height: 0;\n\t\t\t height: 100%;\n\t\t\t flex-direction: row;\n\t\t\t overflow: hidden;\n\t\t\t .transactionBox {\n\t\t\t   height: 100%;\n\t\t\t   flex:1;\n\t\t\t   width: 0;\n\t\t\t }\n\t\t\t .tableWrap {\n\t\t\t   width: 75%;\n\t\t\t   height: 100%;\n\n\t\t\t   > .data-grid{\n\t\t\t     display: flex;\n\t\t\t     flex-direction: column;\n\t\t\t     height: 100%;\n\t\t\t   }\n\t\t\t }\n\n\n    .searchBox{\n      flex: 0 0 300px;\n      width: 0;\n      background-color: #f4f5fe;\n      padding-left: 15px;\n    }\n    .transactionBoxStyle {\n      background: #ffffff;\n      padding: 5px 15px 8px 15px;\n      box-shadow: 0px 0px 2px 3px rgba(218, 231, 255, 0.6);\n    }\n\n    .transactionBoxStyle .transactionStyle {\n      position: relative;\n      height: 40px;\n      line-height: 35px;\n      border-bottom: 1px solid #cccccc;\n      margin-bottom: 8px;\n    }\n\n    .transactionBoxStyle .el-table {\n      box-shadow: none;\n    }\n\n    .ratingList {\n      margin: 0px;\n      padding: 0px;\n\n      li {\n        display: flex;\n        padding: 10px;\n        cursor: pointer;\n\n        &:hover {\n          background-color: #ebeef5;\n        }\n      }\n    }\n\n    .el-icon-remove.remove-button {\n      color: $--color-danger;\n      font-size: 16px;\n      vertical-align: middle;\n      margin-right: 15px;\n      cursor: pointer;\n    }\n    .icon-chenggong{\n      color: limegreen;\n      font-size: 12px;\n    }\n    .icon-shibai{\n      color: red;\n      font-size: 12px;\n    }\n    .el-button i{\n      font-size: 13px!important;\n      margin-right: 5px;\n    }\n    /deep/ .tool-bar{\n      height: 39px;\n      .tool-right{\n        height: 39px!important;\n      }\n      .tool-left{\n        height: 39px!important;\n      }\n    }\n    .openSearch{\n      font-size: 12px;\n      line-height: 39px;\n      padding-left: 20px;\n      cursor: pointer;\n      vertical-align: middle;\n      i{\n        color: $--color-primary;\n        margin-right: 5px;\n        vertical-align: middle;\n      }\n    }\n    /deep/ .advance-filter-header{\n      .left{\n        margin-left: 0;\n      }\n\n    }\n    /deep/ .advance-filter-body{\n      padding-left: 0;\n    }\n\t\t}\n.clear-condition{\n    font-size: 12px;\n    text-align: center;\n    color: $--color-primary;\n    display: inline-block;\n    width: 100%;\n    cursor: pointer;\n  }\n.chosen-fields {\n      display: inline-block;\n      margin-bottom: 10px;\n      margin-right: 10px;\n      background-color: #fff;\n      border:1px solid $--color-grey-light;\n      color: $--color-primary;\n      border-radius: 3px;\n      font-size: 12px;\n      position: relative;\n      padding-right: 22px;\n      overflow: hidden;\n      &:hover{\n        border-color: $--color-primary;\n        .field-remove{\n          background-color: $--color-primary;\n          color: #fff;\n        }\n      }\n\n      .field-titles {\n        margin-right: 5px;\n        display: inline-block;\n        padding: 3px 0 3px 10px;\n        .title{\n          color: $--color-black;\n        }\n      }\n\n      .field-remove {\n        display: inline-block;\n        height: 100%;\n        cursor: pointer;\n        padding:0 5px;\n        position: absolute;\n        top: 0;right: -1px;\n        line-height: 26px;\n        width: 15px;\n        background-color: #f1f1f1;\n        i{\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform:translate(-50%,-50%)\n        }\n      }\n    }\n  ",{"version":3,"sources":["ProductListTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAs8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductListTable.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class=\"productList\">\n    <div class=\"searchBox\" v-show=\"searchS\">\n      <adv-filter conName=\"PortfolioManagement\" templateName=\"AdminProductListFilter\"\n        v-on:handleSearch=\"doProductListFilter\" @handleSearchCon=\"handleSearchCon\" ref=\"advFilterR\">\n      </adv-filter>\n    </div>\n    <div class=\"tableWrap transactionBox\">\n      <data-grid conName=\"PortfolioManagement\" tableName=\"DV.view_AdminProducts\"\n        @sortChange=\"listSortChange\" @selectionChange=\"listSelectionChange\" :order=\"listOrder\" :bondCode=\"bondCode\"\n        :filter=\"listFilter\" :showFilter=\"true\" ref=\"refDataGrid\" :multiSelection=\"true\" :isFixed=\"true\">\n        <template slot=\"toolbar-filter\">\n          <span class=\"openSearch\" @click=\"searchSC\" title=\"检索\"><i class=\"iconfont\"\n              :class=\"searchS?'icon-shouqi':'icon-zhankai1'\"></i>{{searchS?'关闭检索':'展开检索'}}</span>\n        </template>\n        <template slot=\"toolbar-right\">\n          <el-button type=\"primary\" size=\"mini\" :disabled=\"listData.length!=1\"\n            @click=\"supplementTrust()\" plain>\n            <i class=\"el-icon-tickets\"></i>补充完整结构\n          </el-button>\n          <el-dropdown @command=\"handleCommand\" style=\"margin-left: 10px;\">\n            <el-button type=\"primary\" size=\"mini\" :disabled=\"listData.length!=1\" plain>\n              <i class=\"el-icon-upload2\"></i>数据上传\n            </el-button>\n            <el-dropdown-menu slot=\"dropdown\" style=\"width: 130px; margin-top: 5px;\"\n              :visibleArrow=\"false\">\n              <el-dropdown-item command='excelUpload'>Excel模型</el-dropdown-item>\n              <el-dropdown-item command='trusteeUpload'>收益分配</el-dropdown-item>\n              <el-dropdown-item command='TaxTable'>税费表</el-dropdown-item>\n              <el-dropdown-item command='PoolStatistics'>资产池统计</el-dropdown-item>\n              <el-dropdown-item command='PoolDistributions'>资产池分布</el-dropdown-item>\n              <el-dropdown-item command='PoolCashFlow'>资产池现金流</el-dropdown-item>\n              <el-dropdown-item command='assetPoolPayment'>资产池还款记录</el-dropdown-item>\n              <el-dropdown-item command='TrustServiceProvider'>相关参与方</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n          <el-dropdown @command=\"handleCommandExport\" style=\"margin: 0px 10px;\">\n            <el-button type=\"primary\" size=\"mini\" :disabled=\"listData.length!=1\" plain>\n              <i class=\"el-icon-download\"></i>数据下载\n            </el-button>\n            <el-dropdown-menu slot=\"dropdown\" style=\"width: 160px; margin-top: 5px;\"\n              :visibleArrow=\"false\">\n              <el-dropdown-item command='0'>债券收益分配(模板0)</el-dropdown-item>\n              <el-dropdown-item command='1'>债券收益分配(模板1)</el-dropdown-item>\n              <el-dropdown-item command='2'>资产池还款记录</el-dropdown-item>\n              <el-dropdown-item command='3'>税费表</el-dropdown-item>\n              <!-- <el-dropdown-item command='4'>结构xml</el-dropdown-item> -->\n              <el-dropdown-item command='5'>产品导出</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n          <el-button type=\"primary\" size=\"mini\" @click=\"createTrust(0)\" plain>\n            <i class=\"iconfont icon-xinjian2\"></i>新建\n          </el-button>\n          <el-button type=\"primary\" :disabled=\"listData.length!=1\" size=\"mini\"\n            @click=\"createTrust(1)\" plain>\n            <i class=\"iconfont icon-bianji\"></i>编辑\n          </el-button>\n          <el-button :disabled=\"listData.length<=0\" type=\"danger\" size=\"mini\"\n            @click=\"removeDealStructures\" plain>\n            <i class=\"iconfont icon-lajitong\"></i>删除\n          </el-button>\n          <el-button :disabled=\"listData.length<=0\" type=\"primary\" plain size=\"mini\"\n            @click=\"checklist\"><i class=\"el-icon-tickets\"></i>推送设置\n          </el-button>\n          <el-button type=\"primary\" plain size=\"mini\" v-popover:searchConA><i\n              class=\"iconfont icon-weibiaoti--1\"></i>管理筛选条件\n          </el-button>\n        </template>\n        <template slot=\"table-column\">\n          <el-table-column type=\"selection\" width=\"50\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"TrustId\" sortable=\"custom\" width=\"70\" label=\"标识\"></el-table-column>\n          <el-table-column min-width=\"160\" label=\"产品简称\" :show-overflow-tooltip=\"true\">\n            <template slot-scope=\"scope\">\n              <router-link :to=\"'Detail/' + scope.row.TrustId\" class=\"link\"\n                :title=\"scope.row.TrustNameShort\">\n                {{scope.row.TrustNameShort}}\n              </router-link>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"TrustName\" label=\"产品名称\" sortable=\"custom\" min-width=\"200\"\n            :show-overflow-tooltip=\"true\">\n          </el-table-column>\n          <el-table-column prop=\"TrustCode\" label=\"产品代码\" sortable=\"custom\" min-width=\"150\"\n            :show-overflow-tooltip=\"true\">\n          </el-table-column>\n          <el-table-column prop=\"IsExcelModelUploaded\" sortable=\"custom\" align=\"center\"\n            min-width=\"100\" label=\"Excel模型\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsExcelModelUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsTrusteeUploadUploaded\" min-width=\"100\" sortable=\"custom\"\n            align=\"center\" label=\"收益分配\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsTrusteeUploadUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsTaxFeeUploaded\" min-width=\"100\" sortable=\"custom\" align=\"center\"\n            label=\"税费\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsTaxFeeUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsPoolStatisticsUploaded\" min-width=\"110\" sortable=\"custom\"\n            align=\"center\" label=\"资产池统计\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsPoolStatisticsUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsPoolDistributionsUploaded\" min-width=\"110\" sortable=\"custom\"\n            align=\"center\" label=\"资产池分布\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsPoolDistributionsUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsPoolCashFlowUploaded\" min-width=\"120\" sortable=\"custom\"\n            align=\"center\" label=\"资产池现金流\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsPoolCashFlowUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsPoolPaymentUploaded\" min-width=\"130\" sortable=\"custom\"\n            align=\"center\" label=\"资产池还款记录\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsPoolPaymentUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsProductReleaseInstructionsUploaded\" min-width=\"110\"\n            sortable=\"custom\" align=\"center\" label=\"发行说明书\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsProductReleaseInstructionsUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsProductCreditRatingFilesUploaded\" min-width=\"100\"\n            sortable=\"custom\" align=\"center\" label=\"评级报告\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsProductCreditRatingFilesUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsTrusteeReportUploaded\" min-width=\"130\" sortable=\"custom\"\n            align=\"center\" label=\"受托机构报告\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsTrusteeReportUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsExerciseNoticeUploaded\" min-width=\"160\" sortable=\"custom\"\n            align=\"center\" label=\"兑付兑息及行权公告\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsExerciseNoticeUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsFinancialReportsUploaded\" min-width=\"100\" sortable=\"custom\"\n            align=\"center\" label=\"财务报告\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsFinancialReportsUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsIncomeDistributionReportUploaded\" min-width=\"130\"\n            sortable=\"custom\" align=\"center\" label=\"收益分配报告\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsIncomeDistributionReportUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsLoanServicerReportUploaded\" min-width=\"140\" sortable=\"custom\"\n            align=\"center\" label=\"贷款服务机构报告\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsLoanServicerReportUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsAnnouncementOfResultsUploaded\" min-width=\"130\" sortable=\"custom\"\n            align=\"center\" label=\"发行结果公告\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsAnnouncementOfResultsUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"IsDealStructurePictureUploaded\" min-width=\"120\" sortable=\"custom\"\n            align=\"center\" label=\"交易结构图\">\n            <template slot-scope=\"scope\">\n              <span><i class=\"iconfont\"\n                  :class=\"scope.row.IsDealStructurePictureUploaded?'icon-chenggong':'icon-shibai'\"></i></span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"LastModifiedPerson\" min-width=\"120\" align=\"center\"\n            :show-overflow-tooltip=\"true\" label=\"最近一次修改人\">\n          </el-table-column>\n          <el-table-column prop=\"LastModifiedTime\" min-width=\"150\" sortable=\"custom\"\n            :show-overflow-tooltip=\"true\" label=\"最近一次修改时间\">\n          </el-table-column>\n        </template>\n      </data-grid>\n    </div>\n    <base-dialog draggable :close-on-click-modal=\"false\" title=\"上传交易结构模型\"\n      :visible.sync=\"excelUploadVisible\" width=\"500px\">\n      <div class=\"dialogfileUploadBox\">\n        <span>文件上传：</span>\n        <input type=\"file\" id=\"excelUpload\" @change=\"dialogFileInput($event)\"\n          class=\"fileUploadInput\"\n          accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\" />\n        <el-input class=\"el_fileUploadInput\" v-model=\"dialogUploadFileName\">\n          <el-button class=\"el_fileUploadBtn\" slot=\"append\"\n            @click=\"dialogUploadCilck('excelUpload')\">选择文件\n          </el-button>\n        </el-input>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer assetDialogFooter\">\n        <el-button @click=\"excelUploadVisible = false\" size=\"mini\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"excelUploadFile()\" size=\"mini\">确定</el-button>\n      </span>\n    </base-dialog>\n    <base-dialog draggable :close-on-click-modal=\"false\" title=\"上传受托报告\"\n      :visible.sync=\"trusteeUploadVisible\" width=\"500px\">\n      <div class=\"dialogfileUploadBox\">\n        <span>文件上传：</span>\n        <input type=\"file\" id=\"trusteeUpload\" multiple=\"multiple\" @change=\"dialogFileInput($event)\"\n          class=\"fileUploadInput\"\n          accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,application/pdf\" />\n        <el-input class=\"el_fileUploadInput\" v-model=\"dialogUploadFileName\">\n          <el-button class=\"el_fileUploadBtn\" slot=\"append\"\n            @click=\"dialogUploadCilck('trusteeUpload')\">选择文件\n          </el-button>\n        </el-input>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer assetDialogFooter\">\n        <el-button @click=\"trusteeUploadVisible = false\" size=\"mini\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"trusteeUploadFile()\" size=\"mini\">确定</el-button>\n      </span>\n    </base-dialog>\n\n    <base-dialog draggable :close-on-click-modal=\"false\" :title=\"dialogTitle\"\n      :visible.sync=\"dlgAssetPoolPayment\" width=\"500px\">\n      <div class=\"dialogfileUploadBox\" v-if=\"dlgAssetPoolPayment\">\n        <span>文件上传：</span>\n        <input type=\"file\" id=\"assetPoolPayment\" @change=\"dialogFileInput($event)\"\n          class=\"fileUploadInput\"\n          accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\" />\n        <el-input class=\"el_fileUploadInput\" v-model=\"dialogUploadFileName\">\n          <el-button class=\"el_fileUploadBtn\" slot=\"append\"\n            @click=\"dialogUploadCilck('assetPoolPayment')\">选择文件\n          </el-button>\n        </el-input>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer assetDialogFooter\">\n        <el-button @click=\"dlgAssetPoolPayment = false\" size=\"mini\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"assetPoolPaymentUpload()\" size=\"mini\">确定</el-button>\n      </span>\n    </base-dialog>\n\n    <base-dialog title=\"基础信息\" width=\"500px\" draggable :close-on-click-modal=\"false\"\n      :visible.sync=\"dlgTrustInfo.Visiable\">\n      <createTrust v-if=\"dlgTrustInfo.Visiable\" :trustID=\"dlgTrustInfo.TrustId\"\n        :onDialogClosed=\"trustUpdated\">\n      </createTrust>\n    </base-dialog>\n\n    <base-dialog title=\"导入统计\" width=\"960px\" draggable :close-on-click-modal=\"false\"\n      :visible.sync=\"statisticsDialogVisible\">\n      <hchart :options=\"statisticOptions\" style=\"height: 500px;\"></hchart>\n    </base-dialog>\n\n    <base-dialog title=\"推送设置\" width=\"1000px\" draggable :close-on-click-modal=\"false\"\n      :visible.sync=\"dlgCheckList.Visiable\">\n      <checkList v-if=\"dlgCheckList.Visiable\" :trustID=\"dlgCheckList.TrustId\"\n        :onDialogClosed=\"closeCheckList\">\n      </checkList>\n    </base-dialog>\n    <!-- 管理筛选条件 -->\n    <el-popover placement=\"bottom-start\" title=\"\" width=\"280\" ref=\"searchConA\" :visibleArrow=\"false\"\n      v-model=\"searchConA\" trigger=\"click\">\n      <div>\n        <div v-if=\"fields.length>0\">\n          <div v-for=\"field in fields\" :key=\"field.Title\" v-show=\"field.ChosenTitles.length>0\"\n            class=\"chosen-fields\">\n            <span class=\"field-titles\"><span\n                class=\"title\">{{field.Title}}：</span>{{field.UIFormat?field.ChosenTitles.join(\" - \"):field.ChosenTitles.join(\", \")}}</span>\n            <span class=\"field-remove\" v-if=\"!field.Must\" @click=\"removeFieldChosen(field)\">\n              <i class=\"el-icon-close\"></i>\n            </span>\n          </div>\n          <div  v-show=\"bondCode !==''\"\n            class=\"chosen-fields\">\n            <span class=\"field-titles\"><span\n                class=\"title\">证券代码：</span>{{bondCode}}</span>\n            <span class=\"field-remove\" @click=\"removeColdChosen\">\n              <i class=\"el-icon-close\"></i>\n            </span>\n          </div>\n          <span @click=\"removeAll()\" class=\"colorPrimary clear-condition\"\n            v-show=\"removeShow\">清除筛选</span>\n        </div>\n        <p v-show=\"!removeShow\" style=\"font-size:12px;color:#a5a5a5;text-align:center;\">暂无数据</p>\n      </div>\n    </el-popover>\n  </div>\n</template>\n\n<script>\n  import csvc from \"@/api/CommonService.js\";\n  import fsvc from '@/api/FileService';\n  import taskprocess from '@/api/TaskProcess';\n  import createTrust from \"./CreateTrust.vue\";\n  import checkList from \"./CheckList.vue\";\n  import pager from \"@/components/common/Pager.vue\";\n  import DataGrid from '@/components/common/DataGrid.vue';\n  import hchart from \"@/components/common/Highcharts\";\n  import Highcharts from \"highcharts\";\n  import advFilter from '@/components/common/AdvanceFilter.vue'\n  import dynamicTab from '@/mixins/dynamicTab.js';\n  import {\n    mapMutations,\n    mapState\n  } from 'vuex';\r\n\timport { FileBaseFolder } from '@/utils/config';\r\n\timport transformSeparator from '@/utils/transformSeparator';\n  export default {\n    components: {\n      pager,\n      DataGrid,\n      createTrust,\n      checkList,\n      hchart,\n      advFilter\n    },\n    props: {\n      openInParentTab: {\n        type: Function\n      },\n      projectsTransactionHight: {}\n    },\n    data() {\n      return {\n        dialogTitle: '',\n        listFilter: 'IsMarketProduct = 1',\n        listOrder: \"TrustId desc\",\n        listData: [],\n        dynamicTabHeight: \"\",\n        excelUploadVisible: false,\n        dlgTrustInfo: {\n          Visiable: false,\n          TrustId: 0\n        },\n        dlgCheckList: {\n          Visiable: false,\n          TrustId: 0\n        },\n        statisticsDialogVisible: false,\n        dialogUploadFileName: null,\n        dropdownData: [],\n        statisticOptions: null,\n        instructionstUploadVisible: false,\n        RatingUploadVisible: false,\n        trusteeUploadVisible: false,\n        dlgAssetPoolPayment: false,\n        uploadType: '',\n        ShowDetailDialog: false,\n        searchS: true,\n        fields: [],\n        removeShow: false,\n        searchConA: false,\n        bondCode:''\n      };\n    },\n    mixins: [dynamicTab],\n    created() {\n      this.dynamicTabInterFace()\n    },\n    mounted() {\n      var self = this;\n      self.getDropdown()\n      //self.LoadStatistic()\n      if (this.projectsTransactionHight) {\n        $(\".transactionStyle\").removeClass(\"tool-elRightBtn\");\n        $(\".transactionBox\").addClass(\"transactionBoxStyle\");\n        window.onresize = function () {\n          self.dynamicTabHeight = document.documentElement.clientHeight - 280 + \"px\";\n        };\n      } else {\n        window.onresize = function () {\n          self.dynamicTabHeight = document.documentElement.clientHeight - 230 + \"px\";\n        };\n      }\n    },\n    computed: {\n      ...mapState('user', ['userName']),\n    },\n    methods: {\n      ...mapMutations('dynamicTabs', ['addTab']),\n      handleSearchCon(fields, removeShow) {\n        this.fields = fields\n        this.removeShow = removeShow\n        console.log(fields)\n      },\n      removeColdChosen() {\n        this.$refs.advFilterR.bondCodeClear()\n      },\n      removeFieldChosen(fields) {\n        this.$refs.advFilterR.removeFieldChosen(fields)\n      },\n      removeAll() {\n        this.searchConA = false\n        this.$refs.advFilterR.removeAll()\n        this.removeColdChosen()\n      },\n      dynamicTabInterFace() {\n        this.newTab({\n          id: 'ProductList',\n          name: 'ProductList',\n          title: '产品管理',\n          closable: false, // 不允许关闭\n          isCache: true // 缓存当前页面\n        })\n        this.newTab({\n          id: 'DataStatistics', // 动态标签的ID，用来判断唯一性，避免重复创建\n          name: 'DataStatistics', // 动态标签需要绑定到的路由，与路由配置中的name值要一致\n          title: '数据统计',\n          autoOpen: false, // 不需要自动打开\n          closable: false, // 不允许关闭\n          isCache: true // 缓存当前页面\n        })\n//         this.newTab({\n//           id: 'WorkStatistics',\n//           name: 'WorkStatistics',\n//           title: '工作统计',\n//           autoOpen: false,\n//           closable: false,\n//           isCache: true\n//         })\n      },\n      doProductListFilter(condition,bondCode) {\n          this.listFilter = condition;\n          this.bondCode = bondCode;\n      },\n      searchSC() {\n        this.searchS = !this.searchS\n      },\n      handleCommand(dialogName) {\n        this.uploadType = dialogName;\n        if (dialogName == 'excelUpload') {\n          this.excelUploadVisible = true\n          this.clearUploadedText()\n        } else if (dialogName == 'distributionUpload') {\n          $(\"#InstructionsUpload\").val('');\n          this.dialogUploadFileName = null;\n          this.instructionstUploadVisible = true;\n        } else if (dialogName == 'ratingReportUpload') {\n          $(\"#RatingUpload\").val('');\n          this.dialogUploadFileName = null;\n          this.RatingUploadVisible = true;\n        } else if (dialogName == 'trusteeUpload') {\n          $(\"#trusteeUpload\").val('');\n          this.dialogUploadFileName = null;\n          this.trusteeUploadVisible = true;\n        } else if (dialogName == 'assetPoolPayment' || dialogName == 'TaxTable') {\n          this.dialogUploadFileName = null;\n          this.dlgAssetPoolPayment = true;\n          if (dialogName == 'assetPoolPayment') {\n            this.dialogTitle = '上传资产池还款记录'\n          } else {\n            this.dialogTitle = '上传税费表'\n          }\n        } else {\n          switch (dialogName) {\n            case 'PoolStatistics':\n              this.dialogTitle = '上传资产池统计';\n              break;\n            case 'PoolDistributions':\n              this.dialogTitle = '上传资产池分布';\n              break;\n            case 'PoolCashFlow':\n              this.dialogTitle = '上传资产池现金流';\n              break;\n            case 'TrustServiceProvider':\n              this.dialogTitle = '上传相关参与方';\n            default:\n              break;\n          }\n          this.dialogUploadFileName = null;\n          this.dlgAssetPoolPayment = true;\n        }\n      },\n      handleCommandExport(type) {\n        switch (type) {\n          case '0':\n            this.exportTrustBondPayment('1');\n            break;\n          case '1':\n            this.exportTrustBondPayment('2');\n            break;\n          case '2':\n            this.exportAssetPoolPayment();\n            break;\n          case '3':\n            this.exportTaxTable();\n            break;\n          case '5':\n            this.exportTrustPro();\n            break;\n          case '4':\n            this.exportTrustXML();\n          default:\n            break;\n        }\n      },\n      reInit() {\n        this.$refs.advfStructureList.LoadFiledsAndInit();\n        this.$refs.pagerViewTrust.getListWithPager();\n      },\n      listDataLoaded(data) {\n        this.listData = data;\n      },\n      listSortChange(sorter) {\n        if (!sorter.prop || !sorter.order) {\n          return;\n        }\n\n        let order = sorter.order === \"descending\" ? \" desc\" : \" asc\";\n        let targetOrder = sorter.prop + order;\n        if (targetOrder === this.listOrder) {\n          return;\n        }\n\n        this.listOrder = targetOrder;\n      },\n      listSelectionChange: function (data) {\n        this.listData = data;\n      },\n    //   advFilterButtonClick(conditions) {\n    //     this.listFilter = conditions;\n    //   },\n      openInTab(id, title) {\n        this.addTab({\n          name: '' + id,\n          title,\n          id,\n          component: 'structureCustomize'\n\n        });\n      },\n      advsFilterPositionClick() {\n        $(\".advsFilterPosition\").slideToggle(180);\n      },\n      editStructure() {\n        if (this.listData.length > 0) {\n          this.openInTab(\n            this.listData[0].TrustId,\n            this.listData[0].TrustName\n          );\n        }\n      },\n      downloadReport(scope, category) {\n        // console.log(scope);\n        fsvc.DownLoadFileByPath(scope)\n      },\n      //上传数据\n      exportTrustBondPayment(type) {\n        let self = this;\n        var svc = new fsvc.Export(\"PortfolioManagement\", \"DV.FactBondPayment_Export\");\n        svc.AddParam({\n          Name: \"TrustID\",\n          Value: self.listData[0].TrustId,\n          DBType: \"int\"\n        });\n        svc.AddParam({\n          Name: \"ResultType\",\n          Value: type,\n          DBType: \"int\"\n        });\n        //语言\n        svc.ExportExcelFile(\"债券收益分配\");\n      },\n      exportAssetPoolPayment() {\n        let self = this;\n\n        var tp = new taskprocess(\"Task\", \"DV_ExportPaymentScheduleAggregation\", \"TaskProcess\");\n        tp.AddVariableItem(\"TrustID\", self.listData[0].TrustId, \"String\");\n        tp.ShowIndicator(function () {\n          var fName = '资产池还款记录_' + self.listData[0].TrustId + '.xlsx';\n          var filePath = transformSeparator(FileBaseFolder + 'DealViewer\\\\Output\\\\' + fName);\n          fsvc.DownLoadFileByPath(filePath);\n        });\n      },\n      exportTaxTable() {\n        let self = this;\n\n        var tp = new taskprocess(\"Task\", \"DV_ExportFeeStructureReconciliation\", \"TaskProcess\");\n        tp.AddVariableItem(\"TrustID\", self.listData[0].TrustId, \"String\");\n        tp.ShowIndicator(function () {\n          var fName = '税费表_' + self.listData[0].TrustId + '.xlsx';\n          var filePath = transformSeparator(FileBaseFolder + 'DealViewer\\\\Output\\\\' + fName);\n          fsvc.DownLoadFileByPath(filePath);\n\n        });\n\n        // \t\t\t\t    var svc = new fsvc.Export(\"PortfolioManagement\", \"DV.FeeStructureReconciliation_Export\");\n        // \t\t\t\t    svc.AddParam({\n        // \t\t\t\t        Name: \"TrustID\",\n        // \t\t\t\t        Value: self.listData[0].TrustId,\n        // \t\t\t\t        DBType: \"int\"\n        // \t\t\t\t    });\n        // \t\t\t\t    //语言\n        // \t\t\t\t    svc.ExportExcelFile(\"税费表\");\n      },\n      //导出XML 给QuickDeal用\n      exportTrustXML() {\n        let self = this;\n        var tp = new taskprocess(\n          \"Task\",\n          \"FixedIncomeSuite_TrustInfoExport\",\n          \"TaskProcess\"\n        );\n        tp.AddVariableItem(\"TrustId\", self.listData[0].TrustId, \"int\");\n        tp.ShowIndicator(function () {\n          let filePath =\n            \"../../TrustManagementService/TrustImportAndExportModel/AnalysisFramework_TrustInfoImportAndExportModel_\" +\n            self.listData[0].TrustId + \".xml\";\n          let filename = 'AnalysisFramework_TrustInfoImportAndExportModel_' + self.listData[0]\n            .TrustId + '.xml'\n          let link = document.createElement('a');\n          link.download = filename;\n          link.style.display = 'none';\n          link.href = filePath;\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n        });\n      },\n      exportTrustPro() {\n        var self = this\n        let trustId = self.listData[0].TrustId\n        console.log(trustId)\n        let callApi = this.$http('TaskProcess', 'Task.initTaskStatusByTrustId', 1);\n        callApi.AddParam({\n          Name: 'trustId',\n          Value: trustId,\n          DBType: 'int'\n        });\n        callApi.ExecResult().then(res => {});\n        let tpi = new taskprocess(\"Task\", 'FixedIncomeSuite_TrustInfoExport', \"TaskProcess\")\n        tpi.AddVariableItem('TrustId', trustId, 'String');\n        tpi.ShowIndicator(() => {\n          let svc = this.$http('TaskProcess', 'Task.checkTaskStatusByTrustId', 1);\n          svc.AddParam({\n            Name: 'trustId',\n            Value: trustId,\n            DBType: 'int'\n          });\n          svc.ExecTable().then(res => {\n            if (res.length == 0) {\n              return\n            }\n            if (res[0].Status == \"1\") {\n              let filePath =\n                \"/TrustManagementService/TrustImportAndExportModel/QuickDeal_TrustInfoImportAndExportModel_\" +\n                trustId + \".xml\";\n              let filename = 'QuickDeal_TrustInfoImportAndExportModel_' + trustId + '.xml'\n              let link = document.createElement('a');\n              link.download = filename;\n              link.style.display = 'none';\n              link.href = filePath;\n              document.body.appendChild(link);\n              link.click();\n              document.body.removeChild(link);\n            }\n          })\n        })\n      },\n      clearUploadedText() {\n        this.dialogUploadFileName = null;\n      },\n      excelUploadFile: function () {\n        var self = this;\n        console.log(self.userName)\n        var postData = $(\"#excelUpload\")[0].files[0];\n        if (!postData) {\n          self.$message({\n            message: '请选文件',\n            type: 'warning'\n          });\n          return;\n        }\n        var postDataName = postData.name;\n        var timestamp = new Date().getTime();\n        let trustId = self.listData[0].TrustId;\n        fsvc.Upload(postData, timestamp + postDataName, \"DealViewer\\\\ExcelModelData\").then(\n          function (\n            fpath) {\n            self.excelUploadVisible = false; // 关闭上传弹窗\n\n            self.filePath = transformSeparator(FileBaseFolder + fpath.UploadResult);\n            self.excelUpload = false;\n            var tp = new taskprocess(\n              \"Task\",\n              \"DV_UploadProductInfo\",\n              \"TaskProcess\"\n            );\n            tp.AddVariableItem(\"TrustID\", trustId, \"String\");\n            tp.AddVariableItem(\"UserName\", self.userName, \"String\");\n            tp.AddVariableItem(\"DataType\", 'ExcelModel', \"String\");\n            tp.AddVariableItem(\"SourceFilePath\", FileBaseFolder + fpath\n              .UploadResult, \"String\");\n            tp.ShowIndicator(function () {\n              self.$refs.refDataGrid.refresh();\n            });\n          });\n      },\n      trusteeUploadFile: function () {\n        var self = this;\n        var postData = $(\"#trusteeUpload\")[0].files[0];\n        if (!postData) {\n          self.$message({\n            message: '请选文件',\n            type: 'warning'\n          });\n          return;\n        }\n        var postDataName = postData.name;\n        var timestamp = new Date().getTime();\n        let trustId = self.listData[0].TrustId;\n        fsvc.Upload(postData, timestamp + postDataName, transformSeparator(\"DealViewer\\\\TrusteeReportData\")).then(\n          function (fpath) {\n            self.trusteeUploadVisible = false; // 关闭上传弹窗\n\n            self.filePath = FileBaseFolder + fpath.UploadResult;\n            self.excelUpload = false;\n            var tp = new taskprocess(\n              \"Task\",\n              \"DV_UploadTrustFactBondPayment\",\n              \"TaskProcess\"\n            );\n            tp.AddVariableItem(\"TrustID\", trustId, \"String\");\n            tp.AddVariableItem(\"UserName\", self.userName, \"String\");\n            tp.AddVariableItem(\"DataType\", 'FactBondPayment', \"String\");\n            tp.AddVariableItem(\"SourceFilePath\", FileBaseFolder + fpath\n              .UploadResult, \"String\");\n            tp.ShowIndicator(function () {\n              self.$refs.refDataGrid.refresh();\n            });\n          });\n      },\n      assetPoolPaymentUpload: function () {\n        var self = this;\n        var postData = $(\"#assetPoolPayment\")[0].files[0];\n        if (!postData) {\n          self.$message({\n            message: '请选文件',\n            type: 'warning'\n          });\n          return;\n        }\n        var timestamp = new Date().getTime();\n        var postDataName = postData.name;\n        let trustId = self.listData[0].TrustId;\n        var upFile = '',\n          taskName = '',\n          dataType = '';\n        switch (self.uploadType) {\n          case 'assetPoolPayment':\n            upFile = \"DealViewer\\\\AssetPoolData\";\n            taskName = \"DV_UploadFactAssetPoolPayment\";\n            dataType = 'FactAssetPoolPayment';\n            break;\n          case 'TaxTable':\n            upFile = \"DealViewer\\\\TrustFee\";\n            taskName = 'DV_UploadFeeStructureReconciliation';\n            dataType = 'TaxFee';\n            break;\n          case 'PoolStatistics':\n            upFile = \"DealViewer\\\\PoolStatistics\";\n            taskName = 'DV_UploadPoolStatistics';\n            dataType = 'PoolStatistics';\n            break;\n          case 'PoolDistributions':\n            upFile = \"DealViewer\\\\PoolDistributions\";\n            taskName = 'DV_UploadPoolDistributions';\n            dataType = 'PoolDistributions';\n            break;\n          case 'PoolCashFlow':\n            upFile = \"DealViewer\\\\PoolCashflowAggregation\";\n            taskName = 'DV_UploadCashflowAggregation';\n            dataType = 'PoolCashFlow';\n            break;\n          case 'TrustServiceProvider':\n            upFile = \"DealViewer\\\\TrustServiceProvider\";\n            taskName = 'DV_UploadTrustServiceProvider';\n            dataType = 'TrustServiceProvider';\n            break;\n          default:\n            break;\n        }\n        fsvc.Upload(postData, timestamp + postDataName, upFile).then(function (fpath) {\n          self.filePath = FileBaseFolder + fpath.UploadResult;\n          self.excelUpload = false;\n          var tp = new taskprocess(\n            \"Task\",\n            taskName,\n            \"TaskProcess\"\n          );\n          tp.AddVariableItem(\"TrustID\", trustId, \"String\");\n          tp.AddVariableItem(\"UserName\", self.userName, \"String\");\n          tp.AddVariableItem(\"DataType\", dataType, \"String\");\n          tp.AddVariableItem(\"SourceFilePath\", FileBaseFolder + fpath\n            .UploadResult, \"String\");\n          tp.ShowIndicator(function () {\n            self.dlgAssetPoolPayment = false;\n            self.$refs.refDataGrid.refresh();\n          });\n        });\n      },\n      //上传文件处理\n      dialogFileInput(event) {\n        var file = event.target.files;\n        console.log(file)\n        let self = this\n        if (file.length > 1) {\n          this.dialogUploadFileName = ''\n          for (let key in file) {\n            if (key == \"length\") {\n              self.dialogUploadFileName = self.dialogUploadFileName.substring(0, self\n                .dialogUploadFileName.length - 1)\n              return\n            }\n            self.dialogUploadFileName = self.dialogUploadFileName + file[key].name + ','\n          }\n        } else if (file.length == 1) {\n          this.dialogUploadFileName = file[0].name;\n        }\n      },\n      dialogUploadCilck(id) {\n        $(\"#\" + id).click();\n      },\n      checklist() {\n        let id = this.listData[0].TrustId;\n        this.dlgCheckList.TrustId = id;\n        this.dlgCheckList.Visiable = true;\n      },\n      closeCheckList() {\n        this.dlgCheckList.Visiable = false;\n      },\n      createTrust(isEdit) {\n        if (isEdit) {\n          let id = this.listData[0].TrustId;\n          this.dlgTrustInfo.TrustId = id;\n        } else {\n          this.dlgTrustInfo.TrustId = 0;\n        }\n        this.dlgTrustInfo.Visiable = true;\n      },\n      trustUpdated(haveUpdate) {\n        this.dlgTrustInfo.Visiable = false;\n        if (haveUpdate) {\n          this.$refs.refDataGrid.refresh();\n        }\n      },\n      removeDealStructures() {\n        let self = this;\n        if (confirm(\"确定要删除所选产品吗?\")) {\n          let list = [];\n          if (self.listData && self.listData.length > 0) {\n            self.listData.forEach((item, index) => {\n              list.push(item.TrustId);\n            });\n            let strDealStructures = \"\";\n            if (list.length > 0) {\n              strDealStructures = list.join(\",\");\n            }\n            if (strDealStructures) {\n              var svc = new csvc(\n                \"PortfolioManagement\",\n                \"DV.Trust_Remove\",\n                1\n              );\n              svc.AddParam({\n                Name: \"DealStructuresString\",\n                Value: strDealStructures,\n                DBType: \"string\"\n              });\n              svc.AddParam({\n                Name: \"UserName\",\n                Value: self.userName,\n                DBType: \"string\"\n              });\n              svc.ExecTable().then(res => {\n                self.$refs.refDataGrid.refresh();\n                self.$message.success('删除成功');\n                var tp = new taskprocess(\n                  \"Task\",\n                  \"FixedIncomeSuite_DeleteTrustFromDealViewer\",\n                  \"TaskProcess\"\n                );\n                tp.AddVariableItem(\"TrustID\", list[0], \"String\");\n                tp.RunTask();\n              });\n            }\n          }\n        }\n      },\n      //补充经典交易结构\n      supplementTrust() {\n        let self = this;\n        //DealStructure.TrustManagement.usp_GenerateClassicDealStructure\n        if (self.listData && self.listData.length > 0) {\n          let tid = self.listData[0].TrustId;\n          let svc = new csvc(\n            \"PortfolioManagement\",\n            \"TrustManagement.usp_GenerateClassicDealStructure\"\n          );\n          svc.AddParam({\n            Name: \"TrustId\",\n            Value: tid,\n            DBType: \"string\"\n          });\n          svc.ExecTable().then(res => {\n            self.$refs.refDataGrid.refresh();\n            this.$message({\n              message: '补充成功',\n              type: 'success'\n            });\n          });\n        }\n      },\n      //获取select下拉数据\n      getDropdown() {\n        let self = this\n        let svc = new csvc(\n          \"PortfolioManagement\",\n          \"DV.ItemData_GetByCategoryCode\"\n        );\n        svc.AddParam({\n          Name: \"CategoryCode\",\n          Value: 'AssetType',\n          DBType: \"string\"\n        });\n\n        svc.ExecTable().then(res => {\n          self.dropdownData = res\n        });\n      },\n      //            导入统计图表数据\n\n      //导入统计\n      ImportStatistics() {\n        this.statisticsDialogVisible = true\n      },\n      openDetailDialog(TrustId) {\n        this.ShowDetailDialog = true;\n      },\n    }\n  };\n\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .productList{\n\t\t\t  background: #fff;\n\t\t\t display: flex;\n\t\t\t flex: 1;\n\t\t\t min-height: 0;\n\t\t\t height: 100%;\n\t\t\t flex-direction: row;\n\t\t\t overflow: hidden;\n\t\t\t .transactionBox {\n\t\t\t   height: 100%;\n\t\t\t   flex:1;\n\t\t\t   width: 0;\n\t\t\t }\n\t\t\t .tableWrap {\n\t\t\t   width: 75%;\n\t\t\t   height: 100%;\n\n\t\t\t   > .data-grid{\n\t\t\t     display: flex;\n\t\t\t     flex-direction: column;\n\t\t\t     height: 100%;\n\t\t\t   }\n\t\t\t }\n\n\n    .searchBox{\n      flex: 0 0 300px;\n      width: 0;\n      background-color: #f4f5fe;\n      padding-left: 15px;\n    }\n    .transactionBoxStyle {\n      background: #ffffff;\n      padding: 5px 15px 8px 15px;\n      box-shadow: 0px 0px 2px 3px rgba(218, 231, 255, 0.6);\n    }\n\n    .transactionBoxStyle .transactionStyle {\n      position: relative;\n      height: 40px;\n      line-height: 35px;\n      border-bottom: 1px solid #cccccc;\n      margin-bottom: 8px;\n    }\n\n    .transactionBoxStyle .el-table {\n      box-shadow: none;\n    }\n\n    .ratingList {\n      margin: 0px;\n      padding: 0px;\n\n      li {\n        display: flex;\n        padding: 10px;\n        cursor: pointer;\n\n        &:hover {\n          background-color: #ebeef5;\n        }\n      }\n    }\n\n    .el-icon-remove.remove-button {\n      color: $--color-danger;\n      font-size: 16px;\n      vertical-align: middle;\n      margin-right: 15px;\n      cursor: pointer;\n    }\n    .icon-chenggong{\n      color: limegreen;\n      font-size: 12px;\n    }\n    .icon-shibai{\n      color: red;\n      font-size: 12px;\n    }\n    .el-button i{\n      font-size: 13px!important;\n      margin-right: 5px;\n    }\n    /deep/ .tool-bar{\n      height: 39px;\n      .tool-right{\n        height: 39px!important;\n      }\n      .tool-left{\n        height: 39px!important;\n      }\n    }\n    .openSearch{\n      font-size: 12px;\n      line-height: 39px;\n      padding-left: 20px;\n      cursor: pointer;\n      vertical-align: middle;\n      i{\n        color: $--color-primary;\n        margin-right: 5px;\n        vertical-align: middle;\n      }\n    }\n    /deep/ .advance-filter-header{\n      .left{\n        margin-left: 0;\n      }\n\n    }\n    /deep/ .advance-filter-body{\n      padding-left: 0;\n    }\n\t\t}\n.clear-condition{\n    font-size: 12px;\n    text-align: center;\n    color: $--color-primary;\n    display: inline-block;\n    width: 100%;\n    cursor: pointer;\n  }\n.chosen-fields {\n      display: inline-block;\n      margin-bottom: 10px;\n      margin-right: 10px;\n      background-color: #fff;\n      border:1px solid $--color-grey-light;\n      color: $--color-primary;\n      border-radius: 3px;\n      font-size: 12px;\n      position: relative;\n      padding-right: 22px;\n      overflow: hidden;\n      &:hover{\n        border-color: $--color-primary;\n        .field-remove{\n          background-color: $--color-primary;\n          color: #fff;\n        }\n      }\n\n      .field-titles {\n        margin-right: 5px;\n        display: inline-block;\n        padding: 3px 0 3px 10px;\n        .title{\n          color: $--color-black;\n        }\n      }\n\n      .field-remove {\n        display: inline-block;\n        height: 100%;\n        cursor: pointer;\n        padding:0 5px;\n        position: absolute;\n        top: 0;right: -1px;\n        line-height: 26px;\n        width: 15px;\n        background-color: #f1f1f1;\n        i{\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform:translate(-50%,-50%)\n        }\n      }\n    }\n  </style>\n"]}]}