{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\DynamicTab.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\components\\common\\DynamicTab.vue","mtime":1604281046033},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.dynamic-tab{\n  position: absolute;\n  width: 100%;\n  top: 5px;\n  .el-tabs__nav{\n    border-radius: 2px!important;\n  }\n  // left: 10px;\n  .el-tabs__nav-scroll{\n    // background-color: #172374;\n  }\n  &.el-tabs--card > .el-tabs__header{\n    border:none;\n  }\n  .el-tabs__nav-next, .el-tabs__nav-prev{\n    line-height: 30px;\n  }\n  .el-tabs__nav.is-top>div{\n\n    color: #fff;\n  }\n  .el-tabs__header.is-top {\n    margin: 0;\n  }\n  &.el-tabs--card > .el-tabs__header .el-tabs__item.is-active,\n  &.el-tabs--card > .el-tabs__header .el-tabs__item.is-active.is-closable{\n    background-color:#d6b06e;\n    border-bottom: none;\n    color: #fff;\n  }\n  &.el-tabs--card > .el-tabs__header .el-tabs__nav{\n    border:none;\n    overflow: hidden;\n  }\n  .el-tabs__nav.is-top{\n    height: 30px;\n    line-height: 30px;\n    background-color: #4b569c;\n  }\n  .el-tabs__nav.is-top > div{\n    // border-bottom: 2px solid #5264d9;\n    height: 30px;\n    line-height: 30px;\n    border-left: none!important;\n    font-size: 12px;\n    color: rgba(255, 255, 255, .8);\n    &:hover{\n      color: #fff;\n    }\n  }\n  /*.el-tabs__nav.is-top > div:nth-child(1){*/\n    /*border-top-left-radius: 0;*/\n  /*}*/\n\n}\n",{"version":3,"sources":["DynamicTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"DynamicTab.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n  <el-tabs class=\"dynamic-tab\"\n           v-model=\"activeIndex\"\n           @tab-remove=\"handleRemove\"\n           @tab-click=\"handleClick\"\n           type=\"card\">\n    <el-tab-pane v-for=\"item in tabs\"\n                 :key=\"item.id\"\n                 :label=\"item.title\"\n                 :labelContent=\"()=>(item)\"\n                 :name=\"item.id\"\n                 :closable=\"item.closable\">\n    </el-tab-pane>\n  </el-tabs>\n</template>\n\n<script>\n  import { createNamespacedHelpers } from 'vuex';\n  const { mapState, mapMutations } = createNamespacedHelpers('dynamicTabs');\n  export default {\n    name: \"DynamicTab\",\n    data: () => ({\n      activeIndex: ''\n    }),\n    created() {\n      this.setAllTabs();\n    },\n    mounted() {\n      this.activeIndex  = this.currentTabIndex;\n      var self = this;\n      var _beforeUnload_time = 0, _gap_time = 0;\n      var is_fireFox = navigator.userAgent.indexOf(\"Firefox\")>-1;\n      window.addEventListener('unload', e => {\n        _gap_time = new Date().getTime() - _beforeUnload_time\n        if(_gap_time <= 5) {\n          console.log('sx11')\n          self.removeAllTabs();\n          self.removeCacheTabs();\n        }\n      })\n      window.addEventListener('beforeunload',() => {\n        _beforeUnload_time = new Date().getTime()\n        if(is_fireFox) {//火狐关闭执行\n          console.log('sx22')\n          self.removeAllTabs();\n          self.removeCacheTabs();\n        }\n\n      });\n    },\n    computed: {\n      ...mapState(['tabs', 'currentTab', 'currentTabIndex'])\n    },\n    watch: {\n      currentTabIndex(v) {\n        if(v !== '' && v !== this.activeIndex) {\n          this.activeIndex = v;\n        }\n      }\n    },\n    methods: {\n      ...mapMutations([\n        'removeTab',\n        'setCurrentTab',\n        'setCurrentTabIndex',\n        'setCacheTabs',\n        'setAllTabs',\n        'removeAllTabs',\n        'removeCacheTabs',\n      ]),\n      handleRemove(id) {\n        this.removeTab(id);\n        this.$router.push(this.currentTab);\n        this.setCacheTabs();\n      },\n      handleClick(tab) {\n\n        this.setCurrentTabIndex(tab.name);\n        // 利用element一个多余的参数来挂载一些数据 （不知道未来会不会被干掉）\n        let currentTab = tab.labelContent();\n        console.log(currentTab)\n        this.setCurrentTab(currentTab);\n        if(currentTab.title) {\n          this.$title(currentTab.title);\n          this.$router.push(JSON.parse(JSON.stringify(currentTab)));\n          console.log(JSON.parse(JSON.stringify(currentTab)))\n        }\n      },\n    },\n    destroyed() {\n      this.removeAllTabs();\n      this.removeCacheTabs();\n    }\n  };\n</script>\n<style lang=\"scss\">\n  .dynamic-tab{\n    position: absolute;\n    width: 100%;\n    top: 5px;\n    .el-tabs__nav{\n      border-radius: 2px!important;\n    }\n    // left: 10px;\n    .el-tabs__nav-scroll{\n      // background-color: #172374;\n    }\n    &.el-tabs--card > .el-tabs__header{\n      border:none;\n    }\n    .el-tabs__nav-next, .el-tabs__nav-prev{\n      line-height: 30px;\n    }\n    .el-tabs__nav.is-top>div{\n\n      color: #fff;\n    }\n    .el-tabs__header.is-top {\n      margin: 0;\n    }\n    &.el-tabs--card > .el-tabs__header .el-tabs__item.is-active,\n    &.el-tabs--card > .el-tabs__header .el-tabs__item.is-active.is-closable{\n      background-color:#d6b06e;\n      border-bottom: none;\n      color: #fff;\n    }\n    &.el-tabs--card > .el-tabs__header .el-tabs__nav{\n      border:none;\n      overflow: hidden;\n    }\n    .el-tabs__nav.is-top{\n      height: 30px;\n      line-height: 30px;\n      background-color: #4b569c;\n    }\n    .el-tabs__nav.is-top > div{\n      // border-bottom: 2px solid #5264d9;\n      height: 30px;\n      line-height: 30px;\n      border-left: none!important;\n      font-size: 12px;\n      color: rgba(255, 255, 255, .8);\n      &:hover{\n        color: #fff;\n      }\n    }\n    /*.el-tabs__nav.is-top > div:nth-child(1){*/\n      /*border-top-left-radius: 0;*/\n    /*}*/\n\n  }\n</style>\n"]}]}