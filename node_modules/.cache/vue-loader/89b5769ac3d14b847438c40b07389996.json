{"remainingRequest":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\ProductDoc.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\src\\views\\product\\ProductDoc.vue","mtime":1604281047867},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yif_z\\Desktop\\DealViewer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.productDoc{\n\t.report{\n\t\tline-height: 30px;\n\t\tli{\n\t\t\tcolor: $--color-grey;\n\t\t\tfont-size: 13px;\n\t\t\tp{\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t\t.file{\n\t\t\tpadding-left: 15px;\n\t\t\tline-height: 30px;\n\t\t\tli{\n\t\t\t\tcolor: $--color-black;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tspan.text{\n\t\t\t\t\tmargin-right: 20px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.el-button--mini.is-round{\n\t\tpadding: 5px;\n\t}\n\t.hint{\n\t\tfont-size: 12px;\n\t\tcolor: #a0a0a0;\n\t}\n}\n.filterBox{\n\tposition: relative;\n\tdisplay: inline-block;\n\t.el-input__inner{\n\t\twidth: 400px;\n\t\tborder-radius: 20px;\n\t\tbackground-color: #f5f5f5;\n\t}\n\ti{\n\t\tposition: absolute;\n\t\ttop: 7px;\n\t\tright: 10px;\n\t\tcolor: #c7c7c7;\n\t\tcursor: pointer;\n\t}\n}\n\n",{"version":3,"sources":["ProductDoc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductDoc.vue","sourceRoot":"src/views/product","sourcesContent":["<template>\n\t<div class=\"detailPage productDoc\">\n    <ItemBox title=\"文件下载\">\n    <div class=\"filterBox\">\n    \t<el-input  size=\"mini\" v-model=\"filterValue\" placeholder=\"请输入关键词搜索相关文档\"></el-input>\n    \t<i class=\"iconfont icon-cha8\" v-show=\"filterValue.trim() != ''\" @click=\"clearFilter\" title=\"清空筛选\"></i>\n    </div>\n      <ul class=\"report\">\n        <li v-for=\"(item,index) in docList\">\n        \t<p @click=\"foldFun(index)\">{{item.FileCategoryName}}<span><i class=\"iconfont icon-zhankai2\" :class=\"'icon'+index\"></i></span></p>\n          <ul class=\"file\" :class=\"'file'+index\">\n            <li v-for=\"file in item.children\" >\n              <span class=\"text\" @click=\"downLoadFile(file)\">{{file.FileName}}</span>\n              <el-button  size=\"mini\" icon=\"el-icon-download\" title=\"下载文件\" round @click=\"downLoadFile(file)\"></el-button>\n            </li>\n            <li v-if=\"item.children.length<1\">\n            \t<span class=\"hint\">暂无数据</span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </ItemBox>\n\t</div>\n</template>\n\n<script>\n\timport fsvc from '@/api/FileService';\n  import ItemBox from '@/components/layout/ItemBox.vue';\n  import {addClass,removeClass} from '@/utils/dom.js'\nexport default{\n\tdata() {\n\t\treturn {\n\t\t\tproductDetail:{},\n\t\t\tdocList:[],\n\t\t\tdocListDeepCopy:[],\n\t\t\tfilterValue:''\n\t\t}\n\t},\n  components:{\n    ItemBox\n  },\n\tcreated(){\n\t\tthis.productDetail = JSON.parse(sessionStorage.getItem(\"productDetail\"));\n\t\tthis.initProductDoc()\n\t},\n\tcomputed: {\n    TrustID() {\n      return this.$store.state.productInfo.trustId;\n    }\n  },\n  watch:{\n  \tfilterValue(v) {\n  \t\tthis.docList = JSON.parse(JSON.stringify(this.docListDeepCopy))\n  \t\tif (v.trim() != '') {\n  \t\t\tfor (var i = 0; i < this.docList.length; i++) {\n\t  \t\t\tthis.docList[i].children = this.docList[i].children.filter((item) => {\n\t  \t\t\t\tif (item.FileName.indexOf(v)>-1) {\n\t  \t\t\t\t\treturn item\n\t  \t\t\t\t}\n\t  \t\t\t})\n\t  \t\t}\n  \t\t}\n  \t}\n  },\n\tmethods:{\n\t\tinitProductDoc(){\n\t\t\tvar self = this;\n\t\t\tvar svc = this.$http('PortfolioManagement', 'DV.TrustAssociatedDocs_Get');\n\t\t\tsvc.AddParam({ Name: 'TrustID', Value: self.TrustID, DBType: 'int' });\n\t\t\tsvc.ExecTables().then(res =>{\n\t\t\t\tfor (var i = 0; i < res[0].length; i++) {\n\t\t\t\t    res[0][i].FileName = res[0][i].FileCategoryName\n\t\t\t\t    res[0][i].children = []\n\t\t\t\t    for (var ii = 0; ii < res[1].length; ii++) {\n\t\t\t\t        res[1][ii].icon = 'iconfont icon-folder-open'\n\t\t\t\t        if (res[1][ii].FileCategory == res[0][i].FileCategory) {\n\t\t\t\t            res[0][i].children.push(res[1][ii])\n\t\t\t\t        }\n\n\t\t\t\t    }\n\t\t\t\t}\n\t\t\t\tself.docList = JSON.parse(JSON.stringify(res[0]))\n\t\t\t\tself.docListDeepCopy = JSON.parse(JSON.stringify(res[0]))\n\t\t\t})\n\t\t},\n\t\tdownLoadFile(file){\n\t\t\tfsvc.DownLoadFileByPath(file.FilePath + file.FileName, file.FileName, 1)\n\t\t},\n\t\tclearFilter() {\n\t\t\tthis.filterValue = ''\n\t\t},\n\t\tfoldFun(index) {\n\t\t\tvar dis = document.getElementsByClassName('file'+index)[0].style.display\n\t\t\tvar iconD = document.getElementsByClassName('icon'+index)[0]\n\t\t\tif (dis == 'none') {\n\t\t\t\tdocument.getElementsByClassName('file'+index)[0].style.display = 'block'\n\t\t\t\tremoveClass(iconD,'icon-zhankaisvg')\n\t\t\t\taddClass(iconD,'icon-zhankai2')\n\t\t\t}else{\n\t\t\t\tdocument.getElementsByClassName('file'+index)[0].style.display = 'none'\n\t\t\t\taddClass(iconD,'icon-zhankaisvg')\n\t\t\t\tremoveClass(iconD,'icon-zhankai2')\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.productDoc{\n\t.report{\n\t\tline-height: 30px;\n\t\tli{\n\t\t\tcolor: $--color-grey;\n\t\t\tfont-size: 13px;\n\t\t\tp{\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t\t.file{\n\t\t\tpadding-left: 15px;\n\t\t\tline-height: 30px;\n\t\t\tli{\n\t\t\t\tcolor: $--color-black;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tspan.text{\n\t\t\t\t\tmargin-right: 20px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.el-button--mini.is-round{\n\t\tpadding: 5px;\n\t}\n\t.hint{\n\t\tfont-size: 12px;\n\t\tcolor: #a0a0a0;\n\t}\n}\n.filterBox{\n\tposition: relative;\n\tdisplay: inline-block;\n\t.el-input__inner{\n\t\twidth: 400px;\n\t\tborder-radius: 20px;\n\t\tbackground-color: #f5f5f5;\n\t}\n\ti{\n\t\tposition: absolute;\n\t\ttop: 7px;\n\t\tright: 10px;\n\t\tcolor: #c7c7c7;\n\t\tcursor: pointer;\n\t}\n}\n\n</style>\n"]}]}