{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-f62b46c0\"],{2699:function(t,e,r){\"use strict\";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"itemBox\"},[r(\"div\",{staticClass:\"itemBox-title\"},[r(\"div\",{staticClass:\"itemBox-title--left\"},[t._t(\"left\",[t._v(t._s(t.title))])],2),r(\"div\",{staticClass:\"itemBox-title--right\"},[t._t(\"right\")],2)]),r(\"div\",{staticClass:\"itemBox-content\"},[t._t(\"default\")],2)])},s=[],i={name:\"ItemBox\",props:{title:{type:String}}},o=i,n=(r(\"d459\"),r(\"2877\")),l=Object(n[\"a\"])(o,a,s,!1,null,\"2c19028f\",null);e[\"a\"]=l.exports},\"61dc\":function(t,e,r){\"use strict\";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"ItemBox\",{attrs:{title:\"财务分析报告\"}},[r(\"template\",{slot:\"right\"},[r(\"el-button\",{staticStyle:{position:\"absolute\",right:\"60px\",top:\"20px\"},attrs:{type:\"primary\"},on:{click:t.exportExcel}},[t._v(\"生成财务分析报告\")])],1),r(\"data-grid\",{key:t.viewType,ref:\"refDataGrid\",attrs:{id:\"export-table\",conName:\"PortfolioManagement\",\"proc-name\":\"report\",tableName:t.viewType,isFixed:\"\",order:t.listOrder,filter:t.listFilter,needUserName:!0,multiSelection:!0,\"row-key\":t.row_key},on:{listDataChanged:t.listDataChanged}},[r(\"template\",{slot:\"table-column\"},[r(\"el-table-column\",{attrs:{prop:\"TrustName\",label:\"报告名称\",\"min-width\":\"200\",\"show-overflow-tooltip\":!0}}),r(\"el-table-column\",{attrs:{prop:\"TrustStartDate\",label:\"报告日期\",width:\"120\"}}),r(\"el-table-column\",{attrs:{prop:\"MarketCategoryName\",label:\"所属经营机构\",width:\"120\"}}),r(\"el-table-column\",{attrs:{prop:\"ProductSubject\",label:\"创建人\",\"min-width\":\"130\"}}),r(\"el-table-column\",{attrs:{prop:\"TrustStartDate\",label:\"创建日期\",\"min-width\":\"130\"}}),r(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"150\",\"show-overflow-tooltip\":!0},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[r(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(e){return t.EditReport(a)}}},[t._v(\"编辑\")]),r(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(e){return t.downloadReport(a)}}},[t._v(\"下载\")]),r(\"el-button\",{staticClass:\"red\",attrs:{size:\"mini\",type:\"text\"},on:{click:function(e){return t.deleteReport(a)}}},[t._v(\"删除\")])]}}])})],1)],2),r(\"el-dialog\",{attrs:{title:\"生成财务分析报告\",width:\"500px\",visible:t.createReport,\"destroy-on-close\":\"\",\"lock-scroll\":!1},on:{\"update:visible\":function(e){t.createReport=e}}},[r(\"el-table\",{staticStyle:{\"min-height\":\"300px\"},attrs:{showFilter:!1,data:t.fields}},[r(\"div\",{staticClass:\"filter-label text-ellipsis\"},[t._v(\"报表日期：\\n          \"),r(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{\"popper-class\":\"max-width\",filterable:\"\"},model:{value:t.industy,callback:function(e){t.industy=e},expression:\"industy\"}},t._l(t.fields,(function(t,e){return r(\"el-option\",{key:e,attrs:{label:t.TrustName,value:t.TrustName}})})),1)],1)])],1)],2)},s=[],i=r(\"f48d\"),o=i[\"a\"],n=(r(\"6d93\"),r(\"2877\")),l=Object(n[\"a\"])(o,a,s,!1,null,null,null);e[\"default\"]=l.exports},\"6d93\":function(t,e,r){\"use strict\";r(\"b300\")},\"7ca4\":function(t,e,r){},b300:function(t,e,r){},d459:function(t,e,r){\"use strict\";r(\"7ca4\")},f48d:function(t,e,r){\"use strict\";(function(t){var a=r(\"65c7\"),s=r(\"2699\"),i=r(\"2f62\"),o=r(\"e2ae\");r(\"7d3c\");function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e[\"a\"]={components:{dataGrid:a[\"a\"],ItemBox:s[\"a\"]},data:function(){return{listOrder:\"ItemId asc,TrustStartDate asc\",listFilter:\"IsMarketProduct = 1\",searchS:!0,industy:\"202003季度\",createReport:!1,fields:[{TrustName:\"202001季度\"},{TrustName:\"202002季度\"},{TrustName:\"202003季度\"},{TrustName:\"202004季度\"}],checkedData:[],tableDataList:[],viewType:\"DV.view_Products\",reportUpload:!1,dialogUploadFileName:\"\",progressSw:!1,progressText:\"正在保存文件，请稍等\",percentage:0}},computed:{userName:function(){return this.$store.state.user.userName},ConcernTrust:function(){return this.$store.state.productInfo.ConcernTrust}},methods:l(l({},Object(i[\"d\"])(\"productInfo\",[\"setProductDetail\",\"setConcernTrust\"])),{},{searchSC:function(){this.searchS=!this.searchS},exportExcel:function(){this.createReport=!0},EditReport:function(t){this.reportUpload=!0,this.TrustId=t},downloadReport:function(t){this.$message.success(\"下载成功\")},deleteReport:function(t){var e=this;confirm(\"确定要删除所选产品吗?\")&&e.$message.success(\"删除成功\")},dialogFileInputs:function(t){var e=t.target.files;1==e.length&&(this.dialogUploadFileName=e[0].name)},dialogUploadCilck:function(e){t(\"#\"+e).click()},reportingFilesUpload:function(){var e=this,r=t(\"#excelUploads\")[0].files;if(r.length<1)e.$message.error(\"请选择上传的文件\");else{e.reportUpload=!1,e.percentage=0;var a=0,s=0,i=r[a].name,n=function(t){e.progressSw=!0,s=t.loaded/t.total,e.percentage=parseInt((a+s)/r.length*100)},l=function(t){e.progressText=\"\";var r=t.UploadResult;r=r.substr(0,r.lastIndexOf(\"/\")+1);var a=i.substr(i.lastIndexOf(\".\")+1),s=e.$http(\"PortfolioManagement\",\"DV.TrustAssociatedDocs_Add\");s.AddParam({Name:\"TrustId\",Value:e.TrustID,DBType:\"int\"}),s.AddParam({Name:\"FileCategory\",Value:e.fileType,DBType:\"string\"}),s.AddParam({Name:\"FilePath\",Value:r,DBType:\"string\"}),s.AddParam({Name:\"FileName\",Value:i,DBType:\"string\"}),s.AddParam({Name:\"FileType\",Value:a,DBType:\"string\"}),s.AddParam({Name:\"UserName\",Value:e.userName,DBType:\"string\"}),s.ExecResult().then((function(t){t=parseInt(t),isNaN(t)?(e.$message.error(\"文件上传发生内部服务错误\"),e.progressSw=!1):(e.progressSw=!0,e.progressText=\"已成功上传文件\",setTimeout((function(){e.progressSw=!1,e.progressText=\"\"}),500))}))};o[\"a\"].UploadOther(r[a],i,folderName,1)(n,l)}},row_key:function(t){return\"DV.view_Products\"===this.viewType?t.TrustId:t.SNO},listDataChanged:function(t){this.tableDataList=t}}),mounted:function(){this.$title(),this.listFilter=\"IsMarketProduct = 1\"}}}).call(this,r(\"1157\"))}}]);","extractedComments":[]}